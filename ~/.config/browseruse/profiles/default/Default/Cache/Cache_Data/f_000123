/*
 Kingdee Galaxy 
 build on [2023-06-05 19:20:58.301]. 
**/
function Getk3cloudloginInfo(e){for(var t,n=document.cookie,i=n?n.split(";"):[],a=0,r=i.length;r>a;a++)if(t=$.trim(i[a]).split("="),t[0]==e)return decodeURIComponent(t[1]);return null}function CheckShellByWinService(){"1"!=isInstallShell&&KD.CheckProcessExists("Kingdee.BOS.DeskClient.WinService")}function isSLIndex(){var e=KD.getCurPageName();return"silverlight/index.aspx"==e||"/k3cloud"==e||"k3cloud/"==e}function mainlogin(){KDCookieManager.renewKDSession(),KD.writeSecureLog(),KD.openDebugger(),KD.applyGolbalFontName(),KD.initClientParameters(),KD.GetServerCommonConfig();var e=KD.getQueryString("loginType");if(e&&"qrcode"==e){KD.storage.setItem("lastLoginType",JSON.stringify(e));var t=KD.getQueryString("lcid"),n=KD.getQueryString("dbid"),i=KD.storage.getItem("userHistory")||"{}",a=KD.parseObject(i),r={user:"qrcodeuser",lan:t,acc:n,ver:""};a[r.user]=r,KD.storage.setItem("userHistory",JSON.stringify(a));var r={user:"",acc:n,lan:t,ver:""};KD.storage.setItem(KD.CONST.k3CloudLoginInfoKey,JSON.stringify(r))}var o=function(e){renderMainLogin(e),KD.getIsHtml5LoginForSilverlight()&&$.isFunction(window.loadIndexSL)&&window.loadIndexSL(e)};KD.isStartAppVerify()?KD.StartVerify(this,function(e){var t=e;try{if(KD&&t&&t.BrandEntity&&(KD.Brand=t.BrandEntity),null==t||1==t.ResultType||1==t.ExitType)if(t&&t.Message&&-1==t.ResultType)showMessage(t.Message,"",function(){naviTo(KD.format("{0}/{1}/index.aspx",KD.getUrlRoot(),KD.getSubPath()))});else{if(KD.isQBoard()&&t.CustomArgs){var n=KD.parseObject(KD.base64Decode(t.CustomArgs));if(n&&n.CustomArgs){var i=KD.parseObject(n.CustomArgs);if(i.simpleport&&KD.storage.setItem(KD.CONST.k3CloudQBoardSimplePortKey,i.simpleport),i.simpleporterror&&KD.writeLog("simpleporterror: "+i.simpleporterror),i.udurl)return void naviTo(KD.format("{0}/{1}",KD.getUrlRoot(),i.udurl))}}o(e)}else{var a="",r=function(e){e&&naviTo(e)};switch(t.FailureCallBackType){case 3:showMessage(t.Message,"",function(){r(t.RedirectUrl)});break;case 2:a=t.RedirectUrl,r(a);break;case 1:showMessage(t.Message,"",function(){r("about:blank")});break;case 0:default:showMessage(t.Message,"")}}}catch(s){showMessage(t.Message,s.Stack,function(){o()})}}):o()}function showMessage(e,t,n){KDMessageBox.show({type:KDMessageBox.KDMesBoxType.Warning,sourceClass:"",sourceMethod:"",msg:e,description:t,callback:n})}function naviTo(e){var t=e;t&&(t.indexOf("://")<0&&"about:blank"!=t.toLowerCase()&&(t=KD.getUrlRoot()+"/"+t),window.location=t)}function _getLoginType(){var e=[],t=$(".boxtitles .boxtitle.active");t.length>0&&$.each(t,function(t,n){var i=$(n).attr("data-type");KD.IsNullOrWhiteSpace(i)||e.push(i)});var n=$("#qr_").is(":visible");return e.length>0&&$.inArray("qrcode",e)>-1&&n?"qrcode":e.length>0&&$.inArray("cloudaccount",e)>-1?"cloudaccount":"account"}function renderMainLogin(e){if(KD.setStartVerifyResult(e),!KD.getIsHtml5LoginForSilverlight()){var t=KD.getUserToken(),n=KD.isObject(e)?e.UserToken||t:t,i=KD.isObject(e)?e.CustomArgs:"",a=KD.isObject(e)?e.CustomParam:{},r=KD.isObject(e)?e.KDSVCSessionId:"";if(!KD.isEmpty(n))return KDCookieManager.renewKDSession(),void(KD.isEmpty(r)?KD.buildsession({UserToken:n,buildsessiononly:!0,async:!0,callback:function(e){loadMainForm(n,i,a)}}):(KDCookieManager.setKDSessionId(r),loadMainForm(n,i,a)))}$("#htmllogin").css("visibility","visible"),$("body form:first").hide().css("visibility","visible").show("slow"),$("#loginbackCt").addClass("loginbackCt"),$("#loginback").addClass("loginbackbrush"),$("#loginKDLogo").addClass("loginKDLogo"),$("body").addClass("mainpanel").css({"min-height":KD.clientMinHeight,"min-width":KD.clientMinWidth}),"1033"==KD.cookieLanguageId()?$("body").addClass("kd-body-enEnvironment"):$("body").removeClass("kd-body-enEnvironment");var o=$("#MainPanel");o.html("<div id='dbox' style='height:inherit;'>Hello!</div>"),o.ready(function(){var e=KD.getEntryRole();KD.initClientInfo();var t=KD.entryrolePlugins.getPlugin(e);t&&$.isFunction(t.initLoginPanel)&&t.initLoginPanel.call(t);var n=$("#dbox").length>0?$("#dbox").height("auto"):$("#qrCodeDiv").height("auto");n.text(""),n.children().remove();var i={entryrole:e,ok:function(e){if(KD.getIsHtml5LoginForSilverlight())$("#loginresult").attr("value",JSON.stringify(e)),SilverlightLoaded();else{var t=KD.getEntryRole();t=t?t.toLocaleLowerCase():t;var n=KD.entryrolePlugins.getPlugin(t),i=!1;if(n&&$.isFunction(n.isBuildSession)&&(i=n.isBuildSession.call(n)),i)KD.buildsession(e);else{var a=e.UserToken||e.Context&&e.Context.UserToken,r=KD.storage.getItem("KDLockedSystemInfo")||"{}",o=KD.parseObject(r);o[e.Context.UserName]&&delete o[e.Context.UserName],KD.storage.setItem("KDLockedSystemInfo",KD.obj2str(o));var s=KD.getStartVerifyResult();s&&s.IsStartLoginAuthen?loadMainForm(a,KD.isObject(s)?s.CustomArgs:"",e.CustomParam):loadMainForm(a,"",e.CustomParam)}var l=_getLoginType();KD.storage.setItem("lastLoginType",JSON.stringify(l)),_recordLoginByCloudAccount(l);var c=KD.storage.getItem("userHistory")||"{}",d=KD.parseObject(c),u="",g=$("#verifyType").data("kendoDropDownList");g&&g.value&&(u=g.value());var p={user:$("#user").val(),lan:$("#language").data("kendoDropDownList").value(),acc:$("#datacenter").data("kendoDropDownList").value(),ver:u};d[p.user]=p,KD.storage.setItem("userHistory",JSON.stringify(d))}},err:function(e){e.type=KDMessageBox.KDMesBoxType.Error;var t=KDMessageBox.show(e);t&&ClientAppProxy&&ClientAppProxy.Current&&ClientAppProxy.Current.writeLog(e.msg,e.description)}},a=function(){if($.isFunction(n.KDLogin)){if(window.LoginInterface=n.KDLogin(i),$("#qrCodeDiv")){var e=$(".loginKDLogo"),t=KD.getUrlSubRoot()+"//images/biz/International/kdcloud_icon",r=".png";KD.Brand&&KD.Brand.Resource6&&(t=KD.getUrlSubRoot()+"/"+KD.Brand.Resource6.split(".")[0],r="."+KD.Brand.Resource6.split(".")[1]);var o=parseInt(ResManager.Language);switch(o){case 1033:imgPath=t+"_1033"+r,e.width(260);break;default:imgPath=t+r}KD.GetDefaultBrandName(o),imgPath+="?v="+KD.getVersion(),e.css({"background-image":"url("+imgPath+")"})}if(_isUseKingdeeUnifiedStyle())_adjustmentLayoutForKingdeeUnifiedStyle();else{var s=$("#divBarTitle").kendoKDLoginAD().data("kendoKDLoginAD");s&&s.show()}$("#forgetpass .kd-getpassword-tips").click(function(e){return e.preventDefault,!1})}else KD.delayInvoke(a,100)};KD.delayInvoke(a,100)});var s="Cache Item Count:"+KD.storage.getLength();$("#indexClearCache").attr("title",s)}function loadMainForm(e,t,n){n&&KD.isObject(n)&&(n.GlobalWatermarkConfigStr="",delete n.GlobalWatermarkConfigStr);var i=KDCookieManager.getKDSessionId(),a=KDCookieManager.getAspNetSessionId(),r={ut:e,sid:i,key:a,lcp:n||{}},o=setTimeout(function(){clearTimeout(o),KD.storage.setItem("CurrentUserLoginIsFromIndexaspx","true");var n=$("#formId").val(),a=$("#formType").val(),s=$("#pageId").val();e=e||$("#userToken").val();var l=KD.getEntryRole(),c=KD.getQueryString("udencoding",""),d=t||"";d.indexOf("%")<0&&(d=KD.urlEncodeComponent(t||"")),beforeTransForm(r,3);var u=window,g=KD.getUrlRoot()+"/"+KD.getSubPath()+"/dform.aspx?formId="+n+"&formType="+a+(l?"&entryrole="+l:"")+(c?"&udencoding="+c:"")+"&pageId="+s;g+=KD.equalsIgnoreCase("true",KD.getConnectConfig().plainTextUrlCtxParam)?"&usertoken="+e+"&kdsid="+i:"&_cnneptstate_="+KD.urlEncodeComponent(u["C5.S6"]),g+="&custparam="+d+(KD.isDebug()?"&isDebug=true":""),KDCookieManager.setSessions(),$(location).attr("href",g)},50)}function getKDJQLayoutCallbacks(){return $.layout&&$.layout.callbacks?$.layout.callbacks.resizeTabLayout:void 0}function _isUseKingdeeUnifiedStyle(){return!0}function _recordLoginByCloudAccount(e){var t=KD.storage.getItem(KD.CONST.isHasLoginByCloudAccountName);KD.isEmpty(t)&&"cloudaccount"==e&&KD.storage.setItem(KD.CONST.isHasLoginByCloudAccountName,!0)}function _adjustmentLayoutForKingdeeUnifiedStyle(){KD.isIndex()&&$("body").css({"min-height":KD.clientMinHeight>600?600:KD.clientMinHeight,"min-width":KD.clientMinWidth>1024?1024:KD.clientMinWidth}),$("body").addClass("kd-company-unified-style"),$("#datacenter_ct").css({"float":"left"}),$("#verifyType_ct").css({"float":"right","margin-right":"0px"}),$("#loginBtnInfo").css({"margin-top":"73px"});var e="url("+KD.getImageUrlByNameAndVersion(KD.getUrlRoot()+"/images/biz/International/kdcloud_login_bg.png")+")";$("#loopbanners").css({"background-image":e}),$("#loopbanners").children().wrapAll($('<div class="kd-desc-container"></div>'));var t=ResManager.LoadKDString("金蝶云","00214298000004482"),n=KD.checkChinese(t);n?$("#loopbanners .kd-desc-container").removeClass("kd-desc-container-en"):$("#loopbanners .kd-desc-container").addClass("kd-desc-container-en"),$("#divBarTitle").text(t),$("#divImgBg").css({"min-height":"40px"}).text(ResManager.LoadKDString("为企业成长而生","00214298000004483"));var i="url("+KD.getImageUrlByNameAndVersion(KD.getUrlRoot()+"/images/biz/International/kingdee_icon.png")+")";$("#divTitle .loginKDLogo").addClass("kd-company-unified-style-icon").removeAttr("style").css({"background-image":i}),$("#loginUserInfo .kd-login-input-container").css({width:"100%",height:"44px"}),$("#loginUserInfo .kd-login-input-container .k-textbox").css({width:"313px",height:"44px"}),$("#loginUserInfo .kd-login-input-container #CAuser").css("width","308px"),i="url("+KD.getUrlRoot()+"/"+KD.getSubPath()+"/"+KD.getImageUrlByNameAndVersion("kd_icon_extend.png")+")",$("#loginUserInfo .kd_iconUserName").css({"background-image":i}),$("#loginUserInfo .kd_iconPassword").css({"background-image":i}),$("#loginUserInfo .kd-icon-sms-verification").css({"background-image":i}),$("#verifyType_ct .k-select .k-icon.k-i-arrow-s").css({"background-image":i}),$("#language_ct .k-dropdown").css({width:"120px",background:"transparent"}),$("#language_ct .k-dropdown-wrap").css({background:"transparent","text-align":"right"}),$("#language_ct .k-select").after($("#language_ct .k-input")),$("#language_ct .k-select .k-icon.k-i-arrow-s").css({"background-image":i}),$("#datacenter_ct .k-dropdown-wrap").css({"float":"left","max-width":"100%"}),$("#datacenter_ct .k-select .k-icon.k-i-arrow-s").css({"background-image":i}),$("#forgetpass").css({"margin-left":"0px"}),$("#velidationCode").css({width:"174px",height:"44px"}),KD.isManagementSite()&&$("#datacenter_ct").css({left:"0px"}),$("#grid_SRMSupplier").css({"margin-right":"0px"})}function hexToRgb(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null}function clamp(e,t,n){return Math.min(Math.max(e,t),n)}function isInArray(e,t){return t.indexOf(e)>-1}"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,a,r,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(r=l.length,n=0;r>n;n+=1)o[n]=str(n,l)||"null";return a=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,a}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;r>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],a=str(i,l),a&&o.push(quote(i)+(gap?": ":":")+a));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a=str(i,l),a&&o.push(quote(i)+(gap?": ":":")+a));return a=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,a}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,a=e[t];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(i=walk(a,n),void 0!==i?a[n]=i:delete a[n]);return reviver.call(e,t,a)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(){}),function(){var e,t,n;!function(i){function a(e,t){return K.call(e,t)}function r(e,t){var n,i,a,r,o,s,l,c,d,u,g=t&&t.split("/"),p=y.map,f=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(g=g.slice(0,g.length-1),e=g.concat(e.split("/")),c=0;e.length>c;c+=1)if(u=e[c],"."===u)e.splice(c,1),c-=1;else if(".."===u){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((g||f)&&p){for(n=e.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),g)for(d=g.length;d>0;d-=1)if(a=p[g.slice(0,d).join("/")],a&&(a=a[i])){r=a,o=c;break}if(r)break;!s&&f&&f[i]&&(s=f[i],l=c)}!r&&s&&(r=s,o=l),r&&(n.splice(0,o,r),e=n.join("/"))}return e}function o(e,t){return function(){return p.apply(i,C.call(arguments,0).concat([e,t]))}}function s(e){return function(t){return r(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(a(v,e)){var t=v[e];delete v[e],D[e]=!0,g.apply(i,t)}if(!a(m,e)&&!a(D,e))throw Error("No "+e);return m[e]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return y&&y.config&&y.config[e]||{}}}var g,p,f,h,m={},v={},y={},D={},K=Object.prototype.hasOwnProperty,C=[].slice;f=function(e,t){var n,i=d(e),a=i[0];return e=i[1],a&&(a=r(a,t),n=c(a)),a?e=n&&n.normalize?n.normalize(e,s(t)):r(e,t):(e=r(e,t),i=d(e),a=i[0],e=i[1],a&&(n=c(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},h={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:u(e)}}},g=function(e,t,n,r){var s,d,u,g,p,y,K=[];if(r=r||e,"function"==typeof n){for(t=!t.length&&n.length?["require","exports","module"]:t,p=0;t.length>p;p+=1)if(g=f(t[p],r),d=g.f,"require"===d)K[p]=h.require(e);else if("exports"===d)K[p]=h.exports(e),y=!0;else if("module"===d)s=K[p]=h.module(e);else if(a(m,d)||a(v,d)||a(D,d))K[p]=c(d);else{if(!g.p)throw Error(e+" missing "+d);g.p.load(g.n,o(r,!0),l(d),{}),K[p]=m[d]}u=n.apply(m[e],K),e&&(s&&s.exports!==i&&s.exports!==m[e]?m[e]=s.exports:u===i&&y||(m[e]=u))}else e&&(m[e]=n)},e=t=p=function(e,t,n,a,r){return"string"==typeof e?h[e]?h[e](t):c(f(e,t).f):(e.splice||(y=e,t.splice?(e=t,t=n,n=null):e=i),t=t||function(){},"function"==typeof n&&(n=a,a=r),a?g(i,e,t,n):setTimeout(function(){g(i,e,t,n)},4),p)},p.config=function(e){return y=e,y.deps&&p(y.deps,y.callback),p},n=function(e,t,n){t.splice||(n=t,t=[]),a(m,e)||a(v,e)||(v[e]=[e,t,n])},n.amd={jQuery:!0}}(),n("../node_modules/almond/almond",function(){}),n("jxg",[],function(){var e={};return"object"!=typeof JXG||JXG.extend||(e=JXG),e.extend=function(e,t,n,i){var a,r;n=n||!1,i=i||!1;for(a in t)(!n||n&&t.hasOwnProperty(a))&&(r=i?a.toLowerCase():a,e[r]=t[a])},e.extend(e,{boards:{},readers:{},elements:{},registerElement:function(e,t){e=e.toLowerCase(),this.elements[e]=t},registerReader:function(e,t){var n,i;for(n=0;t.length>n;n++)i=t[n].toLowerCase(),"function"!=typeof this.readers[i]&&(this.readers[i]=e)},shortcut:function(e,t){return function(){return e[t].apply(this,arguments)}},getRef:function(e,t){return e.select(t)},getReference:function(e,t){return e.select(t)},debugInt:function(){var e,t;for(e=0;arguments.length>e;e++)t=arguments[e],"object"==typeof window&&window.console&&console.log?console.log(t):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=t+"<br/>")},debugWST:function(){var t=Error();e.debugInt.apply(this,arguments),t&&t.stack&&(e.debugInt("stacktrace"),e.debugInt(t.stack.split("\n").slice(1).join("\n")))},debugLine:function(){var t=Error();e.debugInt.apply(this,arguments),t&&t.stack&&e.debugInt("Called from",t.stack.split("\n").slice(2,3).join("\n"))},debug:function(){e.debugInt.apply(this,arguments)}}),e}),n("utils/zip",["jxg"],function(e){var t=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],n=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],r=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],s=256;return e.Util=e.Util||{},e.Util.Unzip=function(l){function c(){return F+=8,R>E?l[E++]:-1}function d(){N=1}function u(){var e;try{return F++,e=1&N,N>>=1,0===N&&(N=c(),e=1&N,N=128|N>>1),e}catch(t){throw t}}function g(e){var n=0,i=e;try{for(;i--;)n=n<<1|u();e&&(n=t[n]>>8-e)}catch(a){throw a}return n}function p(){P=0}function f(e){b++,T[P++]=e,I.push(String.fromCharCode(e)),32768===P&&(P=0)}function h(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function m(){for(;;){if(z[H]>=x)return-1;if(S[z[H]]===H)return z[H]++;z[H]++}}function v(){var e,t=$[U];if(17===H)return-1;if(U++,H++,e=m(),e>=0)t.b0=e;else if(t.b0=32768,v())return-1;if(e=m(),e>=0)t.b1=e,t.jump=null;else if(t.b1=32768,t.jump=$[U],t.jumppos=U,v())return-1;return H--,0}function y(e,t,n){var i;for($=e,U=0,S=n,x=t,i=0;17>i;i++)z[i]=0;return H=0,v()?-1:0}function D(e){for(var t,n,i,a=0,r=e[a];;)if(i=u()){if(!(32768&r.b1))return r.b1;for(r=r.jump,t=e.length,n=0;t>n;n++)if(e[n]===r){a=n;break}}else{if(!(32768&r.b0))return r.b0;a++,r=e[a]}}function K(){var s,l,m,v,K,C,k,b,w,S,x,_,I,L,M,A,R;do if(s=u(),m=g(2),0===m)for(d(),S=c(),S|=c()<<8,_=c(),_|=c()<<8,65535&(S^~_)&&e.debug("BlockLen checksum mismatch\n");S--;)l=c(),f(l);else if(1===m)for(;;)if(K=t[g(7)]>>1,K>23?(K=K<<1|u(),K>199?(K-=128,K=K<<1|u()):(K-=48,K>143&&(K+=136))):K+=256,256>K)f(K);else{if(256===K)break;for(K-=257,w=g(i[K])+n[K],K=t[g(5)]>>3,r[K]>8?(x=g(8),x|=g(r[K]-8)<<8):x=g(r[K]),x+=a[K],K=0;w>K;K++)l=T[32767&P-x],f(l)}else if(2===m){for(k=Array(320),L=257+g(5),M=1+g(5),A=4+g(4),K=0;19>K;K++)k[K]=0;for(K=0;A>K;K++)k[o[K]]=g(3);for(w=O.length,v=0;w>v;v++)O[v]=new h;if(y(O,19,k,0))return p(),1;for(I=L+M,v=0,R=-1;I>v;)if(R++,K=D(O),16>K)k[v++]=K;else if(16===K){if(K=3+g(2),v+K>I)return p(),1;for(C=v?k[v-1]:0;K--;)k[v++]=C}else{if(K=17===K?3+g(3):11+g(7),v+K>I)return p(),1;for(;K--;)k[v++]=0}for(w=B.length,v=0;w>v;v++)B[v]=new h;if(y(B,L,k,0))return p(),1;for(w=B.length,v=0;w>v;v++)O[v]=new h;for(b=[],v=L;k.length>v;v++)b[v-L]=k[v];if(y(O,M,b,0))return p(),1;for(;;)if(K=D(B),K>=256){if(K-=256,0===K)break;for(K-=1,w=g(i[K])+n[K],K=D(O),r[K]>8?(x=g(8),x|=g(r[K]-8)<<8):x=g(r[K]),x+=a[K];w--;)l=T[32767&P-x],f(l)}else f(K)}while(!s);return p(),d(),0}function C(){var e,t,n,i,a,r,o,l,d=[];try{if(I=[],A=!1,d[0]=c(),d[1]=c(),120===d[0]&&218===d[1]&&(K(),M[L]=[I.join(""),"geonext.gxt"],L++),31===d[0]&&139===d[1]&&(_(),M[L]=[I.join(""),"file"],L++),80===d[0]&&75===d[1]&&(A=!0,d[2]=c(),d[3]=c(),3===d[2]&&4===d[3])){for(d[0]=c(),d[1]=c(),k=c(),k|=c()<<8,l=c(),l|=c()<<8,c(),c(),c(),c(),o=c(),o|=c()<<8,o|=c()<<16,o|=c()<<24,r=c(),r|=c()<<8,r|=c()<<16,r|=c()<<24,a=c(),a|=c()<<8,a|=c()<<16,a|=c()<<24,i=c(),i|=c()<<8,n=c(),n|=c()<<8,e=0,W=[];i--;)t=c(),"/"===t|":"===t?e=0:s-1>e&&(W[e++]=String.fromCharCode(t));for(w||(w=W),e=0;n>e;)t=c(),e++;b=0,8===l&&(K(),M[L]=Array(2),M[L][0]=I.join(""),M[L][1]=W.join(""),L++),_()}}catch(u){throw u}}var k,b,w,S,x,_,I=[],L=0,M=[],T=Array(32768),P=0,A=!1,R=l.length,E=0,N=1,F=0,B=Array(288),O=Array(32),U=0,$=null,H=(Array(64),Array(64),0),z=Array(17),W=[];z[0]=0,_=function(){var e,t,n,i,a,r,o=[];if(8&k&&(o[0]=c(),o[1]=c(),o[2]=c(),o[3]=c(),80===o[0]&&75===o[1]&&7===o[2]&&8===o[3]?(e=c(),e|=c()<<8,e|=c()<<16,e|=c()<<24):e=o[0]|o[1]<<8|o[2]<<16|o[3]<<24,t=c(),t|=c()<<8,t|=c()<<16,t|=c()<<24,n=c(),n|=c()<<8,n|=c()<<16,n|=c()<<24),A&&C(),o[0]=c(),8===o[0]){if(k=c(),c(),c(),c(),c(),c(),i=c(),4&k)for(o[0]=c(),o[2]=c(),H=o[0]+256*o[1],a=0;H>a;a++)c();if(8&k)for(a=0,W=[],r=c();r;)("7"===r||":"===r)&&(a=0),s-1>a&&(W[a++]=r),r=c();if(16&k)for(r=c();r;)r=c();2&k&&(c(),c()),K(),e=c(),e|=c()<<8,e|=c()<<16,e|=c()<<24,n=c(),n|=c()<<8,n|=c()<<16,n|=c()<<24,A&&C()}},e.Util.Unzip.prototype.unzipFile=function(e){var t;for(this.unzip(),t=0;M.length>t;t++)if(M[t][1]===e)return M[t][0];return""},e.Util.Unzip.prototype.unzip=function(){return C(),M}},e.Util}),n("utils/encoding",["jxg"],function(e){var t=0,n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];return e.Util=e.Util||{},e.Util.UTF8={encode:function(e){var t,n,i="",a=e.length;if(e=e.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(e));for(t=0;a>t;t++)n=e.charCodeAt(t),128>n?i+=String.fromCharCode(n):n>127&&2048>n?(i+=String.fromCharCode(192|n>>6),i+=String.fromCharCode(128|63&n)):(i+=String.fromCharCode(224|n>>12),i+=String.fromCharCode(128|63&n>>6),i+=String.fromCharCode(128|63&n));return i},decode:function(e){var i,a,r,o=0,s=0,l=t,c=[],d=e.length,u=[];for(i=0;d>i;i++)a=e.charCodeAt(i),r=n[a],s=l!==t?63&a|s<<6:255>>r&a,l=n[256+l+r],l===t&&(s>65535?c.push(55232+(s>>10),56320+(1023&s)):c.push(s),o++,0===o%1e4&&(u.push(String.fromCharCode.apply(null,c)),c=[]));return u.push(String.fromCharCode.apply(null,c)),u.join("")},asciiCharCodeAt:function(e,t){var n=e.charCodeAt(t);if(n>255)switch(n){case 8364:n=128;break;case 8218:n=130;break;case 402:n=131;break;case 8222:n=132;break;case 8230:n=133;break;case 8224:n=134;break;case 8225:n=135;break;case 710:n=136;break;case 8240:n=137;break;case 352:n=138;break;case 8249:n=139;break;case 338:n=140;break;case 381:n=142;break;case 8216:n=145;break;case 8217:n=146;break;case 8220:n=147;break;case 8221:n=148;break;case 8226:n=149;break;case 8211:n=150;break;case 8212:n=151;break;case 732:n=152;break;case 8482:n=153;break;case 353:n=154;break;case 8250:n=155;break;case 339:n=156;break;case 382:n=158;break;case 376:n=159}return n}},e.Util.UTF8}),n("utils/base64",["jxg","utils/encoding"],function(e,t){function n(e,t){return 255&e.charCodeAt(t)}function i(e,t){var n=a.indexOf(e.charAt(t));if(-1===n)throw Error("JSXGraph/utils/base64: Can't decode string (invalid character).");return n}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="=";return e.Util=e.Util||{},e.Util.Base64={encode:function(e){var i,o,s,l,c,d=[];for(c=t.encode(e),s=c.length,l=s%3,i=0;s-l>i;i+=3)o=n(c,i)<<16|n(c,i+1)<<8|n(c,i+2),d.push(a.charAt(o>>18),a.charAt(63&o>>12),a.charAt(63&o>>6),a.charAt(63&o));switch(l){case 1:o=n(c,s-1),d.push(a.charAt(o>>2),a.charAt(63&o<<4),r,r);break;case 2:o=n(c,s-2)<<8|n(c,s-1),d.push(a.charAt(o>>10),a.charAt(63&o>>4),a.charAt(63&o<<2),r)}return d.join("")},decode:function(e,n){var a,o,s,l,c,d,u=[],g=[];if(a=e.replace(/[^A-Za-z0-9\+\/=]/g,""),s=a.length,0!==s%4)throw Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(a.charAt(s-1)===r&&(l=1,a.charAt(s-2)===r&&(l=2),s-=4),o=0;s>o;o+=4)c=i(a,o)<<18|i(a,o+1)<<12|i(a,o+2)<<6|i(a,o+3),g.push(c>>16,255&c>>8,255&c),0===o%1e4&&(u.push(String.fromCharCode.apply(null,g)),g=[]);switch(l){case 1:c=i(a,s)<<12|i(a,s+1)<<6|i(a,s+2),g.push(c>>10,255&c>>2);break;case 2:c=i(a,o)<<6|i(a,o+1),g.push(c>>4)}return u.push(String.fromCharCode.apply(null,g)),d=u.join(""),n&&(d=t.decode(d)),d},decodeAsArray:function(e){var t,n=this.decode(e),i=[],a=n.length;for(t=0;a>t;t++)i[t]=n.charCodeAt(t);return i}},e.Util.Base64}),n("../build/compressor.deps.js",["jxg","utils/zip","utils/base64"],function(e,t,n){return e.decompress=function(e){return unescape(new t.Unzip(n.decodeAsArray(e)).unzip()[0][0])},e}),window.JXG=t("../build/compressor.deps.js")}(),define("jsxcompressor",function(){}),function(e){e.isJQueryOver19=function(){var t=$().jquery;return t.indexOf("1.12.")>=0?!0:e.parseFloat(t.substring(0,3))>=1.9},e.isJQueryOver20=function(){e.parseFloat($().jquery.substring(0,3))>=2},e.getOffHandler=function(){return e.isJQueryOver19()?"off":"die"},e.getOnHandler=function(){return e.isJQueryOver19()?"on":"live"},e.getPropName=function(){return e.isJQueryOver19()?"prop":"attr"}}(window),function(e){if(isJQueryOver19()){var t=window.navigator.userAgent,n=/Chrome\/(\S+)/.test(t)?RegExp.$1:void 0,i=/Version\/(\S+)/.test(t)?RegExp.$1:void 0,a=/OPR\/(\S+)/.test(t)?RegExp.$1:void 0,r=/MSIE ([^;]+)/.test(t)||/Trident\/[^"]*rv:([^\s,^\)]+)/.test(t)?RegExp.$1:void 0,o=n||i||a||r;e.browser=e.extend(e.browser||{},{msie:r,safari:i,opera:a,chrome:n,version:o}),e.curCSS=e.css,e.isNaN=function(e){var t=/\d/;return null==e||!t.test(e)||isNaN(e)}}}(jQuery),function(e){e.wafutil=e.wafutil||{},e.extend(e.wafutil,{getLazyOption:function(t){var n,i=e(t).data("_OPTIONS_"),a=e(t).attr("id");if(!i&&window._serverOptions_&&a&&e.isArray(window._serverOptions_)){var r=jlinq.from(window._serverOptions_).equals("id",a).select();r&&r.length>0&&(i=e.extend(!0,{},r[0].option?r[0].option:{}),n=r[0].type,window.debug&&r.length>0&&e.log.lazyLog({type:r[0].type,id:r[0].id}))}return i&&(i.url&&(i.url=this.handleUrl(i.url)),i.dataUrl&&(i.dataUrl=this.handleUrl(i.dataUrl)),i.urlSource&&(i.urlSource=this.handleUrl(i.urlSource)),i.subWidgetOptions&&i.subWidgetOptions.url&&(i.subWidgetOptions.url=this.handleUrl(i.subWidgetOptions.url)),i.subWidgetOptions&&i.subWidgetOptions.dataUrl&&(i.subWidgetOptions.dataUrl=this.handleUrl(i.subWidgetOptions.dataUrl))),i||{}}})}(jQuery),function(){var e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi;$.htmlPrefilter=function(t){return function(t){return t+="",t.replace(e,"<$1></$2>")}}($.htmlPrefilter)}(),define("jqueryk3cloudex",function(e){return function(){var t;return t||e.jqueryk3cloudex}}(this));var ResManager=ResManager||{};ResManager.Language="",ResManager.setLanguage=function(e){ResManager.Language=e},ResManager.getLanguage=function(){if(KD.storage&&KD.storage.getItem)var e=KD.storage.getItem("k3cloudloginInfo")||"{}";else var e=Getk3cloudloginInfo("k3cloudloginInfo");var t=JSON.parse(e);t&&t.lan&&t.lan.length>0?ResManager.Language=t.lan:ResManager.Language="2052"},ResManager.hasLanguageRes=function(e){var t=ResFactoryProxy.getRegisterType(ResManager.Language);return!!t},ResManager.LoadKDString=function(e,t){0==ResManager.Language.length&&ResManager.getLanguage();var n=ResFactoryProxy.getRegisterType(ResManager.Language);if(null==n)return e;var i=n.LangRes[t];return null!=i&&i.length>0?i:e};var ResFactoryProxy=ResFactoryProxy||{};ResFactoryProxy.res=ResFactoryProxy.res||{},ResFactoryProxy.registerType=function(e,t){ResFactoryProxy.res[e]=t},ResFactoryProxy.getRegisterType=function(e){return ResFactoryProxy.res[e]},define("ResManager",["jqueryk3cloudex"],function(e){return function(){var t;return t||e.ResManager}}(this));var MlResource2052=MlResource2052||{};MlResource2052.LangRes={};var ResFactoryProxy=ResFactoryProxy||{};ResFactoryProxy.res=ResFactoryProxy.res||{},ResFactoryProxy.registerType=function(e,t){ResFactoryProxy.res[e]=t},ResFactoryProxy.getRegisterType=function(e){return ResFactoryProxy.res[e]},ResFactoryProxy.registerType("2052",MlResource2052),define("MlResource_2052",["ResManager"],function(e){return function(){var t;return t||e.MlResource_2052}}(this));var KDMessageBox=KDMessageBox||{};KDMessageBox.show=function(e){var t=e.sourceClass?e.sourceClass+"."+e.sourceMethod+"()":"",n=$.extend(new Error,{name:e.name||ResManager.LoadKDString("金蝶提示","099002000000002"),message:(t?t+":":"")+e.msg,mestype:e.type||KDMessageBox.KDMesBoxType.Ok,number:e.number,button:e.button||KDMessageBox.KDMessageBoxButtons.Ok,description:e.description,callback:e.callback,callbackentity:e.callbackentity,args:e.args}),i=!0,a=$("#wholemessage");1==a.length&&(a.parent().remove(),a.length=0);var r=n.description&&n.description!=n.message;r&&!n.message&&(n.message=ResManager.LoadKDString("请求发生错误:请点击更多查看详细内容!","099002000000003"));var o="",s="";switch(n.mestype){case KDMessageBox.KDMesBoxType.Ok:o="content/themes/images/icon_ok.png",s="k-info-colored";break;case KDMessageBox.KDMesBoxType.Normal:o="content/themes/images/icon_normal.png",s="k-info-colored";break;case KDMessageBox.KDMesBoxType.Warning:o="content/themes/images/icon_warn.png",s="k-error-colored";break;case KDMessageBox.KDMesBoxType.Error:o="content/themes/images/icon_error.png",s="k-error-colored";break;case KDMessageBox.KDMesBoxType.Question:o="content/themes/images/icon_question.png",s="k-info-colored";break;default:o="content/themes/images/icon_normal.png",s="k-info-colored"}if(o=KD.getUrlRoot()+"/"+KD.getSubPath()+"/"+o,0==a.length){var l=kendo.format('<div id="wholemessage" style="z-index:99;" data-role="messagebox"><div id="MessageBoxContent" class="k-block {0}"',s)+' style="margin: 15px 18px 15px 15px;overflow:auto;max-height:300px;min-height:30px;">';l+='<div style="position: relative;">',n.mestype!=KDMessageBox.KDMesBoxType.None?(l+='<img src="'+o+'" style="margin-left:10px;float:left;margin-top: -8px;position: absolute;top: 50%" />',
l+='<span role="kdtitlespan" style="padding:2px 2px 2px 30px;line-height:18px;word-break:break-word;display:block;word-wrap:break-word;">'+(i?"":KD.convertToHtmlString(n.message+" "))+"</span>"):l+='<span role="kdtitlespan" style="padding:2px;line-height:18px;word-break:break-word;display:block;word-wrap:break-word; ">'+(i?"":KD.convertToHtmlString(n.message+" "))+"</span>",l+="</div>",r&&(l+='<a role="kdmsgMorelink" style="font-size:12px" href="#">更多</a><br /><div role="kdcontent" style="margin:1px 1px 1px 10px;display:none;line-height:18px"><span></span></div>'),l+="</div>";var c='<div style="width:auto;text-align:center;margin-bottom:10px;">';if(c){var d='<button role="kdmsgBtton" autofocus="autofocus" name={btname} class="k-button" style="width:auto;min-width:70px;height:30px;margin:auto;margin-left:8px;margin-right:8px;">{bttext}</button>';switch(n.button){case KDMessageBox.KDMessageBoxButtons.OkCancel:c+=d.replace("{btname}","Ok").replace("{bttext}",ResManager.LoadKDString("确定","099002000000004")),c+=d.replace("{btname}","Cancel").replace("{bttext}",ResManager.LoadKDString("取消","099002000000007"));break;case KDMessageBox.KDMessageBoxButtons.YesNo:c+=d.replace("{btname}","Yes").replace("{bttext}",ResManager.LoadKDString("是","099002000000005")),c+=d.replace("{btname}","No").replace("{bttext}",ResManager.LoadKDString("否","099002000000006"));break;case KDMessageBox.KDMessageBoxButtons.YesNoCancel:c+=d.replace("{btname}","Yes").replace("{bttext}",ResManager.LoadKDString("是","099002000000005")),c+=d.replace("{btname}","No").replace("{bttext}",ResManager.LoadKDString("否","099002000000006")),c+=d.replace("{btname}","Cancel").replace("{bttext}",ResManager.LoadKDString("取消","099002000000007"));break;case KDMessageBox.KDMessageBoxButtons.ExitNotexit:c+=d.replace("{btname}","Exit").replace("{bttext}",ResManager.LoadKDString("继续退出","00215181000007048")),c+=d.replace("{btname}","NotExit").replace("{bttext}",ResManager.LoadKDString("不退出","00215181000007049"));break;default:c+=d.replace("{btname}","Ok").replace("{bttext}",ResManager.LoadKDString("确定","099002000000004"))}c+="</div>",l+=c}l+="</div>",a=$(l),e.extraEl&&a.find("#MessageBoxContent").append(e.extraEl),c&&a.find("[role=kdmsgBtton]").click(function(e){var t,i=$(this)[getPropName()]("name");switch(i){case"Ok":t=KDMessageBox.KDDialogResult.Ok;break;case"Yes":t=KDMessageBox.KDDialogResult.Yes;break;case"No":t=KDMessageBox.KDDialogResult.No;break;case"Cancel":t=KDMessageBox.KDDialogResult.Cancel;break;case"Exit":t=KDMessageBox.KDDialogResult.Exit;break;case"NotExit":t=KDMessageBox.KDDialogResult.NotExit}n.callback&&$.isFunction(n.callback)&&(KD.isEmpty(n.callbackentity)?n.callback(t):n.callback.call(n.callbackentity,t,n.args)),e.preventDefault(),a.data("kendoWindow").close()}),i&&a.find("[role=kdtitlespan]").text(n.message),r&&(a.find("[role=kdmsgMorelink]").click(function(){var e=a.find("[role=kdcontent]").css("display");"none"==e||""==e?a.find("[role=kdcontent]").css({display:"block"}):a.find("[role=kdcontent]").css({display:"none"})}),i?a.find("[role=kdcontent] span:first").text(n.description):a.find("[role=kdcontent] span:first").html(n.description)),a.appendTo($(document.body))}if(a.kendoWindow){var u={title:e.name||ResManager.LoadKDString("金蝶提示","099002000000002"),maxWidth:1200,minWidth:220,width:420,height:"auto",minHeight:0,resizable:!0,modal:!0,pinned:!0,animation:{},close:function(e){}};if(e.actions&&(u.actions=e.actions),n.button==KDMessageBox.KDMessageBoxButtons.Ok){for(var g=u.actions||[],p=[],f=0;f<g.length;f++)"Close"!=g[f]&&p.push(g[f]);u.actions=p}if(a.kendoWindow(u),a.data("kendoWindow").center(),a.find("[role=kdmsgBtton]").focus(),KD.CONST.isStartNewUserUtilityWizards){var h=a.data("kendoWindow");h.wrapper?h.wrapper.addClass("kd-guidepromptintro-outer"):h.element.addClass("kd-guidepromptintro-outer")}}else ClientAppProxy&&ClientAppProxy.Current?alert(n.message+n.description):alert(e.msg)},KDMessageBox.remove=function(){var e=$("body").find('div[data-role="messagebox"]');e.length&&e.data("kendoWindow")&&e.data("kendoWindow").wrapper&&e.data("kendoWindow").wrapper.remove()},KDMessageBox.KDMesBoxType={None:0,Normal:0,Warning:1,Ok:2,Question:3,Error:4},KDMessageBox.KDMessageBoxButtons={Ok:0,OkCancel:1,YesNo:2,YesNoCancel:3,ExitNotexit:4},KDMessageBox.KDDialogResult={None:0,Ok:1,Cancel:2,Abort:3,Retry:4,Ignore:5,Yes:6,No:7,Exit:8,NotExit:9},define("KDMessageBox",["jqueryk3cloudex"],function(e){return function(){var t;return t||e.KDMessageBox}}(this));var KD=KD||{};!function(e){e.CONST={k3CloudQBoardSimplePortKey:"k3CloudQBoardSimplePortKey",k3CloudLoginInfoKey:"k3cloudloginInfo",LocalConfigurationKey:"LocalConfiguration",SimulateMacAddress:"SimulateMacAddress",SimulateIpAddress:"SimulateIpAddress",WorkflowChartZindex:2e4,ItemContainerOtherWidth:32,ItemContainerGalaxy:40,GalaxyFormThemeName:"Galaxy",TabMaxItemCout:15,BrowsType:{Chrome:"chrome",IE:"ie",FireFox:"firefox",Safari:"safari",Opera:"opera"},FloatingPlacementType:{BottomLeftToRight:"BottomLeftToRight",BottomRightToLeft:"BottomRightToLeft",MainMenuBottomRightToLeft:"MainMenuBottomRightToLeft"},FormSizeToContent:{Manual:0,Width:1,Height:2,WidthAndHeight:3},DataMaskModel:{Normal:0,Closed:1,Locked:2},newFileUpSec:"Kingdee.BOS.Util.PathUtils",newFileUpHeaderSec:{typ:"JWT",alg:"HS256"},DateShortCodeComparsionList:void 0,ClientType:"Html5",MaxCardsCount:17,MinClientHeight:595,MinClientWidth:1004,IsBillHeadFloat:void 0,IsEnableMinClientHeight:!0,EnableSmallScreenCriticalValue:768,isStartNewUserUtilityWizards:!1,isHasLoginByCloudAccountName:"isHasLoginByCloudAccount",CurrentDragUploadfileEventInfomationCache:void 0,IsEnableNewStyleOfTipbar:void 0,ScrollBarHeight:void 0,FooterMainPanelHeight:66,IsMobileTerminalPlatform:void 0,UnCommunitySolutionSearchMode:!1,F5RefreshEventParameterName:"F5RefreshEventParameter",IsSingleMode:void 0,MainConsoleFormIdForSingleMode:void 0,SetEnableShowCVPAllFieldData:"SetEnableShowCVPAllFieldData",MessageConcentratorGetProKey:"_GetMessage_"},e.CONST.CustomEventName={FieldEditorFocued:"FieldEditorFocued",KDMesconcentratorGetCustomEvent:"Kingdee.BOS.KDMesconcentratorGet",KDMesconcentratorConteClick:"Kingdee.BOS.MesageContentClick.ContentClick",KDMesconcentratorMoreClick:"Kingdee.BOS.MesageContentClick.MoreClick",KDMesconcentratorCloseClick:"Kingdee.BOS.MesageContentClick.CloseClick",KDScanTextChangedCustomEvent:"Kingdee.BOS.KDScanTextChangedCustomEvent",KDEntityBlockPastingAutoAssign:"EntityBlockPastingAutoAssign",KDEntityBlockPasting:"EntityBlockPasting",KDErrorSolutionsUnStand:"Kingdee.BOS.MesTips.ErrorSolutionsUnStand",KDSearchTextFieldCustomEvent:"Kingdee.BOS.KDSearchTextFieldCustomEvent",ShowCVPFieldData:"ShowCVPFieldData",PutUserBehavior:"Kingdee.BOS.PutUserBehavior",FluidDashBoardChanged:"FluidDashBoardChanged",WebbrowserMessage:"Kingdee.BOS.WebbrowserMessage",ShowCVPAllFieldData:"ShowCVPAllFieldData"},e.CONST.ShortCutKeyToggle={Digit0:"D0",Digit1:"D1",Digit2:"D2",Digit3:"D3",Digit4:"D4",Digit5:"D5",Digit6:"D6",Digit7:"D7",Digit8:"D8",Digit9:"D9",Numpad0:"NumPad0",Numpad1:"NumPad1",Numpad2:"NumPad2",Numpad3:"NumPad3",Numpad4:"NumPad4",Numpad5:"NumPad5",Numpad6:"NumPad6",Numpad7:"NumPad7",Numpad8:"NumPad8",Numpad9:"NumPad9",ArrowUp:"Up",ArrowDown:"Down",ArrowRight:"Right",ArrowLeft:"Left"}}(KD),define("KD.CONST",function(e){return function(){var t;return t||e.KD.CONST}}(this)),function(e){"use strict";function t(e){for(var t=e.length;--t>=0;)e[t]=0}function n(e,t,n,i,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=a,this.has_stree=e&&e.length}function i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e,t,n,i,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=a}function r(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nt,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ut),this.dyn_dtree=new Uint16Array(2*(2*ct+1)),this.bl_tree=new Uint16Array(2*(2*dt+1)),Tt(this.dyn_ltree),Tt(this.dyn_dtree),Tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gt+1),this.heap=new Uint16Array(2*lt+1),Tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*lt+1),Tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function l(e){this.options=mn.assign({level:Rn,method:Nn,chunkSize:16384,windowBits:15,memLevel:8,strategy:En},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new xn,this.strm.avail_out=0;var n=gn.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Pn)throw new Error(Pe[n]);if(t.header&&gn.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?Sn.string2buf(t.dictionary):"[object ArrayBuffer]"===_n.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=gn.deflateSetDictionary(this.strm,i),n!==Pn)throw new Error(Pe[n]);this._dict_set=!0}}function c(e,t){var n=new l(t);if(n.push(e,!0),n.err)throw n.msg||Pe[n.err];return n.result}function d(e,t){return t=t||{},t.gzip=!0,c(e,t)}var u=4,g=0,p=1,f=2,h=0,m=1,v=2,y=3,D=258,K=29,C=256,k=C+1+K,b=30,w=19,S=2*k+1,x=15,_=16,I=7,L=256,M=16,T=17,P=18,A=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),R=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),E=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F=512,B=new Array(2*(k+2));t(B);var O=new Array(2*b);t(O);var U=new Array(F);t(U);var $=new Array(D-y+1);t($);var H=new Array(K);t(H);var z=new Array(b);t(z);var W,j,q,V=function(e){return 256>e?U[e]:U[256+(e>>>7)]},G=function(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},J=function(e,t,n){e.bi_valid>_-n?(e.bi_buf|=t<<e.bi_valid&65535,G(e,e.bi_buf),e.bi_buf=t>>_-e.bi_valid,e.bi_valid+=n-_):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Q=function(e,t,n){J(e,n[2*t],n[2*t+1])},Z=function(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1},X=function(e){16===e.bi_valid?(G(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)},Y=function(e,t){var n,i,a,r,o,s,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,g=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,h=0;for(r=0;x>=r;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;S>n;n++)i=e.heap[n],r=l[2*l[2*i+1]+1]+1,r>f&&(r=f,h++),l[2*i+1]=r,i>c||(e.bl_count[r]++,o=0,i>=p&&(o=g[i-p]),s=l[2*i],e.opt_len+=s*(r+o),u&&(e.static_len+=s*(d[2*i+1]+o)));if(0!==h){do{for(r=f-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[f]--,h-=2}while(h>0);for(r=f;0!==r;r--)for(i=e.bl_count[r];0!==i;)a=e.heap[--n],a>c||(l[2*a+1]!==r&&(e.opt_len+=(r-l[2*a+1])*l[2*a],l[2*a+1]=r),i--)}},ee=function(e,t,n){var i,a,r=new Array(x+1),o=0;for(i=1;x>=i;i++)r[i]=o=o+n[i-1]<<1;for(a=0;t>=a;a++){var s=e[2*a+1];0!==s&&(e[2*a]=Z(r[s]++,s))}},te=function(){var e,t,i,a,r,o=new Array(x+1);for(i=0,a=0;K-1>a;a++)for(H[a]=i,e=0;e<1<<A[a];e++)$[i++]=a;for($[i-1]=a,r=0,a=0;16>a;a++)for(z[a]=r,e=0;e<1<<R[a];e++)U[r++]=a;for(r>>=7;b>a;a++)for(z[a]=r<<7,e=0;e<1<<R[a]-7;e++)U[256+r++]=a;for(t=0;x>=t;t++)o[t]=0;for(e=0;143>=e;)B[2*e+1]=8,e++,o[8]++;for(;255>=e;)B[2*e+1]=9,e++,o[9]++;for(;279>=e;)B[2*e+1]=7,e++,o[7]++;for(;287>=e;)B[2*e+1]=8,e++,o[8]++;for(ee(B,k+1,o),e=0;b>e;e++)O[2*e+1]=5,O[2*e]=Z(e,5);W=new n(B,A,C+1,k,x),j=new n(O,R,0,b,x),q=new n(new Array(0),E,0,w,I)},ne=function(e){var t;for(t=0;k>t;t++)e.dyn_ltree[2*t]=0;for(t=0;b>t;t++)e.dyn_dtree[2*t]=0;for(t=0;w>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*L]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},ie=function(e){e.bi_valid>8?G(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ae=function(e,t,n,i){ie(e),i&&(G(e,n),G(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},re=function(e,t,n,i){var a=2*t,r=2*n;return e[a]<e[r]||e[a]===e[r]&&i[t]<=i[n]},oe=function(e,t,n){for(var i=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&re(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!re(t,i,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=i},se=function(e,t,n){var i,a,r,o,s=0;if(0!==e.last_lit)do i=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],a=e.pending_buf[e.l_buf+s],s++,0===i?Q(e,a,t):(r=$[a],Q(e,r+C+1,t),o=A[r],0!==o&&(a-=H[r],J(e,a,o)),i--,r=V(i),Q(e,r,n),o=R[r],0!==o&&(i-=z[r],J(e,i,o)));while(s<e.last_lit);Q(e,L,t)},le=function(e,t){var n,i,a,r=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=S,n=0;l>n;n++)0!==r[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):r[2*n+1]=0;for(;e.heap_len<2;)a=e.heap[++e.heap_len]=2>c?++c:0,r[2*a]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)oe(e,r,n);a=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],oe(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*a]=r[2*n]+r[2*i],e.depth[a]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=a,e.heap[1]=a++,oe(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Y(e,t),ee(r,c,e.bl_count)},ce=function(e,t,n){var i,a,r=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;n>=i;i++)a=o,o=t[2*(i+1)+1],++s<l&&a===o||(c>s?e.bl_tree[2*a]+=s:0!==a?(a!==r&&e.bl_tree[2*a]++,e.bl_tree[2*M]++):10>=s?e.bl_tree[2*T]++:e.bl_tree[2*P]++,s=0,r=a,0===o?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4))},de=function(e,t,n){var i,a,r=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),i=0;n>=i;i++)if(a=o,o=t[2*(i+1)+1],!(++s<l&&a===o)){if(c>s){do Q(e,a,e.bl_tree);while(0!==--s)}else 0!==a?(a!==r&&(Q(e,a,e.bl_tree),s--),Q(e,M,e.bl_tree),J(e,s-3,2)):10>=s?(Q(e,T,e.bl_tree),J(e,s-3,3)):(Q(e,P,e.bl_tree),J(e,s-11,7));s=0,r=a,0===o?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4)}},ue=function(e){var t;for(ce(e,e.dyn_ltree,e.l_desc.max_code),ce(e,e.dyn_dtree,e.d_desc.max_code),le(e,e.bl_desc),t=w-1;t>=3&&0===e.bl_tree[2*N[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t},ge=function(e,t,n,i){var a;for(J(e,t-257,5),J(e,n-1,5),J(e,i-4,4),a=0;i>a;a++)J(e,e.bl_tree[2*N[a]+1],3);de(e,e.dyn_ltree,t-1),de(e,e.dyn_dtree,n-1)},pe=function(e){var t,n=4093624447;for(t=0;31>=t;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return g;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return p;for(t=32;C>t;t++)if(0!==e.dyn_ltree[2*t])return p;return g},fe=!1,he=function(e){fe||(te(),fe=!0),e.l_desc=new i(e.dyn_ltree,W),e.d_desc=new i(e.dyn_dtree,j),e.bl_desc=new i(e.bl_tree,q),e.bi_buf=0,e.bi_valid=0,ne(e)},me=function(e,t,n,i){J(e,(h<<1)+(i?1:0),3),ae(e,t,n,!0)},ve=function(e){J(e,m<<1,3),Q(e,L,B),X(e)},ye=function(e,t,n,i){var a,r,o=0;e.level>0?(e.strm.data_type===f&&(e.strm.data_type=pe(e)),le(e,e.l_desc),le(e,e.d_desc),o=ue(e),a=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,a>=r&&(a=r)):a=r=n+5,a>=n+4&&-1!==t?me(e,t,n,i):e.strategy===u||r===a?(J(e,(m<<1)+(i?1:0),3),se(e,B,O)):(J(e,(v<<1)+(i?1:0),3),ge(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),se(e,e.dyn_ltree,e.dyn_dtree)),ne(e),i&&ie(e)},De=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*($[n]+C+1)]++,e.dyn_dtree[2*V(t)]++),e.last_lit===e.lit_bufsize-1},Ke=he,Ce=me,ke=ye,be=De,we=ve,Se={_tr_init:Ke,_tr_stored_block:Ce,_tr_flush_block:ke,_tr_tally:be,_tr_align:we},xe=function(e,t,n,i){for(var a=65535&e|0,r=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do a=a+t[i++]|0,r=r+a|0;while(--o);a%=65521,r%=65521}return a|r<<16|0},_e=xe,Ie=function(){for(var e,t=[],n=0;256>n;n++){e=n;for(var i=0;8>i;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t},Le=new Uint32Array(Ie()),Me=function(e,t,n,i){var a=Le,r=i+n;e^=-1;for(var o=i;r>o;o++)e=e>>>8^a[255&(e^t[o])];return-1^e},Te=Me,Pe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ae={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},Re=Se._tr_init,Ee=Se._tr_stored_block,Ne=Se._tr_flush_block,Fe=Se._tr_tally,Be=Se._tr_align,Oe=Ae.Z_NO_FLUSH,Ue=Ae.Z_PARTIAL_FLUSH,$e=Ae.Z_FULL_FLUSH,He=Ae.Z_FINISH,ze=Ae.Z_BLOCK,We=Ae.Z_OK,je=Ae.Z_STREAM_END,qe=Ae.Z_STREAM_ERROR,Ve=Ae.Z_DATA_ERROR,Ge=Ae.Z_BUF_ERROR,Je=Ae.Z_DEFAULT_COMPRESSION,Qe=Ae.Z_FILTERED,Ze=Ae.Z_HUFFMAN_ONLY,Xe=Ae.Z_RLE,Ye=Ae.Z_FIXED,et=Ae.Z_DEFAULT_STRATEGY,tt=Ae.Z_UNKNOWN,nt=Ae.Z_DEFLATED,it=9,at=15,rt=8,ot=29,st=256,lt=st+1+ot,ct=30,dt=19,ut=2*lt+1,gt=15,pt=3,ft=258,ht=ft+pt+1,mt=32,vt=42,yt=69,Dt=73,Kt=91,Ct=103,kt=113,bt=666,wt=1,St=2,xt=3,_t=4,It=3,Lt=function(e,t){return e.msg=Pe[t],t},Mt=function(e){return(e<<1)-(e>4?9:0)},Tt=function(e){for(var t=e.length;--t>=0;)e[t]=0},Pt=function(e,t,n){return(t<<e.hash_shift^n)&e.hash_mask},At=Pt,Rt=function(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Et=function(e,t){Ne(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Rt(e.strm)},Nt=function(e,t){e.pending_buf[e.pending++]=t},Ft=function(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Bt=function(e,t,n,i){var a=e.avail_in;return a>i&&(a=i),0===a?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=_e(e.adler,t,a,n):2===e.state.wrap&&(e.adler=Te(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},Ot=function(e,t){var n,i,a=e.max_chain_length,r=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ht?e.strstart-(e.w_size-ht):0,c=e.window,d=e.w_mask,u=e.prev,g=e.strstart+ft,p=c[r+o-1],f=c[r+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,c[n+o]===f&&c[n+o-1]===p&&c[n]===c[r]&&c[++n]===c[r+1]){r+=2,n++;do;while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&g>r);if(i=ft-(g-r),r=g-ft,i>o){if(e.match_start=t,o=i,i>=s)break;p=c[r+o-1],f=c[r+o]}}while((t=u[t&d])>l&&0!==--a);return o<=e.lookahead?o:e.lookahead},Ut=function(e){var t,n,i,a,r,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-ht)){e.window.set(e.window.subarray(o,o+o),0),e.match_start-=o,e.strstart-=o,e.block_start-=o,n=e.hash_size,t=n;do i=e.head[--t],e.head[t]=i>=o?i-o:0;while(--n);n=o,t=n;do i=e.prev[--t],e.prev[t]=i>=o?i-o:0;while(--n);a+=o}if(0===e.strm.avail_in)break;if(n=Bt(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=pt)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=At(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=At(e,e.ins_h,e.window[r+pt-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<pt)););}while(e.lookahead<ht&&0!==e.strm.avail_in)},$t=function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ut(e),0===e.lookahead&&t===Oe)return wt;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,Et(e,!1),0===e.strm.avail_out))return wt;if(e.strstart-e.block_start>=e.w_size-ht&&(Et(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===He?(Et(e,!0),0===e.strm.avail_out?xt:_t):e.strstart>e.block_start&&(Et(e,!1),0===e.strm.avail_out)?wt:wt},Ht=function(e,t){for(var n,i;;){if(e.lookahead<ht){if(Ut(e),e.lookahead<ht&&t===Oe)return wt;if(0===e.lookahead)break}if(n=0,e.lookahead>=pt&&(e.ins_h=At(e,e.ins_h,e.window[e.strstart+pt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ht&&(e.match_length=Ot(e,n)),e.match_length>=pt)if(i=Fe(e,e.strstart-e.match_start,e.match_length-pt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=pt){e.match_length--;do e.strstart++,e.ins_h=At(e,e.ins_h,e.window[e.strstart+pt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=At(e,e.ins_h,e.window[e.strstart+1]);else i=Fe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Et(e,!1),0===e.strm.avail_out))return wt}return e.insert=e.strstart<pt-1?e.strstart:pt-1,t===He?(Et(e,!0),0===e.strm.avail_out?xt:_t):e.last_lit&&(Et(e,!1),0===e.strm.avail_out)?wt:St},zt=function(e,t){for(var n,i,a;;){if(e.lookahead<ht){if(Ut(e),e.lookahead<ht&&t===Oe)return wt;if(0===e.lookahead)break}if(n=0,e.lookahead>=pt&&(e.ins_h=At(e,e.ins_h,e.window[e.strstart+pt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=pt-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ht&&(e.match_length=Ot(e,n),e.match_length<=5&&(e.strategy===Qe||e.match_length===pt&&e.strstart-e.match_start>4096)&&(e.match_length=pt-1)),e.prev_length>=pt&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-pt,i=Fe(e,e.strstart-1-e.prev_match,e.prev_length-pt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=At(e,e.ins_h,e.window[e.strstart+pt-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=pt-1,e.strstart++,i&&(Et(e,!1),0===e.strm.avail_out))return wt}else if(e.match_available){if(i=Fe(e,0,e.window[e.strstart-1]),i&&Et(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return wt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Fe(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<pt-1?e.strstart:pt-1,t===He?(Et(e,!0),0===e.strm.avail_out?xt:_t):e.last_lit&&(Et(e,!1),0===e.strm.avail_out)?wt:St},Wt=function(e,t){for(var n,i,a,r,o=e.window;;){if(e.lookahead<=ft){if(Ut(e),e.lookahead<=ft&&t===Oe)return wt;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=pt&&e.strstart>0&&(a=e.strstart-1,i=o[a],i===o[++a]&&i===o[++a]&&i===o[++a])){r=e.strstart+ft;do;while(i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&i===o[++a]&&r>a);e.match_length=ft-(r-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=pt?(n=Fe(e,1,e.match_length-pt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Fe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Et(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===He?(Et(e,!0),0===e.strm.avail_out?xt:_t):e.last_lit&&(Et(e,!1),0===e.strm.avail_out)?wt:St},jt=function(e,t){for(var n;;){if(0===e.lookahead&&(Ut(e),0===e.lookahead)){if(t===Oe)return wt;break}if(e.match_length=0,n=Fe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Et(e,!1),0===e.strm.avail_out))return wt}return e.insert=0,t===He?(Et(e,!0),0===e.strm.avail_out?xt:_t):e.last_lit&&(Et(e,!1),0===e.strm.avail_out)?wt:St},qt=[new a(0,0,0,0,$t),new a(4,4,8,4,Ht),new a(4,5,16,8,Ht),new a(4,6,32,32,Ht),new a(4,4,16,16,zt),new a(8,16,32,32,zt),new a(8,16,128,128,zt),new a(8,32,128,256,zt),new a(32,128,258,1024,zt),new a(32,258,258,4096,zt)],Vt=function(e){e.window_size=2*e.w_size,Tt(e.head),e.max_lazy_match=qt[e.level].max_lazy,e.good_match=qt[e.level].good_length,e.nice_match=qt[e.level].nice_length,e.max_chain_length=qt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=pt-1,e.match_available=0,e.ins_h=0},Gt=function(e){if(!e||!e.state)return Lt(e,qe);e.total_in=e.total_out=0,e.data_type=tt;var t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?vt:kt,e.adler=2===t.wrap?0:1,t.last_flush=Oe,Re(t),We},Jt=function(e){var t=Gt(e);return t===We&&Vt(e.state),t},Qt=function(e,t){return e&&e.state?2!==e.state.wrap?qe:(e.state.gzhead=t,We):qe},Zt=function(e,t,n,i,a,o){if(!e)return qe;var s=1;if(t===Je&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>a||a>it||n!==nt||8>i||i>15||0>t||t>9||0>o||o>Ye)return Lt(e,qe);8===i&&(i=9);var l=new r;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+pt-1)/pt),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,Jt(e)},Xt=function(e,t){return Zt(e,t,nt,at,rt,et)},Yt=function(e,t){var n,i;if(!e||!e.state||t>ze||0>t)return e?Lt(e,qe):qe;var a=e.state;if(!e.output||!e.input&&0!==e.avail_in||a.status===bt&&t!==He)return Lt(e,0===e.avail_out?Ge:qe);a.strm=e;var r=a.last_flush;if(a.last_flush=t,a.status===vt)if(2===a.wrap)e.adler=0,Nt(a,31),Nt(a,139),Nt(a,8),a.gzhead?(Nt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),Nt(a,255&a.gzhead.time),Nt(a,a.gzhead.time>>8&255),Nt(a,a.gzhead.time>>16&255),Nt(a,a.gzhead.time>>24&255),Nt(a,9===a.level?2:a.strategy>=Ze||a.level<2?4:0),Nt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(Nt(a,255&a.gzhead.extra.length),Nt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=Te(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=yt):(Nt(a,0),Nt(a,0),Nt(a,0),Nt(a,0),Nt(a,0),Nt(a,9===a.level?2:a.strategy>=Ze||a.level<2?4:0),Nt(a,It),a.status=kt);else{var o=nt+(a.w_bits-8<<4)<<8,s=-1;s=a.strategy>=Ze||a.level<2?0:a.level<6?1:6===a.level?2:3,o|=s<<6,0!==a.strstart&&(o|=mt),o+=31-o%31,a.status=kt,Ft(a,o),0!==a.strstart&&(Ft(a,e.adler>>>16),Ft(a,65535&e.adler)),e.adler=1}if(a.status===yt)if(a.gzhead.extra){for(n=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),Rt(e),n=a.pending,a.pending!==a.pending_buf_size));)Nt(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=Dt)}else a.status=Dt;if(a.status===Dt)if(a.gzhead.name){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),Rt(e),n=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,Nt(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),0===i&&(a.gzindex=0,a.status=Kt)}else a.status=Kt;if(a.status===Kt)if(a.gzhead.comment){n=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),Rt(e),n=a.pending,a.pending===a.pending_buf_size)){i=1;break}i=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,Nt(a,i)}while(0!==i);a.gzhead.hcrc&&a.pending>n&&(e.adler=Te(e.adler,a.pending_buf,a.pending-n,n)),0===i&&(a.status=Ct)}else a.status=Ct;if(a.status===Ct&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&Rt(e),a.pending+2<=a.pending_buf_size&&(Nt(a,255&e.adler),Nt(a,e.adler>>8&255),e.adler=0,a.status=kt)):a.status=kt),0!==a.pending){if(Rt(e),0===e.avail_out)return a.last_flush=-1,We}else if(0===e.avail_in&&Mt(t)<=Mt(r)&&t!==He)return Lt(e,Ge);if(a.status===bt&&0!==e.avail_in)return Lt(e,Ge);if(0!==e.avail_in||0!==a.lookahead||t!==Oe&&a.status!==bt){var l=a.strategy===Ze?jt(a,t):a.strategy===Xe?Wt(a,t):qt[a.level].func(a,t);if((l===xt||l===_t)&&(a.status=bt),l===wt||l===xt)return 0===e.avail_out&&(a.last_flush=-1),We;if(l===St&&(t===Ue?Be(a):t!==ze&&(Ee(a,0,0,!1),t===$e&&(Tt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Rt(e),0===e.avail_out))return a.last_flush=-1,We}return t!==He?We:a.wrap<=0?je:(2===a.wrap?(Nt(a,255&e.adler),Nt(a,e.adler>>8&255),Nt(a,e.adler>>16&255),Nt(a,e.adler>>24&255),Nt(a,255&e.total_in),Nt(a,e.total_in>>8&255),Nt(a,e.total_in>>16&255),Nt(a,e.total_in>>24&255)):(Ft(a,e.adler>>>16),Ft(a,65535&e.adler)),Rt(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?We:je)},en=function(e){if(!e||!e.state)return qe;var t=e.state.status;return t!==vt&&t!==yt&&t!==Dt&&t!==Kt&&t!==Ct&&t!==kt&&t!==bt?Lt(e,qe):(e.state=null,t===kt?Lt(e,Ve):We)},tn=function(e,t){var n=t.length;if(!e||!e.state)return qe;var i=e.state,a=i.wrap;if(2===a||1===a&&i.status!==vt||i.lookahead)return qe;if(1===a&&(e.adler=_e(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===a&&(Tt(i.head),i.strstart=0,i.block_start=0,i.insert=0);var r=new Uint8Array(i.w_size);r.set(t.subarray(n-i.w_size,n),0),t=r,n=i.w_size}var o=e.avail_in,s=e.next_in,l=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ut(i);i.lookahead>=pt;){var c=i.strstart,d=i.lookahead-(pt-1);do i.ins_h=At(i,i.ins_h,i.window[c+pt-1]),i.prev[c&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=c,c++;while(--d);i.strstart=c,i.lookahead=pt-1,Ut(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=pt-1,i.match_available=0,e.next_in=s,e.input=l,e.avail_in=o,i.wrap=a,We},nn=Xt,an=Zt,rn=Jt,on=Gt,sn=Qt,ln=Yt,cn=en,dn=tn,un="pako deflate (from Nodeca project)",gn={deflateInit:nn,deflateInit2:an,deflateReset:rn,deflateResetKeep:on,deflateSetHeader:sn,deflate:ln,deflateEnd:cn,deflateSetDictionary:dn,deflateInfo:un},pn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},fn=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!==o(n))throw new TypeError(n+"must be non-object");for(var i in n)pn(n,i)&&(e[i]=n[i])}}return e},hn=function(e){for(var t=0,n=0,i=e.length;i>n;n++)t+=e[n].length;for(var a=new Uint8Array(t),r=0,o=0,s=e.length;s>r;r++){var l=e[r];a.set(l,o),o+=l.length}return a},mn={assign:fn,flattenChunks:hn},vn=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(yn){vn=!1}for(var Dn=new Uint8Array(256),Kn=0;256>Kn;Kn++)Dn[Kn]=Kn>=252?6:Kn>=248?5:Kn>=240?4:Kn>=224?3:Kn>=192?2:1;Dn[254]=Dn[254]=1;var Cn=function(e){var t,n,i,a,r,o=e.length,s=0;
for(a=0;o>a;a++)n=e.charCodeAt(a),55296===(64512&n)&&o>a+1&&(i=e.charCodeAt(a+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),a++)),s+=128>n?1:2048>n?2:65536>n?3:4;for(t=new Uint8Array(s),r=0,a=0;s>r;a++)n=e.charCodeAt(a),55296===(64512&n)&&o>a+1&&(i=e.charCodeAt(a+1),56320===(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),a++)),128>n?t[r++]=n:2048>n?(t[r++]=192|n>>>6,t[r++]=128|63&n):65536>n?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t},kn=function(e,t){if(65534>t&&e.subarray&&vn)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));for(var n="",i=0;t>i;i++)n+=String.fromCharCode(e[i]);return n},bn=function(e,t){var n,i,a=t||e.length,r=new Array(2*a);for(i=0,n=0;a>n;){var o=e[n++];if(128>o)r[i++]=o;else{var s=Dn[o];if(s>4)r[i++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&a>n;)o=o<<6|63&e[n++],s--;s>1?r[i++]=65533:65536>o?r[i++]=o:(o-=65536,r[i++]=55296|o>>10&1023,r[i++]=56320|1023&o)}}}return kn(r,i)},wn=function(e,t){t=t||e.length,t>e.length&&(t=e.length);for(var n=t-1;n>=0&&128===(192&e[n]);)n--;return 0>n?t:0===n?t:n+Dn[e[n]]>t?n:t},Sn={string2buf:Cn,buf2string:bn,utf8border:wn},xn=s,_n=Object.prototype.toString,In=Ae.Z_NO_FLUSH,Ln=Ae.Z_SYNC_FLUSH,Mn=Ae.Z_FULL_FLUSH,Tn=Ae.Z_FINISH,Pn=Ae.Z_OK,An=Ae.Z_STREAM_END,Rn=Ae.Z_DEFAULT_COMPRESSION,En=Ae.Z_DEFAULT_STRATEGY,Nn=Ae.Z_DEFLATED;l.prototype.push=function(e,t){var n,i,a=this.strm,r=this.options.chunkSize;if(this.ended)return!1;for(i=t===~~t?t:t===!0?Tn:In,"string"==typeof e?a.input=Sn.string2buf(e):"[object ArrayBuffer]"===_n.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(r),a.next_out=0,a.avail_out=r),(i===Ln||i===Mn)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=gn.deflate(a,i),n===An)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=gn.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Pn;if(0!==a.avail_out){if(i>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},l.prototype.onData=function(e){this.chunks.push(e)},l.prototype.onEnd=function(e){e===Pn&&(this.result=mn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Fn=d;e.ziblib_plugin={gzip:Fn}}(window),define("gzipcompressor",function(){});var KD=KD||{currentWin:window};KD.enumerables=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"],KD.EnumGolbalOperation={NormalBiz:0,CloseRootClick:1,DoLogout:2},KD.CONST=KD.CONST||{SimulateMacAddress:"SimulateMacAddress",SimulateIpAddress:"SimulateIpAddress"},KD.NotClearCacheKeys=[KD.CONST.SimulateMacAddress,KD.CONST.SimulateIpAddress],KD.isLoginByValidationCode=function(){var e=$("#grid_VelidationCode");if(0==e.length)return!1;var t=$("#grid_VelidationCode:visible");return t.length>0},KD.getAspNetSessionId=function(){return KD.getConnectConfig().aspNetSessionId||KD.cookie.read("ASP.NET_SessionId")||""},KD.getKDSessionId=function(){var e=KD.getConnectConfig().kdSessionId||KD.cookie.read("kdservice-sessionid")||KD.getQueryString("kdsid","")||"";return e},KD.getSSOArgs=function(){var e=KD.getConnectConfig().ssoResponseArguments||{};return e},KD.getEntryRoleConfig=function(){var e=$("#roleResConfig").val(),t=KD.parseObject(e);return t||{}},KD.isKDScriptBusy=function(e){return void 0!==e&&(KD.__kdScriptingRunningCount=(KD.__kdScriptingRunning||0)+(e?1:-1)),(KD.__kdScriptingRunning||0)>0},KD.GolbalOperation=KD.EnumGolbalOperation.NormalBiz,KD.IsHtml5LoginForSilverlight=!1,KD.getIsHtml5LoginForSilverlight=function(){var e=$("#IsHtml5LoginForSilverlight");return e.length&&e.length>0},KD.isGalaxyFormTheme=function(e){var t=e==KD.CONST.GalaxyFormThemeName;return t},KD.getRandomNum=function(e,t){var n=t-e,i=Math.random();return e+Math.round(i*n)},KD.getLocalValue=function(e,t){var n="",i=e||ClientAppProxy.Current.defaultLocalId||2052;if(t)if(KD.isArray(t))for(var a in t){var r=t[a];if(r.Key==i){n=r.Value;break}}else n=t;return n},KD.delayInvoke=function(e,t,n,i){return t&&t>50&&1e3>t&&(t=void 0),n?KD.delayInvoke.syncQueue.push({action:e,timeout:t,args:i}):KD.delayInvoke.queue.push({action:e,timeout:t,args:i}),KD.delayInvokeDoNext(),0},$.extend(KD.delayInvoke,{running:!1,queue:[],syncQueue:[]}),KD.delayInvokeDoNext=function(){if(KD.delayInvoke.queue.length>0&&0==KD.delayInvoke.running){var e=KD.delayInvoke.queue[0];KD.delayInvoke.queue.splice(0,1),KD.delayInvokeCore(e.action,e.timeout,!1,e.args)}if(KD.delayInvoke.syncQueue.length>0){var e=KD.delayInvoke.syncQueue[0];KD.delayInvoke.syncQueue.splice(0,1),KD.delayInvokeCore(e.action,e.timeout,!0,e.args)}},KD.delayInvokeCore=function(e,t,n,i){n||(KD.delayInvoke.running=!0);var a=e,r=i,o=setTimeout(function(){try{clearTimeout(o),a&&a(r)}catch(e){KD.writeLog(e.message,e.stack,!0)}finally{a=void 0,r=void 0,KD.delayInvoke.running=!1,clearTimeout(o),delete o,KD.delayInvokeDoNext()}},t||5)},KD.debounce=function(e,t){var n=null;return function(i){var a=this;clearTimeout(n),n=setTimeout(function(){e&&e.call(a,i)},t||0)}},KD.throttle=function(e,t){var n=null;return function(i){if(!n){var a=this;n=setTimeout(function(){e&&e.call(a,i),n=null},t||0)}}},KD.isCoveredInElement=function(e,t){if(!KD.isEmpty(e)&&!KD.isEmpty(t)&&(e=e instanceof jQuery?e:e instanceof HTMLElement?$(e):null,t=t instanceof jQuery?t:t instanceof HTMLElement?$(t):null,null!==e&&null!==t&&0!=e.length&&0!=t.length)){var n=e.offset(),i=t.offset(),a=e.width(),r=e.height(),o=t.outerWidth(),s=t.outerHeight();if(i.left>=n.left&&i.left<n.left+a){if(i.top>=n.top&&i.top<n.top+r)return!0;if(i.top<n.top&&i.top+s>n.top)return!0}else if(i.left+o>=n.left&&i.left+o<n.left+a){if(i.top>=n.top&&i.top<n.top+r)return!0;if(i.top<n.top&&i.top+s>n.top)return!0}else if(i.left<=n.left&&i.left+o>=n.left+a&&i.top<=n.top&&i.top+s>=n.top)return!0;return!1}},KD.setInterval=function(e,t,n){var i=0;return i=setInterval(e,t),n&&KD.writeLog("setInterval",n+"::"+(KD.isString(e)?e:"function"),!0),i},KD.printAllControls=function(){if(KD.isDebug()){var e={k3cloudmin:"k3cloud.min",k3jquerymin:"k3jquery.min",json2:"thirdpart/json2",jqueryk3cloudex:"thirdpart/jquery/jqueryk3cloudex",jsxcompressor:"thirdpart/jsxcompressor.min",jqxml2JSON:"thirdpart/jquery/jquery.xml2JSON",svg:"thirdpart/svg/svg",mfAjax:"thirdpart/mindfusionWorkFlow/MicrosoftAjax",mfMD:"thirdpart/mindfusionWorkFlow/MindFusion.Diagramming",mfFN:"thirdpart/mindfusionWorkFlow/FlowNode",mfOCN:"thirdpart/mindfusionWorkFlow/OrgChartNode",fullcalendarmonent:"thirdpart/fullcalendar/moment.min",fullcalendar:"thirdpart/fullcalendar/fullcalendar.min",fullcalendarLang:"thirdpart/fullcalendar/lang/lang.min","jqzoom-core-pack":"thirdpart/jquery.jqzoom-core-pack",fusioncharts:"thirdpart/fusioncharts/fusioncharts",fusioncharts_charts:"thirdpart/fusioncharts/fusioncharts.charts",fusioncharts_theme_zune:"thirdpart/fusioncharts/themes/fusioncharts.theme.zune"},t=getKDResConfig().paths,n=(KDControlFactoryProxy.types,[]);$.each(t,function(i){var a=t[i];if(!e[i]){var r={key:i,path:a,xtype:""},o=window[i];o&&$.extend(r,{xtype:o.xtype||""}),n.push(r)}});var i="<table><THead><tr><th>SEQ</th><th>XTYPE</th><th>KEY</th><th>Remark</th></tr></THead><TBody>",a=0;$.each(n,function(e){var t=n[e];a++,i=i+"<tr><td>H5Kendo-"+a+"</td><td>"+(t.xtype||"")+"</td><td>"+t.key+"</td><td>"+t.path+"</td></tr>"}),i+="</tbody></table>",KD.writeLog("All Controls",i,!0)}},KD.showMessage=function(e){var t="body form div:eq(0)",n=$("#printMessage"),i=function(){window.print_th=setTimeout(function(){"true"!=$("#printMessage").attr("data-ismouseon")&&(window.print_th&&clearTimeout(window.print_th),window.print_th=void 0,$("#printMessage").remove())},5e3)};if(n&&n.length)n.text(e);else{var a="padding: 8px 40px;background:url(../images/error.png) no-repeat 5px 8px;",r="padding:border:1px lightgray; font-size:1em;";$('<div style="'+a+'" id="printMessage"><span style="'+r+'">'+e+"</span></div>").insertBefore($(t)),$("#printMessage").mouseover(function(e){$(this).attr("data-ismouseon",!0)}).mouseout(function(e){$(this).attr("data-ismouseon",!1),i()})}i()},KD.getWaitToDevelop=function(e){return'<div style="color:gray;font-size:16px;text-align:center;top:25%;position:relative;">'+e+ResManager.LoadKDString("研发中! <br>如急需使用请转用桌面GUI客户端或<br>Silverlight浏览器端使用相关功能.","099002000000013")+"</div>"},function(e){e.keyBoard={isFuncKey:function(e){var t=!(e>=48&&57>=e||e>=65&&90>=e||e>=96&&111>=e||32==e||13==e||8==e);return t}}}(KD),function(e){e.dock={None:0,Top:1,Bottom:2,Left:3,Right:4,Fill:5,FieldSet:6},e.layout={existChildDock:function(t){var n=!1,i=t.items;if($.isArray(i))for(var a=0;a<i.length;a++){n=i[a]&&i[a].dock!=e.dock.None;break}return n},isFillDock:function(t){var n=t.dock&&t.dock==e.dock.Fill;return n},isVerDock:function(t){var n=t.dock&&(t.dock==e.dock.Fill||t.dock==e.dock.Left||t.dock==e.dock.Right);return n},isHorDock:function(t){var n=t.dock&&(t.dock==e.dock.Fill||t.dock==e.dock.Top||t.dock==e.dock.Bottom);return n},isDock:function(t){var n=t.dock&&t.dock!=e.dock.None;return n},isFieldSet:function(t){var n=t.dock&&t.dock==e.dock.FieldSet;return n},getInlineStyle:function(e){var t={},n=e.InlineStyle||e.inlineStyle||{};return n.MarginLeft&&$.extend(t,{"margin-left":parseInt(n.MarginLeft)}),n.MarginRight&&$.extend(t,{"margin-right":parseInt(n.MarginRight)}),t},kdRangeSize2HTMLRangeSize:function(e){if(!e)return e;var t=(e||"").split(","),n="";if(t.length>1){for(var i=1;i<t.length;i++)n+=t[i]+",";n+=t[0]}return 1==t.length&&(n=t[0]+","+t[0]+","+t[0]+","+t[0]),n},getRangeSizeStyleValue:function(t,n){var i={},a=e.layout.getRangeSize(n);switch(a.defindedCount){case 1:i[t]=a.top+"px";break;case 2:i[t]=a.top+"px "+a.right+"px";break;case 4:i[t]=a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px"}return i},getRangeSize:function(e){var t={top:0,right:0,bottom:0,left:0};if(e){var n=(e||"").replace(/px/g,"").split(/[\s\,]/);switch(t.defindedCount=n.length,n.length){case 1:var i=parseInt(n[0]);isNaN(i)||$.extend(t,{top:i,right:i,bottom:i,left:i});break;case 2:var a=parseInt(n[0]),r=parseInt(n[1]);isNaN(a)||isNaN(r)||$.extend(t,{top:a,right:r,bottom:a,left:r});break;case 4:var a=parseInt(n[0]),r=parseInt(n[1]),o=parseInt(n[2]),s=parseInt(n[3]);isNaN(a)||isNaN(r)||isNaN(o)||isNaN(s)||$.extend(t,{top:a,right:r,bottom:o,left:s})}}return t},getTargetRangeProp:function(t,n){var i="";if(t&&n)if(e.isChrome())i=t.css(n);else switch(n){case"margin":case"padding":i=t.css(n+"-top")+","+t.css(n+"-right")+","+t.css(n+"-bottom")+","+t.css(n+"-left");break;case"border":case"border-width":i=t.css("border-top-width")+","+t.css("border-right-width")+","+t.css("border-bottom-width")+","+t.css("border-left-width")}return i},isPixelValue:function(t){return!e.isNaN(parseInt(t||"").toString().replace("px",""))},setCtOrientation:function(e,t){e&&(e.ctOrientation=t)},setOrientation:function(e,t,n){e&&(e.orientation=t,n&&(e.fixedSize=n))},setAbsolute:function(t,n){var i={};if("kdform"==n.xtype){var a=e.layout.getInlineStyle(n);t.css(a)}if(n.isNoneAbsPosition||KDFlowlayoutProxy.isFlowlayoutChild(n)){if(KDFlowlayoutProxy.getCtOrientation(n)||$.extend(i,{"float":"left"}),n.height){var r=KDFlowlayoutProxy.getHeight(t,n);i.height=r,KDFlowlayoutProxy.isInVertical(n)&&(n.isNeedAutoHeight=!0)}n.width&&(i.width=KDFlowlayoutProxy.getItemWidth(t,n)),"kdform"==n.xtype&&(n.width>i.width&&(i.width=n.width),n.height>i.height&&(i.height=n.height))}else n.dock&&n.dock!=e.dock.None||($.extend(i,{position:"absolute",display:"inline-block","float":"left"}),n.dock!=e.dock.FieldSet&&n.xtype&&"kditemcontainer"==n.xtype&&(i.display="inline-flex"),void 0!=n.height&&(i.height=n.height),void 0!=n.width&&(i.width=n.width),void 0!=n.x&&(i.left=e.layout.getZoomInPx(n.x)),void 0!=n.y&&(i.top=e.layout.getZoomInPx(n.y)));var a=e.layout.getInlineStyle(n);$.extend(i,a),i.width>0&&"kditemcontainer"==n.xtype&&n.dock==e.dock.None&&n.width>0&&(i["max-width"]=i.width,delete i.width),t.css(i)},getZoomInPx:function(e){if(void 0===e)return e;var t=parseInt($(document.body).css("font-size"));return t=isNaN(t)?12:t,(e||0)*(t/12)},getStyleSize:function(e){var t=e instanceof jQuery?e[0]:e;return t?{height:t.style.height,width:t.style.width}:{height:"0px",width:"0px"}},getActualSize:function(t){var n={width:e.layout.getActualWidth(t),height:e.layout.getActualHeight(t)};return n},isRelativeWidth:function(t){if(!t||!$.isFunction(t.css))return!0;var n=e.layout.getStyleSize(t).width;return"0px"==n||n.indexOf("%")>0||"auto"==n||""==n},getCssWidth:function(t,n){if(!t||!$.isFunction(t.css))return"";var i=t.css("width"),a=parseInt(n)||0;return e.layout.isRelativeWidth(t)||(i=t.width()+a+"px"),i},isRelativeHeight:function(t){if(!t||!$.isFunction(t.css))return!0;var n=e.layout.getStyleSize(t).height;return"0px"==n||"auto"==n||n.indexOf("%")>0},getCssHeight:function(t,n){if(!t||!$.isFunction(t.css))return"";var i=t.css("height"),a=parseInt(n)||0;return e.layout.isRelativeHeight(t)||(i=t.height()+a+"px"),i},getActualWidth:function(t){var n=0,i=t.parent();return n=i.length?e.layout.isRelativeWidth(t)?e.layout.getActualWidth(i):"tabPanel"==t[getPropName()]("ctrlrole")?e.layout.getActualWidth(i):t.outerWidth(!1)||e.layout.getActualWidth(i):t.width()},getActualHeight:function(t){var n=0,i=t.parent();return n=i.length?e.layout.isRelativeHeight(t)?e.layout.getActualHeight(t.parent()):"tabPanel"==t[getPropName()]("ctrlrole")?e.layout.getActualHeight(t.parent()):t.outerHeight(!1)||e.layout.getActualHeight(t.parent()):t.height()},getInnerSize:function(t){var n={},i=e.layout.getActualSize(t),a=e.layout.getRangeSize(e.layout.getTargetRangeProp(t,"padding"));return n={width:i.width-a.left-a.right,height:i.height-a.top-a.bottom}},getChildSize:function(t,n){var i={},a=t==n,r={left:0,right:0,top:0,bottom:0},o=e.layout.getActualSize(t);if(!a&&n&&n.length){var s=r;t&&t.length&&(s=e.layout.getRangeSize(e.layout.getTargetRangeProp(t,"padding")));var l=e.layout.getRangeSize(e.layout.getTargetRangeProp(n,"margin")),c=e.layout.getRangeSize(e.layout.getTargetRangeProp(n,"padding")),d={height:s.top+s.bottom+c.top+c.bottom+l.top+l.bottom,width:s.left+s.right+c.left+c.right+l.left+l.right},u={width:o.width-d.width,height:o.height-d.height},g={width:o.width,height:o.height};$.extend(i,{targetOption:u,containerOption:g})}else{var p={width:o.width,height:o.height};$.extend(i,{targetOption:p,containerOption:p})}return i},getRealStyleNumberProp:function(t,n,i,a){var a=a||"initial",r="height"==n?e.layout.isRelativeHeight(t):"width"==n?e.layout.isRelativeWidth(t):(t?t.css(n):"100%").indexOf("px")<1,o="height"==n?e.layout.getCssHeight(t):"width"==n?e.layout.getCssWidth(t):t?t.css(n):"100%";return o?r||(o=t[n]()-(i||0)):o=a,o},getDockFramework:function(t){var n=$('<div data-layouttype="DockFrameWork"></div>');KDLayout.isNeedFixed&&(n=$('<div data-layouttype="DockFrameWork" style="width:100%;height:100%"></div>')),n.fw={layoutConfig:{applyDefaultStyles:!1,panes:{resizeChildren:!1,resizerDblClickToggle:!1,autoResize:!1,resizerDragOpacity:1},north:{paneSelector:".ui-layout-north",size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}}};for(var i in t.items){var a=t.items[i];if(a.dock==e.dock.Fill&&(n.fw[e.dock.Fill]=$('<div class="ui-layout-center" style="width:100%;height:100%"></div>').appendTo(n)),a.dock==e.dock.Top){var r=$('<div class="ui-layout-north" style="width:100%"></div>').appendTo(n);n.fw.layoutConfig.north.size=a.height,n.fw[e.dock.Top]=r}if(a.dock==e.dock.Bottom){var o=$('<div class="ui-layout-south" style="width:100%"></div>').appendTo(n);n.fw.layoutConfig.south.size=a.height,n.fw[e.dock.Bottom]=o}if(a.dock==e.dock.Left){var s=$('<div class="ui-layout-east" style="height:100%"></div>').appendTo(n);n.fw.layoutConfig.east.size=a.width,n.fw[e.dock.Left]=s}if(a.dock==e.dock.Right){var l=$('<div class="ui-layout-west" style="height:100%"></div>').appendTo(n);n.fw.layoutConfig.west.size=a.width,n.fw[e.dock.Right]=l}}return n.fw[e.dock.Fill]||(n.fw[e.dock.Fill]=$('<div class="ui-layout-center" style="width:100%;height:100%"></div>').appendTo(n)),n},setInnerDFormSize:function(t,n){var i=5,a=5,r=n||t.childForm;if(r){var o=r.getControl.call(r);ctEl=t.getControl.call(t);var s={},l=r.dformConfig;if(KDFlowlayoutProxy.isInVertical(l)){var c=e.layout.getRangeSize(e.layout.getTargetRangeProp(o,"margin")),d=e.layout.getRangeSize(e.layout.getTargetRangeProp(o,"border-width")),u=e.layout.getRangeSize(e.layout.getTargetRangeProp(ctEl,"padding")),g=e.layout.getActualWidth(t.el)-c.left-c.right-d.left-d.right-u.left-u.right;s={width:g}}else if(KDFlowlayoutProxy.isFlowlayoutChild(l))s={height:KDFlowlayoutProxy.getItemHeight(o,l),width:KDFlowlayoutProxy.getItemWidth(o,l),position:"relative","float":"none"};else if(!KDFlowlayoutProxy.isFlowlayoutChild(l)){var c=e.layout.getRangeSize(e.layout.getTargetRangeProp(o,"margin")),d=e.layout.getRangeSize(e.layout.getTargetRangeProp(o,"border-width")),u=e.layout.getRangeSize(e.layout.getTargetRangeProp(ctEl,"padding")),g=e.layout.getActualWidth(ctEl)-c.left-c.right-d.left-d.right-u.left-u.right,p=e.layout.getActualHeight(ctEl)-c.top-c.bottom-d.top-d.bottom-u.top-u.bottom;s={height:p-a,width:g-i}}o.css(s)}},getFluidColumnCount:function(){for(var t=e.lastWidth>1342?7:3,n=e.cookieLanguageId(),i={ranges:[{r:[300,780],n:1},{r:[780,1e3],n:2},{r:[1e3,1342],n:3},{r:[1342,1921],n:4},{r:[1921,2208],n:5},{r:[2208,2576],n:6},{r:[2576,9999],n:7}]},a={ranges:[{r:[300,780],n:1},{r:[780,1e3],n:2},{r:[1e3,1342],n:3},{r:[1342,9999],n:5}]},r=20521==n?a:i,o=0;o<r.ranges.length;o++){var s=r.ranges[o];if(e.lastWidth>s.r[0]&&e.lastWidth<s.r[1]){t=s.n;break}}return t},setParentTabControlInfo:function(e,t){e&&(e.parentTabControlKey=t.parentTabKey,e.parentTabItemKey=t.id,e.parentTabItemTitle=t.title)},setItemTabControlKey:function(e,t){e&&(e.parentTabKey=t)}}}(KD),KD.checkGolbalOperation=function(e){if(e||KD.GolbalOperation==KD.EnumGolbalOperation.DoLogout){KD.GolbalOperation=KD.EnumGolbalOperation.NormalBiz;var t=ClientAppProxy.Current.getLogoffPage();KD.redirection(t)}},KD.applyGolbalFontName=function(){var e=ClientAppProxy.Current.getGolbalFontName();e&&$(document.body).css({"font-family":e})},KD.setAttachmentData=function(e,t){var n="id:"+t.id+",xtype:"+t.xtype+",dock:"+t.dock+",zindex:"+KD.getValue(t,"zindex",0)+",tabIndex:"+KD.getValue(t,"tabIndex",0),i={id:t.id,xtype:t.xtype,dock:t.dock,zindex:KD.getValue(t,"zindex",0),tabIndex:KD.getValue(t,"tabIndex",0)};t.orientation&&(delete i.dock,KD.layout.setOrientation(i,t.orientation,t.fixedSize)),t.ctOrientation&&KD.layout.setCtOrientation(i,t.ctOrientation),n=KD.stringify(i),e["data-attdata"]=n,e[getPropName()]("data-attdata",n),e.attr&&!e.attr("data-attdata")&&e.attr("data-attdata",n)},KD.getAttachmentData=function(e){var t=void 0;try{var n=e[getPropName()]("data-attdata");t=KD.parseObject(n)}catch(i){t={}}return t},KD.getParentPosition=function(e){var t=e.parent(),n=t.css("position");return KD.isEmpty(n)||"initial"==n?KD.getParentPosition(t):n},KD.setPositionInitial=function(e){var t=this.clientPlatform;t.browser&&t.browser.ie>0?e.css({position:this.getParentPosition(e)}):e.css({position:"initial"})},KD.parseObject=function(str){var ret=[];try{if("string"==typeof str)if(JSON&&KD.isFunction(JSON.parse))try{ret=str?JSON.parse(str.replace(/\'/g,'"')):void 0}catch(ex){ret=str?eval("("+str+")"):void 0}else ret=str?eval("("+str+")"):void 0;else ret=str}catch(ex){var a=ex}return ret},KD.cloneObject=function(e){return KD.parseObject(KD.stringify(e))},KD.setHtml=function(e,t){KD.isThreatText(t)?(KD.delayInvoke(function(){var t="targetId="+e[getPropName()]("id");KD.writeLog("threat text",t)},2e3,!0),e.text(t)):e.html(t)},KD.isThreatText=function(e){return/\<\s{0,}script/g.test((e||"").toLowerCase())||/<.{1,}[a-z]{4,}.{1,}>/g.test((e||"").toLowerCase())||/\<\s{0,}iframe/g.test((e||"").toLowerCase())||/\<\s{0,}marquee/g.test((e||"").toLowerCase())||/\.cookie/g.test((e||"").toLowerCase())||/\<\s{0,}img/g.test((e||"").toLowerCase())},KD.stringify=function(e){var t=JSON.stringify(e);return t},KD.isValidProp=function(e,t){var n=KD.isEmpty(e)?!1:!(void 0===e[t]||null===e[t]);return n},KD.toReallyPrecision=function(e,t){var n=KD.isNumber(e)?e:parseFloat(e.replace(/,/g,"")),i=/[.0]0*$/;if(KD.isNaN(n))return(e||"").toString().indexOf(".")<0?e:(e||"").toString().replace(i,"");var a=KD.numInfo.formatNumber(n,t,"D");if(a.indexOf(".")<0)return a;var r=a.replace(i,"");return r},KD.ToGroupAggregateStr=function(e,t){return KD.toReallyPrecision(e,t)},KD.dateDiff=function(e,t,n){var i=KD.DateDiffCore(e,t),a=0;return a="H+"==n?KD.format("{0}:{1}:{2}.{3}",i.TotalHours,i.TotalMinutes,i.TotalSeconds,i.Milliseconds):"milliseconds"==n?i.Milliseconds:"second"==n?i.TotalSeconds:"minute"==n?i.TotalMinutes:"hour"==n?i.TotalHours:i.TotalSeconds},KD.DateDiffCore=function(e,t){var n={},i=Math.abs(e-t);return n.Days=parseInt(i/1e3/60/60/24),n.TotalHours=parseInt(i/1e3/60/60),n.Hours=n.TotalHours%24,n.TotalMinutes=parseInt(i/1e3/60),n.Minutes=n.TotalMinutes%60,n.TotalSeconds=parseInt(i/1e3),n.Seconds=n.TotalSeconds%60,n.TotalMilliseconds=i,n.Milliseconds=i%1e3,n},KD.getReqBETimeString=function(e){var t=new Date,n={},i="";try{var a="";if(e){var r=new Date,o=(KD.parseObject(e).time||"").replace(".",":").split(":");o.length>0&&r.setHours(o[0]),o.length>1&&r.setMinutes(o[1]),o.length>2&&r.setSeconds(o[2]),o.length>3&&r.setMilliseconds(o[3]),a=(KD.dateDiff(t,r,"H+")||"").replace(/NaN/g,"0")}n={time:KD.format("{0}:{1}:{2}.{3}",t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds().toString()),duration:a},KD.isEmpty(a)&&delete n.duration}catch(s){n=""}finally{i=KD.stringify(n)}return i},KD.arraySort=function(e,t,n){if(!KD.isArray(e))return e;var i=window[t||"parseInt"];return n=void 0===n||n,e.sort(function(e,t){return n?i(e)>i(t):i(e)<i(t)})},KD.quickSort=function(e,t){if(!(null==e||void 0==e||e.length<=0)){var n=0,i=e.length-1,a=function(t,n,i){if(t!=n){for(var r=e[t],o=t,s=n;n>t;){var l=e[n][i]||-1,c=r[i]||-1;if(l>=c)n--;else for(e[t]=e[n];n>++t;){var d=e[t][i]||-1;if(d>c){e[n]=e[t];break}}}if(o==t)return void a(++t,s,i);e[t]=r,a(o,t,i),a(n,s,i)}};return a(n,i,t),e}},KD.quickSortByType=function(e,t,n,i){if(!(null==e||void 0==e||e.length<=0)){var a=0,r=e.length-1,o=-1;"string"==n?o="":"number"==n?o=Number.NEGATIVE_INFINITY:"date"===n&&(o=Number.NEGATIVE_INFINITY);var s,l="";KD.isEmpty(i)||(l=KD.getValue(i,"fieldNameExtend",""),s=i.dataIndex);var c=function(e,t,i){var a;a=KD.isEmpty(l)?KD.getValue(e,t,i):KD.getValue(e,t+l,KD.getValue(e,t,i));var r=a;try{"string"==n?r=a+"":"number"==n&&(KD.isEmpty(a)||KD.isNumber(a)||KD.isString(a)?r=KD.isEmpty(a)?Number.NEGATIVE_INFINITY:a:KD.isEmpty(s)||(s=parseFloat(s),KD.isNaN(s)||(r=a[s])))}catch(o){KD.writeLog("GetValueByType erroe :",o,!0),r=a}return r},d=function(e,t){var i=!1,a=0;if("string"==n&&e&&e.localeCompare){e+="",t+="";var r=e.substring(0,1),o=t.substring(0,1);i=KD.checkChinese(r)&&KD.checkChinese(o),a=i?e.localeCompare(t,"zh-Hans-CN"):e>t?1:e==t?0:-1}else if("number"==n){var s=parseFloat(e),l=parseFloat(t);e=KD.isNaN(s)?Number.NEGATIVE_INFINITY:s,t=KD.isNaN(l)?Number.NEGATIVE_INFINITY:l,a=e>t?1:e==t?0:-1}else if("date"==n)try{if(e==Number.NEGATIVE_INFINITY)a=-1;else if(t==Number.NEGATIVE_INFINITY)a=1;else{var e=kendo.parseDate(e)||Number.NEGATIVE_INFINITY,t=kendo.parseDate(t)||Number.NEGATIVE_INFINITY;a=e>t?1:e==t?0:-1}}catch(c){KD.writeLog("KD.quickSortByType Date type error :",c,!0),a=-1}else a=e>t?1:e==t?0:-1;return a},u=function(t,n,i){if(t!=n){for(var a=e[t],r=t,s=n;n>t;){var l=c(e[n],i,o),g=c(a,i,o);if(d(l,g)>=0)n--;else for(e[t]=e[n];n>++t;){var p=c(e[t],i,o);if(d(p,g)>0){e[n]=e[t];break}}}if(r==t)return void u(++t,s,i);e[t]=a,u(r,t,i),u(n,s,i)}};return u(a,r,t),e}},KD.isUrl=function(e){var t="^((https|http|ftp|rtsp|mms)://)(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)",n=new RegExp(t);return n.test(e.toLowerCase())?!0:!1},KD.getVersion=function(){return(KD.getConnectConfig().resVer||"").replace(/\?ver=/gi,"")},KD.getActiveElement=function(e){var t=null;try{t=document.activeElement||(document.documentElement?document.documentElement.activeElement:null)}catch(n){t=null}return KD.isEmpty(e)||KD.isEmpty(e.relatedTarget)||(t=e.relatedTarget),t=KD.isEmpty(t)?null:$(t)},KD.getImageUrlByNameAndVersion=function(e){var t="";return e&&(t=KD.isUrl(e)?e+"?version="+KD.getVersion():"content/themes/images/"+e+"?version="+KD.getVersion()),t},KD.isFirefox=function(){if(void 0==KD.runInFirefox){var e=KD.getCurrentBrowsType();KD.runInFirefox=e.type==KD.CONST.BrowsType.FireFox}return KD.runInFirefox},KD.isChrome=function(){if(void 0==KD.runInChrome){var e=KD.getCurrentBrowsType();KD.runInChrome=e.type==KD.CONST.BrowsType.Chrome}return KD.runInChrome},KD.isX64=function(){var e=((navigator.userAgent.match(/x64/i)||[]).length||0)>0;return e},KD.isInnerWebBrowser=function(){var e=KD.equalsIgnoreCase(KD.getEntryRole(),"InnerWebBrowser");return e},KD.obj2str=function(e){if(void 0==e)return"";var t=[];if("string"==typeof e)return'"'+e.replace(/([\"\\])/g,"\\$1").replace(/(\n)/g,"\\n").replace(/(\r)/g,"\\r").replace(/(\t)/g,"\\t")+'"';if("object"==typeof e){if(e.sort){for(var n=0;n<e.length;n++)t.push(KD.obj2str(e[n]));t="["+t.join()+"]"}else{for(var n in e)t.push('"'+n+'":'+KD.obj2str(e[n]));document.all&&!/^\n?function\s*toString\(\)\s*\{\n?\s*\[native code\]\n?\s*\}\n?\s*$/.test(e.toString)&&t.push("toString:"+e.toString.toString()),t="{"+t.join()+"}"}return t}return e.toString().replace(/\"\:/g,'":""')},KD.override=function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)KD.apply(e.prototype,t);else{var n,i,a=e.self;if(a&&a.$isClass)for(n in t)t.hasOwnProperty(n)&&(i=t[n],"function"==typeof i&&(a.$className&&(i.displayName=a.$className+"#"+n),i.$name=n,i.$owner=a,i.$previous=e.hasOwnProperty(n)?e[n]:callOverrideParent),e[n]=i);else KD.apply(e,t)}return e},KD.apply=function(e,t,n){if(n&&KD.apply(e,n),e&&t&&"object"==typeof t){var i,a,r;for(i in t)e[i]=t[i];var o=KD.enumerables;if(o)for(a=o.length;a--;)r=o[a],t.hasOwnProperty(r)&&(e[r]=t[r])}return e},KD.extend=function(){var e=Object.prototype.constructor,t=function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])};return function(n,i,a){KD.isObject(i)&&(a=i,i=n,n=a.constructor!==e?a.constructor:function(){i.apply(this,arguments)}),i||KD.Error.raise({sourceClass:"Jw",sourceMethod:"extend",msg:"Attempting to extend from a class which has not been loaded on the page."});var r,o=function(){},s=i.prototype;return o.prototype=s,r=n.prototype=new o,r.constructor=n,n.superclass=s,s.constructor===e&&(s.constructor=i),n.override=function(e){KD.override(n,e)},r.override=t,r.proto=r,n.override(a),n.extend=function(e){return KD.extend(n,e)},n}}(),KD.stopPropagation=function(e){window.event&&(window.event.cancelBubble=!0),e.stopPropagation&&e.stopPropagation()},KD.writeLog=function(e,t,n){if(KD.isDebug()&&!n)ClientAppProxy.Current.writeLog(e,t);else if(console&&console.error)return console.log(e+(t?","+t:"")),!0},KD.writeLogTime=function(e,t,n){var i=new Date,a=i.getMilliseconds(),r=i.getSeconds()+"."+a,o=i.getHours()+":"+i.getMinutes()+":"+r;return KD.writeLog(e+o,t,n)},KD.writeError=function(){var e=arguments&&arguments[0].message?arguments[0]:"",t=arguments?arguments[0]||"":"",n=arguments?arguments[1]||"":"";return e&&(t=e.message,n=e.stack),KD.isDebug(),console&&console.error?(t&&console.error(t+(n?"\r\n"+n:"")),!0):!1},KD.Error=function(){},KD.Error.raise=function(e){e.type&&e.type!=KDMessageBox.KDMesBoxType.Ok||(e.type=KDMessageBox.KDMesBoxType.Error),e.actions=[],KDMessageBox.show(e)},KD["debugger"]=function(e,t){KD.isDebug()&&void 0!==t&&t&&e&&KD.writeError({message:e})},KD.getFormUrl=function(e,t,n,i){var a="dform.aspx?formId="+e+"&formType="+t+"&pageId="+n+"&parentPageId="+i+"&usertoken="+KD.getUserToken();return a},KD.getUserToken=function(){var e=(ClientAppProxy.Current.CTX||{}).UserToken||$("#userToken").val()||KD.getConnectConfig().userToken||KD.getQueryString("usertoken","")||"";return e},KD.getDateShortCodeComparsionList=function(){return KD.CONST.DateShortCodeComparsionList=KD.CONST.DateShortCodeComparsionList||{Sun:ResManager.LoadKDString("周日","00214298000003878"),Mon:ResManager.LoadKDString("周一","00214298000004253"),Tue:ResManager.LoadKDString("周二","00214298000013594"),Wed:ResManager.LoadKDString("周三","00214298000003881"),Thu:ResManager.LoadKDString("周四","00214298000004256"),Fri:ResManager.LoadKDString("周五","00214298030033709"),Sat:ResManager.LoadKDString("周六","00214298030033710"),Sunday:ResManager.LoadKDString("周日","00214298000003878"),Monday:ResManager.LoadKDString("周一","00214298000004253"),Tuesday:ResManager.LoadKDString("周二","00214298000013594"),Wednesday:ResManager.LoadKDString("周三","00214298000003881"),Thursday:ResManager.LoadKDString("周四","00214298000004256"),Friday:ResManager.LoadKDString("周五","00214298030033709"),Saturday:ResManager.LoadKDString("周六","00214298030033710"),Jan:ResManager.LoadKDString("一月","00214298030033698"),Feb:ResManager.LoadKDString("二月","00214298000003873"),Mar:ResManager.LoadKDString("三月","00214298030033700"),Apr:ResManager.LoadKDString("四月","00214298000004249"),May:ResManager.LoadKDString("五月","00214298000003876"),Jun:ResManager.LoadKDString("六月","00214298000003877"),Jul:ResManager.LoadKDString("七月","00214298030033692"),Aug:ResManager.LoadKDString("八月","00214298000013581"),Sep:ResManager.LoadKDString("九月","00214298000003868"),Oct:ResManager.LoadKDString("十月","00214298000004243"),Nov:ResManager.LoadKDString("十一月","00214298000013584"),Dec:ResManager.LoadKDString("十二月","00214298030033697"),January:ResManager.LoadKDString("一月","00214298030033698"),February:ResManager.LoadKDString("二月","00214298000003873"),March:ResManager.LoadKDString("三月","00214298030033700"),April:ResManager.LoadKDString("四月","00214298000004249"),May:ResManager.LoadKDString("五月","00214298000003876"),June:ResManager.LoadKDString("六月","00214298000003877"),July:ResManager.LoadKDString("七月","00214298030033692"),August:ResManager.LoadKDString("八月","00214298000013581"),September:ResManager.LoadKDString("九月","00214298000003868"),October:ResManager.LoadKDString("十月","00214298000004243"),November:ResManager.LoadKDString("十一月","00214298000013584"),December:ResManager.LoadKDString("十二月","00214298030033697")},KD.CONST.DateShortCodeComparsionList},function(e){e.blocking=function(e){this.init(e)},e.blocking.prototype={init:function(e){this.progress=0,this.timeoutProcess,this.intervalProcess,this.targetId=e?e.id:"",this.text=e?e.text:""},getTarget:function(){var e=void 0;return this.targetId?(e=$("#"+this.targetId),e&&e.outerHeight(!0)||(e=$(document.body))):e=$(document.body),e},show:function(t){var n=this;n.init(t);var i=this.getTarget();if(!n.isExist(i)){var a=i.offset()||{left:0,top:0},r=i.outerHeight(!0)||$(document.body).outerHeight(!0),o=i.outerWidth(!0)||$(document.body).outerWidth(!0);loadingurl=e.getUrlRoot()+"/"+e.getSubPath()+"/content/themes/images/ui_loading.gif";var s=$('<div class="kd-ui-blockingExtention" style="left: '+a.left+"px; top: "+a.top+"px; width: "+o+"px; height: "+r+'px;">   <div class="kd-ui-blockingExtention-item kd-ui-blockingExtention-bg"></div>   <div class="kd-ui-blockingExtention-item">       <img src="'+loadingurl+'"></img>   </div></div>');i.hasClass("kdmainformbg")&&s.addClass("kd-ui-blockingExtention-fixed"),e.delayInvoke(function(e){n.isExist(i)||$(".kd-ui-blockingExtention").length>0||s.appendTo($(document.body)).show()},1)}},isExist:function(e){var t=e||this.getTarget(),n=t.find(".kd-ui-blockingExtention");return n.length>0?n:void 0;
},hide:function(t){var n=this;n.t=t,e.delayInvoke(function(e){n.doHideBlocking(n.t)},2)},doHideBlocking:function(t){var n=this;t||this.getTarget();e.delayInvoke(function(){var e=n.isExistAll.call(n,t);e||(e=$(".kd-ui-blockingExtention"),e.length>1),e&&e.remove()},500,!0)},isExistAll:function(e){var t=e||this.getTarget(),n=t.find(".kd-ui-blockingExtention");return 0==n.length&&(n=$(".kd-ui-blockingExtention")),n.length>0?n:void 0},text:function(e){},showDefault:function(e){var t=this;t.init(e),clearTimeout(t.timeoutProcess),clearInterval(t.intervalProcess),this.autoTimeout=setTimeout(function(){t.hideDefault.call(t)},1e4);var n=this.text||ResManager.LoadKDString("加载中，请稍候...","099002000002632");t.show({target:this.getTarget(),text:n})},__showTime:function(e){this.init(e);var t;0==this.progress?(t=this.text||ResManager.LoadKDString("加载中，请稍候... 30%","099002000000008"),this.text(this.getTarget(),t),progress=30):30==this.progress?(t=this.text||ResManager.LoadKDString("加载中，请稍候... 70%","0991733000004071"),this.text(this.getTarget(),t),progress=70):70==this.progress?(t=this.text||ResManager.LoadKDString("加载中，请稍候... 99%","0991733000004072"),this.text(this.getTarget(),t),progress=99):(this.hide(this.getTarget()),progress=0)},__showProgress:function(t){this.init(t),clearTimeout(this.timeoutProcess),clearInterval(this.intervalProcess);var n=this.text||ResManager.LoadKDString("加载中，请稍候... 0%","0991733000004073");this.show({target:this.getTarget(),text:n}),intervalProcess=e.setInterval("showTime()",2e3,"KD.blocking.__showProgress")},__hideDefault:function(){clearTimeout(this.autoTimeout),this.hide(this.getTarget())},__showTimeOut:function(e){var t=this;t.init(e),t.show({afterShow:function(){t.timeoutProcess=setTimeout(function(){clearTimeout(t.timeoutProcess),t.hide()},1e3)}})},__showSelfDefine:function(e){var t=this;t.init(e),clearTimeout(t.timeoutProcess),clearInterval(t.intervalProcess);var n=t.text||ResManager.LoadKDString("加载中，请稍候...","0991733000004074");t.show({target:t.getTarget(),addClass:"loading-indicator-bars",text:n,textTopOffest:-5})}}}(KD),KD.getRemoteXml=function(e,t){var n=document.createElement("iframe");n.src=e;var i=function(){KD.delayInvoke(function(){var e=$(n.contentDocument).text();t&&t(e),$(n).remove()})};n.attachEvent?n.attachEvent("onload",function(e){i(e)}):n.onload=function(e){i(e)},document.body.appendChild(n)},KD.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(e){for(var t,n=document.cookie,i=n?n.split(";"):[],a=0,r=i.length;r>a;a++)if(t=$.trim(i[a]).split("="),t[0]==e){var o="";try{o=decodeURIComponent(t[1])}catch(s){KD.writeError(s)}return o}return null},write:function(e,t,n){var i="",a="",r=!1,o=n||{},s=o.expires||null,l=$.type(s);"date"===l?a=s:"string"===l&&s>0&&(s=parseInt(s,10),l="number"),"number"===l&&(a=new Date,s>0?a.setDate(a.getDate()+s):(a.setFullYear(1970),r=!0)),a&&(i+=";expires="+(KD.isFunction(a.toUTCString)?a.toUTCString():a)),o.path&&(i+=";path="+o.path),o.domain&&(i+=";domain="+o.domain),o.secure&&(i+=";secure"),document.cookie=e+"="+(r?"":encodeURIComponent(t))+i},clear:function(e,t){var n=";",i=t||{};i.secure&&(n+="secure");var a=new Date;a.setSeconds(a.getSeconds()-60);var r=";expires="+a.toUTCString();document.cookie=e+"=v"+n+r+"; path=/",document.cookie=e+"=v"+n+r+";"},clearAll:function(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)"ASP.NET_SessionId"!=e[t]&&KD.cookie.clear(e[t])}},$.cookie||($.cookie=function(e,t,n){var i=KD.cookie;if(null===t)i.clear(e);else{if(void 0===t)return i.read(e);i.write(e,t,n)}}),KD.stopBubble=function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0},KD.isObjectEmpty=function(e){return KD.IsNullOrWhiteSpace(KD.stringify(e).replace(/[{|}]/g,""))?!0:!1},KD.isSingleReq=function(){return KD.singleReq=KD.singleReq||KD.getQueryString("singlereq","",!0),"true"==(void 0===KD.singleReq?"false":KD.singleReq).toLowerCase()},KD.initClientParameters=function(){var e=KD.CONST.MinClientHeight,t=1024,n=$(window).height(),i=$(window).width();$.extend(KD,{clientAvailHeight:screen?screen.availHeight||e:e,clientAvailWidth:screen?screen.availWidth||t:t,clientVisualHeight:e>n?e:n,clientVisualWidth:t>i?t:i,clientMinHeight:e>n?e:n,clientMinWidth:t>i?t:i}),KD.clientDetaHeight=KD.clientMinHeight>700+KD.getBillHeadHeight()?KD.clientMinHeight-700-KD.getBillHeadHeight()-17:0,KD.setPluginsLogoffPage()},KD.getWindowHeight=function(e){var t=$(window).height();return KD.CONST.IsEnableMinClientHeight&&(window.screen.height<=KD.CONST.EnableSmallScreenCriticalValue||e)&&t<KD.CONST.MinClientHeight&&(t=KD.CONST.MinClientHeight),t},KD.getWindowWidth=function(e){var t=$(window).width();return e&&t<KD.CONST.MinClientWidth&&(t=KD.CONST.MinClientWidth),t},KD.isSingleMode=function(){return KD.isEmpty(KD.CONST.IsSingleMode)&&(KD.equalsIgnoreCase((KD.getConnectConfig().custParam||{}).OpenMode,"single")?KD.CONST.IsSingleMode=!0:KD.CONST.IsSingleMode=!1),KD.CONST.IsSingleMode},KD.isMainConsoleFormIdForSingleMode=function(e){var t=!1;return void 0==KD.CONST.MainConsoleFormIdForSingleMode&&(KD.CONST.MainConsoleFormIdForSingleMode=(KD.getConnectConfig().custParam||{}).FormId||""),KD.equalsIgnoreCase(KD.CONST.MainConsoleFormIdForSingleMode,e)&&(t=!0),t},KD.getMainConsoleBillFootHeight=function(){return 66},KD.getBillHeadHeight=function(e){var t=86;KD.equalsIgnoreCase((KD.getConnectConfig().custParam||{}).OpenMode,"single")&&(t=0);var n=2;if(!KD.mainConcleHeadAndMainTabTitleHeight&&ClientAppProxy&&ClientAppProxy.Current){var i=ClientAppProxy.Current.getMainTab();if(i){var a=i.component.children(".k-tabstrip-items");a&&a.length>0&&(KD.mainConcleHeadAndMainTabTitleHeight=a.height()+a.offset().top+n,KD.clientDetaHeight=KD.clientMinHeight>700+KD.mainConcleHeadAndMainTabTitleHeight?KD.clientMinHeight-700-KD.mainConcleHeadAndMainTabTitleHeight-17:0)}}var r=KD.mainConcleHeadAndMainTabTitleHeight||t;return 0==e&&KD.mainConcleHeadAndMainTabTitleHeight>0&&(r=KD.mainConcleHeadAndMainTabTitleHeight-n),r},KD.setPluginsLogoffPage=function(){try{var e=KD.getEntryRole(),t=KD.entryrolePlugins.getPlugin(e);t&&$.isFunction(t.setLogoffPage)&&t.setLogoffPage.call(t)}catch(n){KD.writeError(n)}},KD.checkhHtml5=function(){"undefined"==typeof Worker&&(alert(ResManager.LoadKDString("不支持HTML5，推荐你下载个chrome或者IE10+的浏览器","099002000000009")),KD.stopDOM())},KD.checkBrowser=function(){var e=!0,t="",n=KD.getCurrentBrowsType();try{if(this.browserConfig){var i=this.browserConfig.BrowserConfigItem.filter(function(e,t){return e.Title.toLowerCase()==n.type.toLowerCase()})[0];if(null==i&&(i=this.browserConfig.BrowserConfigItem.filter(function(e,t){return"default"==e.Title.toLowerCase()})[0]),n.mainVer<parseInt(i.Version)){var a=i.Download.filter(function(e,t){return e.Key.toLowerCase()==n.system.toLowerCase()})[0];null==a&&(a=i.Download.filter(function(e,t){return"default"==e.Key.toLowerCase()})[0]);var r=ResManager.LoadKDString("浏览器版本过低，请下载新版本！","0991732000001268");n.ieCompatible&&(r=ResManager.LoadKDString("当前IE浏览器可能加入了兼容模式，请去掉浏览器的兼容性设置，并设置完成后重启电脑后即可生效！{0}如果您不知如何设置兼容模式，请参考{1}","0991733000004788"),r=ResManager.LoadKDString("链接地址","0991733000004787"),r="当前IE浏览器可能加入了兼容模式,请去掉兼容模式试一试！",r=ResManager.LoadKDString("按当前IE浏览器设置无法在客户端显示当前内容。{0}原因说明：本功能基于跨技术平台的嵌套方式实现，对IE浏览器版本和兼容模式有要求。{0}解决办法：{0}1、微软官网下载并安装IE11；{0}2、请去掉浏览器的兼容性设置，并设置完成后重启电脑后即可；{0}如果您不知如何设置兼容模式，请参考{1}。{0} 注意：使用本功能要求必须使用IE11，对于一些家庭版的操作系统不能安装升级到IE11，则不能在客户端使用本功能，请在HTML5端使用。","0991733000005462")),KD.warning(r),KD.toBrowserrecommend(KD.mergeUrl(KD.getUrlRoot(),a.Value)),e=!1}}}catch(o){e=!1,this.browserConfig?(t=ResManager.LoadKDString("浏览器版本过低，请下载新版本！","0991732000001268"),n.ieCompatible&&(t="当前IE浏览器可能加入了兼容模式,请去掉兼容模式试一试！")):t="兼容浏览器配置未指定!",KD.warning(t+"    "+o.message.toString()),KD.toBrowserrecommend()}return e},KD.checkChinese=function(e){var t=new RegExp("[\\u4E00-\\u9FFF]+","g");return t.test(e)},KD.warning=function(e){try{document.getElementById("mainformWaitting").innerHTML="<div><span>"+e+"</div></span>"}catch(t){alert(e)}},KD.GetDefaultBrandName=function(lcid){var id=lcid||2052,name="";if(KD.Brand&&KD.Brand.DefaultName){var dename=eval("("+KD.Brand.DefaultName+")");dename&&(name=dename[id]||dename[2052]||dename[1033]||KD.Brand.DefaultName)}return name&&(KD.isManagementSite()?document.title=KD.format(ResManager.LoadKDString("{0} 管理中心","0022103000006671"),name):document.title=name),name},KD.GetServerCommonConfig=function(){if(!ClientAppProxy.serverConfig){var e={scope:$(document.body),callback:function(e){try{CheckShellByWinService();var t=KD.parseObject(e);ClientAppProxy.serverConfig=t,KD&&t&&t.brandresource&&(KD.Brand=t.brandresource,KD.Brand)}catch(n){KD.Error.raise({msg:""+e})}},errcallback:function(e){CheckShellByWinService();var t=this;t.err&&KD.Error.raise({msg:""+e})}},t=new ClienterServiceProxy;t.GetServerCommonConfig(e)}},KD.isStartAppVerify=function(){var e=($("#IsStartAppPlugIn").val()||"").toLowerCase(),t=KD.getQueryString("ud"),n=!!t&&"true"==e;return"true"!=e||n||(t=KD.getQueryString("custparam"),n=!!t&&"true"==e),n},KD.StartVerify=function(e,t){if(!ClientAppProxy.serverConfig){if(!KD.isStartAppVerify()&&e&&t){var n={ResultType:1};t.call(e,n)}var i={scope:$(document.body),callback:function(n){try{if(e&&t){var i=KD.parseObject(n);t.call(e,i)}}catch(a){e&&t&&t.call(e,null)}},errcallback:function(n){e&&t&&t.call(e,null)}},a=new StartAppServiceProxy,r=KD.getClientInfo();try{if(KD.isQBoard()&&KD.getQueryString("ud","",!1)){var o=KD.storage.getItem(KD.CONST.k3CloudQBoardSimplePortKey);KD.isEmpty(o)||(r.ClientParameters=KD.stringify({simpleport:o}))}}catch(s){console.log(s)}a.Verify(i,r)}},KD.setStartVerifyResult=function(e){KD.StartVerifyResultValue=e},KD.getStartVerifyResult=function(){return KD.StartVerifyResultValue},KD.buildsession=function(e){try{$("[data-kdid=loginLayout]",document).fadeOut("slow"),$(document.body).append('<div id="__waittingVerify" style="float:left;left:40%;top:30%;position:relative;z-index:9;"><span>'+ResManager.LoadKDString("等待验证","0991733000004075")+"</span></div>")}catch(t){}var n=function(){try{$("[data-kdid=loginLayout]",document).fadeIn("slow"),$("#__waittingVerify").remove()}catch(e){}},i=void 0===e.async?!1:e.async,a=KD.format("BuildSessionWithHtml5 - async={0}",i);KD.writeLog("KD.buildsession",a,!0);var r={scope:$(document.body),async:i,callback:function(t){try{var i=KD.parseObject(t);if(KD.isObject(i)&&1==i.returnValue&&i.KDSVCSessionId&&KDCookieManager.setKDSessionId(i.KDSVCSessionId),KD.isDebug(),e.callback)return void e.callback.call(e.scope,i);if(e.buildsessiononly)return;"True"==t||i&&1==i.returnValue?(e.target="_self",KD.openUrl(e)):KD.Error.raise({msg:ResManager.LoadKDString("自动登录失败","0991733000004076")})}catch(a){KD.Error.raise({msg:""+t})}finally{n()}},errcallback:function(t){var i=this;if(i.err){if(e.errcallback)return void e.errcallback.call(e.scope);if(e.buildsessiononly)return;KD.Error.raise({msg:""+t})}n()}},o=new UserServiceProxy;e.clientInfo=KD.getClientInfo(),KD.isDebug(),o.BuildSessionWithHtml5.call(o,r,e)},KD.supportActiveX=function(){return void 0!==(window.ActiveXObject&&window.ActiveXObject.prototype)},KD.supportWebSocket=function(){return KDLocalServices.hasSocket()},KD.rgbToHex=function(e){if(KD.isObject(e)){var t=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t};return"#"+t(e.a||e.A)+t(e.r||e.R)+t(e.g||e.G)+t(e.b||e.B)}return KD.isString(e)?e:"transparent"},KD.initClientInfo=function(e){return KD.supportActiveX()&&KD.getClientInfo(),void 0!==window.clientInfo?void(KD.isFunction(e)&&e()):(KD.getConnectConfig()||{}).isManagementSite?void(KD.isFunction(e)&&e()):KD.isIeHttps()?void(KD.isFunction(e)&&e()):KD.isWinOS()?void KDLocalServiceClient.checkOrUpdateVersion(function(t,n){if(!n||!n.ReturnPacks)return void(KD.isFunction(e)&&e());if(0==n.IsSuccessful)return KD.isFunction(e)&&e(),KD.initClientInfo.failureTimes=(KD.initClientInfo.failureTimes||0)+1,KD.initClientInfo.failureTimes<10&&KD.delayInvoke(KD.initClientInfo,3e3),void KD.initSimulateClientInfo();KD.initClientInfo.failureTimes=0;var i=n.ReturnPacks||[],a=i.length>0?i[0]:{};if(KD.isEmpty(a)){var r=$.browserUtil&&$.browserUtil.userBrowser?$.browserUtil.userBrowser():"mozila";a={ipAddress:KD.getIpBySimulate(r),IpAddress:KD.getIpBySimulate(r),hostName:"",HostName:"",MacAddress:KD.getMacBySimulate("browser"),macAddress:KD.getMacBySimulate("browser"),IsDefaultInfo:!0,Gsid:"",TRLevel:0}}else a.IsDefaultInfo=!1;$.extend(a,{Version:"HTML5",ClientType:16,vH:KD.getClientInfoAvailableAreaHeight(),vW:document.body.clientWidth,AvailableAreaSize:{Height:KD.getClientInfoAvailableAreaHeight(),Width:document.body.clientWidth},ScreenSize:{Height:window.screen.height,Width:window.screen.width},EntryPageUrl:KD.getEntryPageUrl(),customArgs:KD.getQueryString("ud","",!1)});var o=KD.getCurrentBrowsType()||{};a.BrowserType=(o.system||"")+"|"+(o.type||"")+"|"+(o.ver||""),window.clientInfo=a,KD.writeLog("clientInfo::",KD.stringify(a),!0),KD.isFunction(e)&&e()},this):(KD.initSimulateClientInfo(),void(KD.isFunction(e)&&e()))},KD.getClientInfoAvailableAreaHeight=function(){var e=document.body.clientHeight;return e<KD.CONST.MinClientHeight&&(e=KD.CONST.MinClientHeight),e},KD.getClientInfo=function(){var e=window.clientInfo;return void 0==e&&(e=KD.getDefaultIPMac(),$.extend(e,{Version:"HTML5",ClientType:16,vH:KD.getClientInfoAvailableAreaHeight(),vW:document.body.clientWidth,AvailableAreaSize:{Height:KD.getClientInfoAvailableAreaHeight(),Width:document.body.clientWidth},ScreenSize:{Height:window.screen.height,Width:window.screen.width},EntryPageUrl:KD.getEntryPageUrl(),customArgs:KD.getQueryString("ud","",!1)}),0==e.IsDefaultInfo&&(window.clientInfo=e)),e.vH=document.body.clientHeight,e.vW=document.body.clientWidth,e.Gsid="",e.TRLevel=0,e},KD.getDefaultIPMac=function(){var e={};KD.supportActiveX()?(e.ipAddress="IE-trustless",e.macAddress="browser",e=KD.getIPMac()):(e.ipAddress=KD.getIpBySimulate($.browserUtil&&$.browserUtil.userBrowser?$.browserUtil.userBrowser():"mozila"),e.macAddress=KD.getMacBySimulate("browser")),e.hostName||(e.hostName=e.ipAddress),e.IsDefaultInfo="browser"===KD.getMacBySimulate("browser")?void 0===e.IsDefaultInfo?!0:e.IsDefaultInfo:!1,e.IpAddress=e.ipAddress,e.MacAddress=e.macAddress,e.HostName=e.hostName,e.OperationSystem=e.OperationSystem||"";var t=KD.getCurrentBrowsType()||{};return e.BrowserType=(t.system||"")+"|"+(t.type||"")+"|"+(t.ver||""),e},KD.getIPMac=function(){var e={};if("False"==window.AllowWBEMActiveX)return e.ipAddress="WBEM Off",e.macAddress="browser",e.hostName="",e.OperationSystem="",e;try{var t=new ActiveXObject("WbemScripting.SWbemLocator"),n=t.ConnectServer("."),i=n.ExecQuery("SELECT MACAddress FROM Win32_NetworkAdapter WHERE NetConnectionStatus=2 AND PNPDeviceID LIKE 'PCI%'"),a=new Enumerator(i).item();a&&(e.macAddress=a.MACAddress(0)),void 0==e.macAddress&&(i=n.ExecQuery("SELECT MACAddress FROM Win32_NetworkAdapter WHERE NetConnectionStatus=2"),a=new Enumerator(i).item(),a&&(e.macAddress=a.MACAddress(0)));for(var r="SELECT DNSHostName,MACAddress,IPAddress FROM Win32_NetworkAdapterConfiguration WHERE IPEnabled=True AND MACAddress='"+e.macAddress+"'",o=n.ExecQuery(r),s=new Enumerator(o);!s.atEnd();){var l=s.item();if(l){e.hostName=e.hostName||l.DNSHostName(0),e.macAddress=e.macAddress||l.MACAddress(0),e.ipAddress=e.ipAddress||l.IPAddress(0);break}s.moveNext()}var c="SELECT Name,Version FROM Win32_OperatingSystem",d=n.ExecQuery(c),u=new Enumerator(d).item();u&&(e.OperationSystem=u.Name(0)+" "+u.Version(0)),e.IsDefaultInfo=!1}catch(g){KD.supportActiveX()?(e.ipAddress="IE-trustless",e.macAddress="browser"):(e.ipAddress=KD.getIpBySimulate($.browserUtil&&$.browserUtil.userBrowser?$.browserUtil.userBrowser():"mozila"),e.macAddress=KD.getMacBySimulate("browser")),e.hostName="",e.OperationSystem=""}return e.IpAddress=e.ipAddress,e.MacAddress=e.macAddress,e.HostName=e.hostName,e.OperationSystem=e.OperationSystem,e},KD.initSimulateClientInfo=function(){var e=function(e){return(e+"0000").substr(0,4)},t=function(t){if(!t)return"";var n=t.split("."),i=["MAC","SIMU","BY","IP",n[0]+"A",n[1]+"A",n[2]+"A",n[3]+"A"];return e(i[0])+e(i[1])+"-"+e(i[2])+"-"+e(i[3])+"-"+e(i[4])+"-"+e(i[5])+e(i[6])+e(i[7])},n=function(e){try{var t=[],n=window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,i=new n({iceServers:[]});i.createDataChannel(""),i.onicecandidate=function(n){try{if(!n.candidate)return i.close(),void e(t);var a=/^candidate:.+ (\S+) \d+ typ/.exec(n.candidate.candidate)[1];-1==t.indexOf(a)&&t.push(a)}catch(r){KD.writeLog(r.message,r.description,!0)}},i.createOffer().then(function(e){i&&i.setLocalDescription&&i.setLocalDescription(e)},function(){})}catch(a){KD.writeLog(a.message,a.description,!0)}};KD.isEmpty(KD.getMacBySimulate())&&n(function(e){try{var n=(e||[]).join("").replace(/\.local/g,""),i=n.length>30?n:t(n);KD.storage.setItem(KD.CONST.SimulateMacAddress,i||""),KD.storage.setItem(KD.CONST.SimulateIpAddress,n||"")}catch(a){KD.writeLog(a.message,a.description,!0)}})},KD.getMacBySimulate=function(e){return KD.storage.getItem(KD.CONST.SimulateMacAddress)||e},KD.getIpBySimulate=function(e){return KD.storage.getItem(KD.CONST.SimulateIpAddress)||e},KD.openDebugger=function(){if(KD.isDebug()){KD.ShowHttpWatchWindow();var e=setTimeout(function(){clearTimeout(e),KD.printAllControls()},1e4)}},KD.redirection=function(e){KD.isDebug()?KD.openPage(e,"_self"):KD.openPage(e,"_self")},KD.openUrl=function(e){var t=KD.getUrlRoot()+"/"+KD.getSubPath()+"/dform.aspx?formId="+(e.FormId||e.formId||"")+(KD.isDebug()?"&isDebug=true":"")+"&pageId="+(e.PageId||e.pageId||"")+"&formType="+(e.FormType||e.formType||"")+"&pkId="+(e.PkId||e.pkId||"")+"&EntryRole="+(e.EntryRole||e.entryRole||"")+"&usertoken="+(e.UserToken||e.userToken||KD.getUserToken());KD.openPage(t,e.Target||e.target||"_blank",e.Features||e.features||"")},KD.openPage=function(e,t,n){var i,a=$("#opennewpagelink");if(a.length>0&&a.remove(),a=$("<a>").appendTo($(document.body)),!a[0].click||"_blank"!=t&&"_self"!=t&&n)i=window.open(e,t,n);else{a[getPropName()]("id","opennewpagelink"),a[getPropName()]("target",t),a[getPropName()]("href",e);var r=a[0];r.onclick=function(){if(!/msie/i.test(navigator.userAgent)){var e=document.createEvent("MouseEvent");e.initEvent("click",!1,!1)}},r.click()}return a.remove(),i},KD.getReponseHttpCodeTipMessage=function(e){e+="";var t=ResManager.LoadKDString("刚刚执行的操作不能完成，请稍后重试或者联系系统管理员！","0991733000003597");switch(e){case"RequestTimeout":case"408":case"Conflict":case"409":case"BadGateway":case"502":case"GatewayTimeout":case"504":case"ServiceUnavailable":case"503":t="",t+=ResManager.LoadKDString("刚刚执行的操作不能完成，可能当前网络状况不佳，请尝试下面办法：","0991733000004105"),t+="\r\n"+ResManager.LoadKDString("1）联系系统管理员在应用服务器下访问站点","0991733000005329")+"http://localhost/k3cloud；",t+="\r\n"+ResManager.LoadKDString("2）若无法访问，则应用服务器站点不可用，需系统管理员修复；","0991733000004101"),t+="\r\n"+ResManager.LoadKDString("3）若可以正常访问，则极可能是网络问题，建议排查网络情况","0991733000004103")}return t},function(e){$.extend(e,{IsLoginResultSuccessfull:function(t){switch(t){case e.LoginResultType.Success:case e.LoginResultType.DealWithForm:case e.LoginResultType.PWInvalid_Optional:case e.LoginResultType.Wanning:case e.LoginResultType.Activation:case e.LoginResultType.PWInvalid_Required:return!0;default:return!1}},LoginResultType:{Activation:-7,DealWithForm:-5,Wanning:-4,PWInvalid_Required:-3,PWInvalid_Optional:-2,Failure:-1,PWError:0,Success:1,EntryCloudUnBind:-6},AuthenticationType:{DomainAuthentication:0,PwdAuthentication:1,DynamicPwdAuthentication:2,CAAuthentication:3,XuntongAuthentication:4,WeixinPublicAuthentication:5,WeixinEntAuthentication:6,CloudEntryAuthentication:7,IDECloudEntryAuthentication:8,SimplePassportAuthentication:9,YunZhiJiaAuthentication:10,YunZhiJiaDynamicPwdAuthentication:11,YunZhiJiaQRCodeAuthentication:12,FaceAuthentication:13,YunZhiJiaPubAuthentication:14,UserTokenAuthentication:15,SAMLAuthentication:16}}),e.setLoginLang=function(){var t=parseInt(ResManager.Language);$("#indexDLChrome")[0].innerText=ResManager.LoadKDString("建议浏览器：","0991733030033749"),$("#linkServiceContact")[0].innerText=ResManager.LoadKDString("用户协议","014003030033142"),$("#linkPrivacyPolicy")[0].innerText=ResManager.LoadKDString("隐私政策","014003030033109");var n=this.getUrlSubRoot();if(n?$("#indexDLChrome").attr("href",n+"/help/browserrecommend.htm"):$("#indexDLChrome").attr("href","/help/browserrecommend.htm"),$("#loginback").css("background-image",e.getLoginBackBrush(ResManager.Language)),!e.isManagementSite()){var i=$('div[data-type="qrcode"] span').length>0;if(i){var a=$('#loginContainer .boxtitle[data-type="qrcode"]');"qrcode"==a.attr("datarole")?a.find("span")[0].innerText=ResManager.LoadKDString("密码登录","0991733000005696"):a.find("span")[0].innerText=ResManager.LoadKDString("扫码登录","0991733000006693"),$('#loginContainer div[data-type="account"] span')[0].innerText=ResManager.LoadKDString("金蝶云星空账号","0991733000005698"),$('#loginContainer div[data-type="cloudaccount"] span')[0].innerText=ResManager.LoadKDString("金蝶·云账号","0991733000005697"),$("#qrcode-loseeffect").html(e.format(ResManager.LoadKDString("二维码已失效{0}请点击刷新","0991733000008106"),"<br />")),$("#qrcode-populuarize").html(e.format(ResManager.LoadKDString("使用 {0} 扫描二维码","0991733000008107"),'<a href="http://www.yunzhijia.com/home/?m=open&amp;a=download">'+ResManager.LoadKDString("云之家APP","0991733000006714")+"</a>")),1033==t?$("#qrcode-loseeffect").addClass("qrcode-reload-en"):$("#qrcode-loseeffect").removeClass("qrcode-reload-en")}}$("#btnLogin")[0].innerText=ResManager.LoadKDString("登录","00214298000004485"),$("#user").attr("placeholder",ResManager.LoadKDString("用户名","099002000002724")),$("#password").attr("placeholder",ResManager.LoadKDString("密码","099002000002725")),$("#velidationCode").attr("placeholder",ResManager.LoadKDString("验证码","099002000002726")),$("#link_ChangeCode")[0].innerText=ResManager.LoadKDString("换一张","0991733000004020"),$("#link_ChangeCode").attr("title",ResManager.LoadKDString("换一张","0991733000004020")),$("#forgetpass .kd-text").text(ResManager.LoadKDString("忘记密码","002014000004304")),$("#forgetpass .kd-getpassword-tips .kd-login-tips-text").text(ResManager.LoadKDString("首次登录请点击“忘记密码”来设置密码","002014030033727")),$("#SMSVerificationContainer #kd-input-sms-verification").attr("placeholder",ResManager.LoadKDString("请输入短信验证码","00214298000005662")),$("#SMSVerificationContainer #kd-login-btn-sms").text(ResManager.LoadKDString("发送验证码","00214298000005663")),$("#capslockstate .kd-text").text(ResManager.LoadKDString("大写锁定已打开","0991733000014723")),$("#indexSuggest")[0].innerText=ResManager.LoadKDString("建议分辨率：1280x1024以上像素","0991733030033750"),$("#indexClearCache")[0].innerText=ResManager.LoadKDString("清除本地缓存","099002000002731"),$("#indexShowHttpwatcher")[0].innerText=ResManager.LoadKDString("查看http数据","099002000002730"),$("#pCopyRight")[0].innerText=e.format(ResManager.LoadKDString("{0}1993-{1} 金蝶国际软件集团有限公司版权所有","0991733000004763"),"©","2020"),$("#indexSRMSupplier")[0].innerText=ResManager.LoadKDString("供应商注册","0991733000007301");var r=$(".ADItem");$.each(r,function(e,n){var i=$(n).attr("src").split("/"),a=i[i.length-1],r=a.indexOf("_")>0?a.split("_")[0]:a.replace(".png",""),o="";switch(t){case 1033:o=$(n).attr("src").replace(a,r+"_1033.png"),$(n).attr("src",o),$("body").addClass("kd-body-enEnvironment");break;case 3076:o=$(n).attr("src").replace(a,r+"_3076.png"),$(n).attr("src",o),$("body").removeClass("kd-body-enEnvironment");break;case 2052:o=$(n).attr("src").replace(a,r+".png"),$(n).attr("src",o),$("body").removeClass("kd-body-enEnvironment")}});var o=$(".loginKDLogo"),s=e.getUrlSubRoot()+"/images/biz/International/kingdee_icon",l=e.getUrlSubRoot()+"/images/biz/International/kdcloud_login_bg",c=".png";switch(e.Brand&&e.Brand.Resource6&&(o.hasClass("kd-company-unified-style-icon")||(s=e.getUrlSubRoot()+"/"+e.Brand.Resource6.split(".")[0]),c="."+e.Brand.Resource6.split(".")[1]),t){case 2052:case 3076:imgPath=s+c,l+=c;break;case 1033:imgPath=s+"_1033"+c,l=l+"_1033"+c,o.width(260);break;default:imgPath=s+"_1033"+c,l=l+"_1033"+c,o.width(260)}e.GetDefaultBrandName(t);var d=e.getVersion();if(imgPath+="?v="+d,l+="?v="+d,o.hasClass("kd-company-unified-style-icon")){var u=ResManager.LoadKDString("金蝶云","00214298000004482"),g=e.checkChinese(u);g?$("#loopbanners .kd-desc-container").removeClass("kd-desc-container-en"):$("#loopbanners .kd-desc-container").addClass("kd-desc-container-en"),$("#loopbanners #divBarTitle").text(u),$("#loopbanners #divImgBg").css({"min-height":"40px"}).text(ResManager.LoadKDString("为企业成长而生","00214298000004483"));var p=$(window).width();p>=1366?$("#loopbanners .kd-desc-container").removeClass("kd-desc-container-small-W"):$("#loopbanners .kd-desc-container").addClass("kd-desc-container-small-W"),o.css({"background-image":"url("+imgPath+")"})}else o.css({"background-image":"url("+imgPath+")"});$("#loopbanners").css({"background-image":"url("+l+")"});var f=$("#watchersh");if(f&&f.length>0){var h=f.data("kendoWindow");h.title&&h.title(ResManager.LoadKDString("http数据监控","0025710000004015"))}var m=window._kdlogin?window._kdlogin.refreshDataCenter:void 0;e.isFunction(m)&&m.call(window._kdlogin)},e.getLoginBackBrush=function(t){var n=e.loginBackBrushs[t];n||(n=e.loginBackBrushs[2052]);var i=e.getUrlRoot()+n;return"url("+i+")"},e.loginBackBrushs={2052:"/"+e.getSubPath()+"/Content/themes/images/icon_login_simpleChinese.png",3076:"/"+e.getSubPath()+"/Content/themes/images/icon_login_traditionChinese.png",1033:"/"+e.getSubPath()+"/Content/themes/images/icon_login_english.png"},e.acceptCookieVerify=function(t){var n=parseInt(ResManager.Language),i=$(kendo.format('<div class="kd-cookieverify-form"><div class="kd-cookieverify-mask"></div><div class="kd-content-contain"><div class="kd-cookieform-content {3}">{0}<span class="kd-cookie-rule">{1}</span></div><div class="kd-cookieform-bottom"><span class="kd-acceptcookie-button">{2}</span></div></div></div>',ResManager.LoadKDString("欢迎使用金蝶云星空，为确保系统正常登录，我们将会在您的计算机或移动设备上存储Cookies等信息。此类信息仅用于实现会话保持，是登录系统所必需的，如不接受，将无法正常登录系统。请您确认接受后，继续访问金蝶云星空。如需了解更多有关我们使用的各种Cookies的信息，请查阅","00215181000007438"),ResManager.LoadKDString("《Cookies政策》","00215181000007439"),ResManager.LoadKDString("接受并继续","00215181000008654"),1033==n?"kd-cookieform-content-english":""));i.find(".kd-acceptcookie-button").click(function(){localStorage.setItem("acceptCookie",JSON.stringify(!0)),i.remove(),t&&$("#btnLogin").click()}),i.find(".kd-cookie-rule").click(function(){var t="http://open.kingdee.com/K3Cloud/Open/cookiespolicy_cn.html",n="http://open.kingdee.com/K3Cloud/Open/cookiespolicy_en.html",i=parseInt(ResManager.Language);2052==i||3076==i?e.openPage(ClientAppProxy.serverConfig.CookiePolicyUrlCn||t,"_blank"):e.openPage(ClientAppProxy.serverConfig.CookiePolicyUrlEn||n,"_blank")}),$("body").append(i)},e.isShowAcceptCookieForm=function(){return ClientAppProxy.isLoginVaildCookieTip()&&!JSON.parse(localStorage.getItem("acceptCookie"))}}(KD),KD.checkVideo==function(){if(document.createElement("video").canPlayType){var e=document.createElement("video");oggTest=e.canPlayType('video/ogg; codecs="theora, vorbis"'),oggTest?"probably"==oggTest?alert(ResManager.LoadKDString("支持HTML5！","099002000000011")):(alert(ResManager.LoadKDString("支持一部分html5，换个浏览器吧，比如Chrome，IE10+。","099002000000012")),KD.stopDOM()):(h264Test=e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"'),h264Test?"probably"==h264Test?alert(ResManager.LoadKDString("支持HTML5！","099002000000011")):(alert(ResManager.LoadKDString("支持一部分html5，换个浏览器吧，比如Chrome，IE10+。","099002000000012")),KD.stopDOM()):(alert(ResManager.LoadKDString("不支持HTML5，推荐你下载个chrome或者IE10+版本之上的浏览器","099002000000010")),KD.stopDOM()))}else alert(ResManager.LoadKDString("不支持HTML5，推荐你下载个chrome或者IE10+版本之上的浏览器","099002000000010")),KD.stopDOM()},KD.scrollTo=function(e,t,n){var i=$(e);if(0!=i.length){var a=$("html, body"),r=i.offset().top+(t?t.height||0:0);n&&(a=$(n),r=0==r?0:r+a.scrollTop()-a.offset().top),a.animate({scrollTop:r},500)}},KD.stopDOM=function(){window.stop?window.stop():document.execCommand("Stop")},KD.ShowHttpWatchWindow=function(e){var t=KD.getConnectConfig();if(0!=t.allowDebugMode||e){var n=ClientAppProxy.Current,i=KD.getQueryString("formId",""),a=KD.getQueryString("pageId",""),r=i+"_"+a;n.showWatcher.call(n,r)}},KD.ClearLocalCahce=function(e){var t=KD.storage.getLength(),n={};for(var i in KD.NotClearCacheKeys){var a=KD.NotClearCacheKeys[i],r=KD.storage.getItem(a);KD.isEmpty(r)||(n[a]=r)}KD.storage.clear();for(var i in KD.NotClearCacheKeys){var a=KD.NotClearCacheKeys[i],r=n[a];KD.isEmpty(r)||"null"===r||"undefined"===r||(t--,KD.storage.setItem(a,r))}e||KDMessageBox.show({sourceClass:"",sourceMethod:"",msg:t.toString()+ResManager.LoadKDString(" 项缓存被清除!","099002000002762")})},KD.DownLoadChrome=function(){window.open("http://rj.baidu.com/soft/detail/14744.html?ald")},KD.cleanup=function(){"object"==typeof xmlHttp&&$.isFunction(xmlHttp.abort)&&xmlHttp.abort()},KD.releaseHandler=function(e){var t=function(){try{if(window.hasReleased)return;window.hasReleased=!0,KD.circleInterval&&clearTimeout(KD.circleInterval);var e="dform.aspx?methodname=Release&usertoken="+KD.getUserToken()+"&pageId="+KD.getQueryString("pageId");$.ajax({type:"GET",async:!1,url:e,data:"",success:function(e){}})}catch(t){KD.writeError(t)}finally{return!1}};window.onkeydown=function(e){116==e.keyCode&&(e.returnValue=!1,e.cancel=!0,t(e),KD.delayInvoke(function(){window.location.reload()},1e3,!0))},window.onfocus=function(e){},window.onblur=function(e){},window.onbeforeunload=function(e){t(e)},window.onunload=function(e){t(e)},window.onpopstate=function(e){t(e)}},KD.Guid={guid:function(e){function t(e,t){if(t=t.replace(/\{|\(|\)|\}|-/g,""),t=t.toLowerCase(),32!=t.length||-1!=t.search(/[^0-9,a-f]/i))n(e);else for(var i=0;i<t.length;i++)e.push(t[i])}function n(e){for(var t=32;t--;)e.push("0")}function i(e,t){switch(t){case"N":return e.toString().replace(/,/g,"");case"D":var n=e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20,32);return n=n.replace(/,/g,"");case"B":var n=i(e,"D");return n="{"+n+"}";case"P":var n=i(e,"D");return n="("+n+")";default:return new guid}}var a=new Array;"string"==typeof e?t(a,e):n(a),this.Equals=function(e){return e&&e.IsGuid?this.ToString()==e.ToString():!1},this.IsGuid=function(){},this.ToString=function(e){return"string"==typeof e&&("N"==e||"D"==e||"B"==e||"P"==e)?i(a,e):i(a,"D")}},NewGuid:function(){for(var e="",t=32;t--;)e+=Math.floor(16*Math.random()).toString(16);return new this.guid(e)},Empty:function(){return new this.guid}},KD.KDWindowBase=function(){},KD.KDWindowBase.prototype={Title:"",MinWidth:200,MinHeight:100,Width:"auto",Height:"auto",Content:"<div></div>",ShowDialog:function(){var e=$(this.Content);return e.appendTo($(document.body)),e.kendoWindow&&e.kendoWindow({title:this.Title,showCollapseButton:!1,resizable:!0,pinned:!0,minHeight:this.MinHeight,minWidth:this.MinWidth,height:this.Height,width:this.Width,resizable:!1,modal:!0,close:function(t){var n=e.parent();return n.remove(),!0}}),e.data("kendoWindow").center(),e.data("kendoWindow")}},KD.OpenDeskApp=function(e){try{if(KD.isIeBrowser()){var t=document.getElementById("deskappActiveX"),n=t.GetDeskAppShellStatus();"1"==n?t.OpenDeskApp(e):t.OpenDeskApp(e)}else{var t=document.getElementById("deskappNPAPI");t.OpenDeskApp(e)}}catch(i){KD.OpenDeskAppByPage(e)}},KD.OpenDeskAppByPage=function(e){var t="iframe",n=KD.isIeBrowser();n&&(t="open");var i=document.getElementById("deskClientElement");if("iframe"==t&&null!=i)i.setAttribute("src",e);else{var a=!1;try{var r=window.open(e,"_blank");null==r?a=!0:n&&r.close()}catch(o){a=!0}if(a){var s=!1;try{var l=KD.CallWinService("OpenClient",e);s=0==l.code}catch(o){s=!1}}}},KD.CallWinService=function(){var e={code:0,description:""};if(0==arguments.length)e.code=-1,e.description="request forbidden:lack of service";else{try{var t=encodeURIComponent(KD.getUrlRoot()),n=encodeURIComponent(KD.getUserToken()),i="auth_server="+t+"&auth_token="+n,a="",r=!1;switch(arguments[0]){case"OpenClient":arguments.length<2?(e.code=-1,e.description="request forbidden:lack of arguments"):(r=!0,
a="Client/"+arguments[0],i+="&manifest="+encodeURIComponent(arguments[1]));break;case"OpenRes":arguments.length<4?(e.code=-1,e.description="request forbidden:lack of arguments"):(r=!0,a="Local/"+arguments[0],i+="&filePath="+encodeURIComponent(arguments[1]),i+="&fileId="+encodeURIComponent(arguments[2]),i+="&targetFileName="+encodeURIComponent(arguments[3]),i+="&targetFolderName="+(arguments.length>4?encodeURIComponent(arguments[4]):""),i+="&targetApp="+(arguments.length>5?encodeURIComponent(arguments[5]):""),i+="&pageId="+(arguments.length>6?encodeURIComponent(arguments[6]):""));break;default:e.code=-1,e.description="request forbidden:service not found"}}catch(o){r=!1,e.code=-1,e.description="CallWinService exception:"+o.message}r&&KD.CheckProcessExists("Kingdee.BOS.DeskClient.WinService",function(){$.ajax({async:!1,url:"https://localhost:8022/"+a+"_jsonp.kcapi?"+i,type:"GET",dataType:"jsonp",cache:!1,jsonp:"clientproxycallback",timeout:500,success:function(e){1==e.code?KD.ShowTipsOfWinService():0!=e.code&&alert(e.description)},error:function(e){KD.ShowTipsOfWinService()}})},function(){KD.ShowTipsOfWinService()})}return e},KD.ShowTipsOfWinService=function(){KD.openCloudAppTipsWin("",ResManager.LoadKDString("金蝶云星空","00214298000004656"),"",ResManager.LoadKDString("系统检测到您本机运行金蝶云星空所需服务（K3CloudClienter）异常，需要正常运行任一客户端（GUI客户端、BOS设计器、万能报表设计器、BOS套打设计器），请通过以下步骤修复。","00214298000004655"),!0)},KD.isIeBrowser=function(){var e="Uon-IE",t=navigator.userAgent.toLowerCase();return(t.indexOf("msie")>-1||t.indexOf("trident")>-1&&t.indexOf("rv")>-1)&&(e="IE"),"IE"==e},KD.isEdgeBrowser=function(){var e=navigator.userAgent.toLowerCase(),t=/Edge\/(\S+)/.test(e);return t},KD.isWinOS=function(){var e=(navigator?navigator.platform:"").toLowerCase();return"win"==(e||"win").substr(0,3)},KD.isMacOS=function(){var e=(navigator?navigator.platform:"").toLowerCase();return"mac"==(e||"").substr(0,3)},KD.isMobileOS=function(){return KD.isEmpty(KD.CONST.IsMobileTerminalPlatform)&&(KD.CONST.IsMobileTerminalPlatform=!0,(KD.isWinOS()||KD.isMacOS())&&(KD.isMacOS()&&(navigator.maxTouchPoints>1||"ontouchstart"in document)?KD.CONST.IsMobileTerminalPlatform=!0:KD.CONST.IsMobileTerminalPlatform=!1)),KD.CONST.IsMobileTerminalPlatform},KD.isIeHttps=function(){var e=((document.location||{}).protocol||"").toLowerCase(),t="https:"==e?!0:!1;return t&&KD.isIeBrowser()},KD.isEdgeHttps=function(){var e=((document.location||{}).protocol||"").toLowerCase(),t="https:"==e?!0:!1;return t&&KD.isEdgeBrowser()},KD.isCombinationOrFunctionKey=function(e){var t=!1,n=e.key||e.keyCode||e.which,i=e.ctrlKey||e.metaKey,a=e.shiftKey,r=e.altKey;if(KD.isEmpty(n)||16==e.keyCode||17==e.keyCode||18==e.keyCode)return t;var o="F1|F2|F3|F4|F5|F6|F7|F8|F9|F10|F11|F12|",s=!1;KD.isString(n)&&n.indexOf("F")>-1&&(s=o.indexOf(n+"|")>-1?!0:!1);var l=new RegExp(/^[A-Za-z0-9]{1,}$/);return(s||(i||a||r)&&l.test(n))&&(t=!0),t};var isInstallShell="-1",installShellVerison="";KD.GetDeskShellStatus=function(){KD.InitDeskAppPlugIn(),CheckShellByWinService();var e="-1";if("-1"==isInstallShell){try{if(KD.isIeBrowser()){var t=document.getElementById("deskappActiveX");e=t.GetDeskAppShellStatus().toString()}else{var t=document.getElementById("deskappNPAPI");e=t.GetDeskAppShellStatus().toString()}}catch(n){e="-1"}"49"==e&&(e="1"),"48"==e&&(e="0")}else e=isInstallShell;return e},KD.GetDeskShellVesion=function(){"1"==isInstallShell&&$.ajax({async:!1,url:"https://localhost:8022/Version.kcapi",type:"GET",cache:!1,timeout:500,success:function(e){installShellVerison="",e&&e.Version&&(installShellVerison=e.Version)},error:function(e){}})},KD.CheckProcessExists=function(e,t,n){var i=function(){var e=function(e,t,n,i,a){$.ajax({async:!1,url:"https://localhost:"+e+"/RunningProcessCallback.kcapi?"+escape(t),type:"GET",dataType:"jsonp",jsonp:"clientproxycallback",cache:!1,timeout:a||500,success:function(t){isInstallShell="1",8022==e&&KD.GetDeskShellVesion(),t&&0==t.code||!i?n&&n(t):i()},error:function(e){i&&i()}})},t=function(t,n,i){e(8022,t,n,i)};return{call:function(e,n,i){t(e,n,i)}}};i().call(e,t,n)},KD.InitDeskAppPlugIn=function(){$(document.body).append('<div id="deskShellPlugInContainer" style="background:red; border:0 solid red;width:0px; height:0px; overflow: hidden;"><iframe id="deskClientElement" name="deskClientElement_Name" frameborder="0" style="position:fixed; visibility:hidden; z-index:100;"></iframe></div>');var e=document.getElementById("deskShellPlugInContainer");if(null!=e)if(KD.isIeBrowser()){if(null==document.getElementById("deskappActiveX")){var t=document.createElement("div");t.innerHTML='<object  id="deskappActiveX"  classid="CLSID:0CB07BD3-F372-47B2-8813-78F52D1AEC74" style="z-index:-999;width:1px;height:1px;visibility:hidden" />',e.appendChild(t)}}else if(null==document.getElementById("deskappNPAPI")){var t=document.createElement("div");t.innerHTML='<object id="deskappNPAPI"  type="application/npcloud" style="z-index:-999;width:1px;height:1px;visibility:hidden"  />',e.appendChild(t)}},KD.format=function(e){function t(e){if(!KD.isString(e))return!1;for(var t=["$&","$'","$`","$$"],n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var n=arguments,i=e||"";if(""!=i){for(var a=1;a<n.length;a++){var r="\\{"+(a-1)+"\\}",o=("{"+(a-1)+"}").length,s=new RegExp(r,"g"),l=void 0===n[a]?"":n[a];if(KD.isString(l)&&/[\{\}]/.test(l)&&(l=l.replace(/\{/g,"#lf_b#").replace(/\}/g,"#rg_b#")),t(l)){s=new RegExp(r);for(var c=s.exec(i);null!=c;)i=i.substr(0,c.index)+l+i.substr(c.index+o),s.lastIndex=c.index+l.length,c=s.exec(i)}else i=i.replace(s,l)}i=(i||"").replace(/#lf_b#/g,"{").replace(/#rg_b#/g,"}")}return i},function(e){function t(){var e=window.KDHtmlCoder;return e||(e=document.createElement("span"),window.KDHtmlCoder=e),e}e.htmlUtil={encode:function(e){var n=t();n.appendChild(document.createTextNode(e));var i=n.innerHTML;return n.innerHTML="",i},decode:function(e){var n=t();n.innerHTML=e;var i=n.innerText||n.extContent;return n.innerHTML="",i}}}(KD),KD.getCompressor=function(){return(window.ziblib_plugin||{}).gzip},KD.compress=function(e){var t=!0,n=KD.getCompressor();return t=n?KD.arrayToBase64(n(e)):e},KD.compressCore=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return KD.base64Encode(KD.utf8Encode(t))},KD.urlEncode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return encodeURI(t)},KD.urlDecode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return decodeURI(t)},KD.urlEncodeComponent=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return encodeURIComponent(t)},KD.urlDecodeComponent=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;try{return decodeURIComponent(t)}catch(n){return t}},KD.utf8Encode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return JXG.Util.UTF8.encode(t)},KD.utf8Dncode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return JXG.Util.UTF8.decode(t)},KD.base64Encode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return JXG.Util.Base64.encode(t)},KD.base64Decode=function(e){var t=$.isPlainObject(e)?KD.stringify(e):e;return JXG.Util.Base64.decode(t)},KD.isBase64Str=function(e){var t=!1,n=/^([0-9a-zA-Z+\/]{4})*(([0-9a-zA-Z+\/]{2}==)|([0-9a-zA-Z+\/]{3}=))?$/;if(KD.isString(e)){var i=e.length>5e5?e.substr(0,5e5):e;t=n.test(i)}return t},KD.isSameUTimeZone=function(e){var t=!0,n=-1*(new Date).getTimezoneOffset();return e&&e.Context&&e.Context.UTimeZone&&(t=e.Context.UTimeZone.OffsetTicks/1e7/60==n),t},KD.isUseSmallScreenModel=function(e,t){var n=!1;e=e||{};var i=KD.CONST.EnableSmallScreenCriticalValue,a=window.screen.height;return n=i>=a,t&&e&&(n="ListService"==e.serviceName),n},KD.getTimeZoneName=function(){var e=new Date(Date.UTC(2017,6,30,0,0,0,0)),t=-1*e.getTimezoneOffset(),n=new Date(Date.UTC(2017,12,30,0,0,0,0)),i=-1*n.getTimezoneOffset();return-660==t&&-660==i?"Pacific/Midway":-600==t&&-600==i?"Pacific/Tahiti":-570==t&&-570==i?"Pacific/Marquesas":-540==t&&-600==i?"America/Adak":-540==t&&-540==i?"Pacific/Gambier":-480==t&&-540==i?"US/Alaska":-480==t&&-480==i?"Pacific/Pitcairn":-420==t&&-480==i?"US/Pacific":-420==t&&-420==i?"US/Arizona":-360==t&&-420==i?"US/Mountain":-360==t&&-360==i?"America/Guatemala":-360==t&&-300==i?"Pacific/Easter":-300==t&&-360==i?"US/Central":-300==t&&-300==i?"America/Bogota":-240==t&&-300==i?"US/Eastern":-240==t&&-240==i?"America/Caracas":-240==t&&-180==i?"America/Santiago":-180==t&&-240==i?"Canada/Atlantic":-180==t&&-180==i?"America/Montevideo":-180==t&&-120==i?"America/Sao_Paulo":-150==t&&-210==i?"America/St_Johns":-120==t&&-180==i?"America/Godthab":-120==t&&-120==i?"America/Noronha":-60==t&&-60==i?"Atlantic/Cape_Verde":0==t&&-60==i?"Atlantic/Azores":0==t&&0==i?"Africa/Casablanca":60==t&&0==i?"Europe/London":60==t&&60==i?"Africa/Algiers":60==t&&120==i?"Africa/Windhoek":120==t&&60==i?"Europe/Amsterdam":120==t&&120==i?"Africa/Harare":180==t&&120==i?"Europe/Athens":180==t&&180==i?"Africa/Nairobi":240==t&&180==i?"Europe/Moscow":240==t&&240==i?"Asia/Dubai":270==t&&210==i?"Asia/Tehran":270==t&&270==i?"Asia/Kabul":300==t&&240==i?"Asia/Baku":300==t&&300==i?"Asia/Karachi":330==t&&330==i?"Asia/Calcutta":345==t&&345==i?"Asia/Katmandu":360==t&&300==i?"Asia/Yekaterinburg":360==t&&360==i?"Asia/Colombo":390==t&&390==i?"Asia/Rangoon":420==t&&360==i?"Asia/Almaty":420==t&&420==i?"Asia/Bangkok":480==t&&420==i?"Asia/Krasnoyarsk":480==t&&480==i?"Beijin":540==t&&480==i?"Asia/Irkutsk":540==t&&540==i?"Asia/Tokyo":570==t&&570==i?"Australia/Darwin":570==t&&630==i?"Australia/Adelaide":600==t&&540==i?"Asia/Yakutsk":600==t&&600==i?"Australia/Brisbane":600==t&&660==i?"Australia/Sydney":630==t&&660==i?"Australia/Lord_Howe":660==t&&600==i?"Asia/Vladivostok":660==t&&660==i?"Pacific/Guadalcanal":690==t&&690==i?"Pacific/Norfolk":720==t&&660==i?"Asia/Magadan":720==t&&720==i?"Pacific/Fiji":720==t&&780==i?"Pacific/Auckland":765==t&&825==i?"Pacific/Chatham":780==t&&780==i?"Pacific/Enderbury":840==t&&840==i?"Pacific/Kiritimati":"US/Pacific"},KD.decompress=function(e){var t=e;try{t=new JXG.Util.Unzip(JXG.Util.Base64.decodeAsArray(e)).unzip()[0][0]}catch(n){}return t},KD.decompress_decode=function(e){var t=e;try{t=JXG.decompress(e)}catch(n){}return t},KD.equalsIgnoreCase=function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;var n=!1;try{n=e.toUpperCase()===t.toUpperCase()}catch(i){KD.writeLog(i.Message,"",!0)}return n},KD.getUTF8StrLeng=function(e){for(var t=0,n=(e||"").length,i=-1,a=0;n>a;a++)i=e.charCodeAt(a),t+=i>=0&&128>=i?1:3;return t},KD.getGBKStrLeng=function(e){for(var t=0,n=e.length,i=-1,a=0;n>a;a++)i=e.charCodeAt(a),t+=i>=0&&128>=i?1:2;return t},KD.utf8Decode=function(e){var t,n,i,a,r,o;for(t="",i=e.length,n=0;i>n;)switch(a=e.charCodeAt(n++),a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:r=e.charCodeAt(n++),t+=String.fromCharCode((31&a)<<6|63&r);break;case 14:r=e.charCodeAt(n++),o=e.charCodeAt(n++),t+=String.fromCharCode((15&a)<<12|(63&r)<<6|(63&o)<<0)}return t},KD.arrayToBase64=function(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,a=0;i>a;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)},KD.getHexColor=function(e){var t=e;if((e||"").indexOf(",")>0){var n=e.split(",");t="#";for(var i=n.length-3;i<n.length;i++){var a=parseInt(n[i]||"0").toString(16);t+=a.length>1?a:"0"+a}}return t},KD.interceptColorStr=function(e){return 0==e.indexOf("#")&&e.length>7?"#"+e.substr(3,6):e},KD.getEnumSource=function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var i=e[n];t.push({alias:i[1],value:i[0]})}return t},function(e){e.isLoginRenderByPlugins=function(){var t=!e.equalsIgnoreCase("HTML5",e.getConnectConfig().entryRole),n=e.getEntryRoleConfig(),i=n.jsPlugins,a=t&&i&&i.Items?i.Items.length>0:!1;return a},e.entryrolePlugins=e.entryrolePlugins||{plugins:{},pluginsCache:{},register:function(t,n){if(t&&n&&$.isFunction(n)){var i=t.toLowerCase();delete e.entryrolePlugins.pluginsCache[i],e.entryrolePlugins.plugins[i]=n}},getPlugin:function(t){var n=t?t.toLowerCase():"__def",i=e.entryrolePlugins.pluginsCache[n];if(i)return i;var a=e.entryrolePlugins.plugins[n];return a||(a=e.entryrolePluginBase),i=new a,e.entryrolePlugins.pluginsCache[n]=i,i}},function(e){e.entryrolePluginBase=function(){},e.entryrolePluginBase.prototype={acctoundId:"",languageId:2052,getLogOffUrl:function(){},setLogoffPage:function(){},initLoginPanel:function(){},initLoginUI:function(){},loginUIReady:function(){},isUseQRCode:function(){return!0},isUseDefaultLoginUI:function(){return!0},isBuildSession:function(){return!1},isDefaultLogoff:function(){return!0},isInitDataCenterList:function(){return!0},getLogininfo:function(e){return e},beforeSaveCookies:function(e){},afterLoadCookies:function(e){},getUserServiceProxy:function(){}}}(e),$.extend(e,{doPlugInsLogin:function(t){var n=function(e){KDMessageBox.show({type:KDMessageBox.KDMesBoxType.Warning,sourceClass:"",sourceMethod:"",msg:e.message,description:e.stack,callback:function(e){var n=t.getLogOffUrl.call(t)||document.location.href;document.location.href=n}})},i={sessionkey:KDCookieManager.getKDSessionId(),scope:t,response_error:function(t){var i=e.parseObject(t.substr(t.indexOf("{"))),a={message:i.Message,stack:i.Source+"\r\n"+i.StackTraceString};n(a)},callback:function(t){try{var i="string"==typeof t?e.parseObject(t):t;if(KDCookieManager.updateSessionId(i),e.IsLoginResultSuccessfull(i.LoginResultType))if(i.LoginResultType!=e.LoginResultType.Success||i.Message)KDMessageBox.show({type:KDMessageBox.KDMesBoxType.Warning,msg:i.Message,callback:function(t){i.LoginResultType=e.LoginResultType.Success;var n=i.UserToken||i.Context&&i.Context.UserToken;loadMainForm(n,null)}});else{var a=i.UserToken||i.Context&&i.Context.UserToken;loadMainForm(a,null)}else{var r={message:i.Message,stack:""};n(r)}}catch(o){var r={message:o.Message,stack:o.stack};n(r)}finally{}},errcallback:function(e){var t={message:"request error!",stack:e};n(t)}},a=new HTMLFormHandlerProxy,r=new LoginInfo;$.extend(r,{EncyptType:1,PasswordIsEncrypted:!1,AcctID:"xxx",AuthenticateType:e.AuthenticationType.PwdAuthentication,ClientInfo:e.getClientInfo()}),r=t.getLogininfo.call(t,r),a.ValidateUser.call(a,i,r)},getDataCenterList:function(t){var n=target=t.scope,i=t.requested,a=t.dataLoaded,r=t.error,o={scope:n,callback:function(t){var i=e.parseObject(t);n.data=i,e.isFunction(a)&&a(n,{sender:target})},errcallback:function(t){var n=this;e.isFunction(r)&&r(n,{sender:target})}},s=new AccountClientProxy;s.getDataCenterList.call(s,o,1),e.isFunction(i)&&i(n,{sender:target})},initDataCenterList:function(t){if(!e||!e.autologin){var n=t.scope,i=target=t.target,a=t.defaultId,r=t.changed,o=t.requested,s=t.dataLoaded,l=t.rendered,c={scope:n,callback:function(t){var o=this;try{var c=e.parseObject(t);n.data=c;for(var d=[],u=null,g=0,p=0;p<c.length;p++){var u=c[p];$.each(u.LocaleValueName,function(e,t){t.Key==ResManager.Language&&d.push([u.Id,t.Value])}),u.Id==a&&(g=p)}var f=e.getEnumSource(d),h={dataSource:f,popup:{origin:"bottom right",position:"top right"},dataTextField:"alias",dataValueField:"value",height:350,autoWidth:!0,valueTemplate:'<span title="#: alias #" class="toolTip"> #: alias #</span>',noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490"),animation:{close:{effects:"fadeOut zoom:out",duration:300},open:{effects:"fadeIn zoom:in",duration:300}},change:function(t){e.isFunction(r)&&r(o,t)},dataBound:function(t){e.isFunction(l)&&l(o,t)}};f&&f.length>=8&&(h.filter="contains",h.minLength=1,h.delay=0),i.kendoDropDownList(h),i.data("kendoDropDownList").select(g),i.data("kendoDropDownList").trigger("change"),e.isFunction(s)&&s(o,{sender:target})}catch(m){o.err({msg:ResManager.LoadKDString("初始数据中心列表失败!","0991733000004012"),description:t})}},errcallback:function(e){var t=this;t.err&&t.err({msg:ResManager.LoadKDString("初始数据中心列表失败!","0991733000004012"),description:e})}},d=new AccountClientProxy;d.getDataCenterList.call(d,c,1),e.isFunction(o)&&o(scope,{sender:target})}},initDCLanguageList:function(t){var n=t.scope,i=target=t.target,a=0,r=t.defaultId,o=t.accountId,s=t.accountList||[],l=t.changed,c=t.requested,d=t.dataLoaded,u=t.rendered;try{for(var g=0;g<s.length;g++){var p=s[g];p.Id==o&&(a=g)}var f=s[a];ResManager.Language}catch(h){e.Error.raise({msg:ResManager.LoadKDString("初始认证列表失败!_datacenter_kendo_changed","0991733000004014"),description:h.stack})}var m={scope:n,response_error:function(t){e.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:t})},callback:function(t){try{for(var n=this,a=e.parseObject(t),o=0,s=[],c=0;c<a.length;c++){var g=a[c],p=g.LocaleName;p&&p.replace&&p.indexOf&&p.indexOf("/中国")>0&&(p=p.replace("/中国","")),s.push([g.LocaleId,p]),g.LocaleId.toString()==r&&(o=c)}var f=e.getEnumSource(s),h=i.kendoDropDownList({dataSource:f,popup:{origin:"bottom right",position:"top right"},dataTextField:"alias",dataValueField:"value",autoWidth:!0,noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490"),valueTemplate:'<span title="#: alias #" class="toolTip"> #: alias #</span>',change:function(t){e.isFunction(l)&&l(n,t)},dataBound:function(t){e.isFunction(u)&&u(n,t)}}).data("kendoDropDownList");h.select(o),ResManager.Language=s[o][0],e.isFunction(d)&&d(n,{sender:target})}catch(m){e.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:m.stack})}},errcallback:function(t){var n=this;n.err&&e.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:t})}},v=new AccountClientProxy;v.getDataCenterLoginLanguages.call(v,m,"zh-CN",1,f.Id,f.DBType),e.isFunction(c)&&c(scope,{sender:target})},updateDCLanguage:function(t){var n=[],i=t.scope,a=t.target,r=t.callback;try{for(var o=0,s=0;s<i.data.length;s++){var l=i.data[s];l.Id==a.data("kendoDropDownList").value()&&(o=s);var c=e.isEmpty(l.Name)?"":l.Name;$.each(l.LocaleValueName,function(e,t){t.Key==ResManager.Language&&(c=t.Value)}),n.push([l.Id,c])}var d=(i.data[o],new kendo.data.DataSource({data:e.getEnumSource(n)})),u=a.data("kendoDropDownList");u.setDataSource(d),u.select(o),r&&r(i,{sender:a})}catch(g){e.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013")+e.stringify(ins.currentTarget.data[0]),description:g.stack})}}})}(KD),KD.GridSelectedType={SingleRow:1,MultiRow:2,Cell:3},KD.resetAppSize=function(){if(!KD.isKDScriptBusy()){KD.isKDScriptBusy(!0);try{var e=18,t=21,n=KD.CONST.MinClientHeight,i=KD.CONST.MinClientWidth,a=$(window).innerHeight(),r=$(window).innerWidth();n>a&&(a=n),i>r&&(r=i),void 0===KD.lastHeight&&(KD.lastHeight=a),void 0===KD.lastWidth&&(KD.lastWidth=r);var o=a-KD.lastHeight,s=r-KD.lastWidth,l=!1,c=!1;(o>t||-1*t>o)&&"100%"!=KD.lastHeight&&(l=!0),(s>e||-1*e>s)&&"100%"!=KD.lastWidth&&(c=!0),KD.lastWidth==i&&KD.lastHeight==n&&(n>=a||i>=r)&&(l=!1,c=!1);var d=$("#MainPanel"),u=document.rootForm,g=u.getControl.call(u),p=!1;l&&c?(p=!0,d.css({"min-height":a,width:r,"min-width":r}),g.css({height:a,width:r}),$(document.body).css({"min-height":a>n?a:n}),KD.lastWidth=r,KD.lastHeight=a):l?(p=!0,$(document.body).css({"min-height":a>n?a:n}),d.css({"min-height":a}),g.css({height:a}),KD.lastHeight=a):c&&(p=!0,d.css({width:r,"min-width":r}),g.css({width:r}),KD.lastWidth=r),p&&(KD.lastDetaHeight=o,KD.lastDetaWidth=s,KD.writeLogTime("KD.resetAppSize Begin: ","(dH="+o+",dW="+s+"),change:"+p,!0),KD.initClientParameters(),u.doLayout&&u.doLayout.call(u)),p&&KD.writeLogTime("KD.resetAppSize End  : ","(h="+a+",w="+r+"),change:"+p,!0)}finally{KD.delayInvoke(function(){KD.isKDScriptBusy(!1)}),KD.resetAppSize.actionName="KD.resetAppSize",KD.circleInterval=KD.delayInvoke(KD.resetAppSize,3e3,!0)}}},window.onerror=function(e,t,n,i,a){KD.writeLog(e+"+++++++++"+t,a,!1),console.error&&(console.error("错误信息：",e),console.error("出错文件：",t),console.error("错误详情：",a))},KD.getK3CloudLoginInfo=function(){var e=void 0;return"function"==typeof ClientAppProxy&&(e=ClientAppProxy.Current?ClientAppProxy.Current.CTX:void 0),e?{username:e.UserName,userid:e.UserId,dbid:e.DBid,usertoken:e.UserToken}:{}},KD.generateUserHashID=function(){var e=KD.getK3CloudLoginInfo();return"C_"+e.username+"_"+e.userid+"_"+e.dbid},KD.resetLocalConfiguration=function(){delete KD.__localSettings,KD.storage.removeItem(KD.CONST.LocalConfigurationKey)},KD.getLocalConfiguration=function(e){var t=KD.__localSettings=KD.__localSettings||KD.parseObject(KD.storage.getItem(KD.CONST.LocalConfigurationKey)||"{}"),n={MessageDisTime:3,SelectRowBackground:"#E0E8FF",DefaultRowBackground:"#E0E8FF",MinusNumColor:"#E74C3C",FontSize:"12px",PrintNoPrompt:!1,UseClientPrinterSetting:!1,FixedTableSelectColumns:!1,IsReadOnlyTextWrap:!1,ThemeChooser:"standard",NotShowUtcOffset:!1},i="";return i=e&&e.Context&&e.Context.UserId?"C_"+e.Context.UserName+"_"+e.Context.UserId+"_"+e.Context.DBid:KD.generateUserHashID(),$.extend(n,t[i])},KD.convertToPX=function(e){var t=parseInt(KD.getLocalConfiguration().FontSize||12);return e*t},KD.setAsynchronousFilter=function(e){e=$(e),e&&e.length>0&&KD.getCurrentBrowsType().type!=KD.CONST.BrowsType.Chrome&&e.unbind("compositionend").bind("compositionend",function(e){var t=jQuery.Event("keydown");t.keyCode=17,$(this).trigger(t)})},KD.converToJqId=function(e){var t=e;return KD.isString(t)&&(t=t.replace(/\@/g,"_a_").replace(/\$/g,"_s_")),t},KD.getCurrentFontsize=function(){var e=KD.getLocalConfiguration().FontSize||12;return parseInt(e)},KD.convertToHtmlString=function(e,t){e=e||"";var n;return e.replace&&$.isFunction(e.replace)?(n=e.replace(/\r\n|\n/g,"<br/>"),(void 0==t||1==t)&&(n=n.replace(new RegExp(" ","g"),"&nbsp;"))):n=e,n},KD.extendObject=function(e,t){return $.extend(e,t),e},KD.GetWinServiceIsInstalled=function(e){var t=!1,n=function(e){t=e};return $.ajax({async:!1,url:"https://localhost:8022/RunningProcess.kcapi?Kingdee.BOS.DeskClient.WinService",success:function(e){var t=!1;if(e.ProcessCount){var i=e.ProcessCount;"1"==i&&(t=!0)}n(t)},error:function(e){n(!1)}}),t},KD.checkDeskShellStatus=function(){try{var e=KD.GetDeskShellStatus(),t=null;switch(e){case"1":case"49":case"Installed":t=!0;break;case"0":case"48":case"NotInstalled":t=!1;break;default:t=null}return t}catch(n){return null}},KD.openK3CloudApp=function(e,t,n,i,a){var r=e.indexOf("from=yzj")>=0,o=a?!1:KD.checkDeskShellStatus();r&&!o&&(o=KD.GetWinServiceIsInstalled()),1==o?KD.OpenDeskApp(e):KD.openCloudAppTipsWin(e,t,n,i,r)},KD.openCloudAppTipsWin=function(e,t,n,i,a){win=KD.genDisplayWindow(t,i),win.Width=540,win.Height="auto",KD.IsNullOrWhiteSpace(i)||win.Content.find(".kd-window-des").addClass("k3cloudapp-run-state-des"),win.Content.css({padding:"20px 25px 15px 25px"});var r=KD.genClientDownloadPanel(e,n,win);a&&(r=KD.genYZJClientDownloadPanel(e,n,win)),$(win.Content).append(r),windowData=win.ShowDialog(),$(".windowColseHandle",win.Content).off("click").on("click",function(t){$(this).hasClass("k3cloudapp-configure-btn")?windowData.close():(KD.OpenDeskApp(e),KD.delayInvoke(function(e){windowData.close()},900))}),KD.isMacOS()&&win.Content.find(".kd-setup-download-handle").off("click").on("click",function(e){e.preventDefault(),KDMessageBox.show({name:ResManager.LoadKDString("金蝶提示","099002000000002"),msg:ResManager.LoadKDString("该应用是windows应用，系统不支持。","0025372030032766"),type:KDMessageBox.KDMesBoxType.Warning,button:KDMessageBox.KDMessageBoxButtons.Ok})})},KD.genDisplayWindow=function(e,t){var n=new KD.KDWindowBase;n.Title=e,n.MinWidth=250,n.MinHeight=100;var i=$('<div style="padding:35px 78px"></div>');if(!KD.IsNullOrWhiteSpace(t)){var a=$('<div class="kd-window-des" style="margin-left:10px;display:inline-block;"></div>');a.html(t),i.append(a)}return n.Content=i,n},KD.genHyperLinkButton=function(e,t,n){return"<a href="+t+' class="windowColseHandle" target="_blank">'+(e||ResManager.LoadKDString("点击打开","0991733000003988"))+"</a>"},KD.genClientDownloadPanel=function(e,t,n){var i=(e.toString().replace(/'/g,'"'),KD.format('<a class="k3cloudapp-configure-step-link" href="{helper}" target="_blank">{0}</a>',ResManager.LoadKDString("说明文档","0991733000008469"))),a=(KD.format('<a class="k3cloudapp-configure-step-link kd-setup-download-handle" href="{setupZipProgram}" target="_blank">{0}</a>',ResManager.LoadKDString("压缩包","0991733000003995")),KD.format('<a class="k3cloudapp-configure-step-link kd-setup-download-handle" href="https://localhost:8022/Version.kcapi" target="_blank">{0}</a>',ResManager.LoadKDString("点击这里","0991733000003554"))),r='<div class="k3cloudapp-configure"><div class="k3cloudapp-title">'+ResManager.LoadKDString("请通过以下步骤完成操作","0991733000008496")+'</div><div class="k3cloudapp-configure-container"><div class="k3cloudapp-configure-step-index">1</div><div style="margin-left: 70px;"><a class="k3cloudapp-configure-step kd-setup-download-handle" href="{setupProgram}" target="_blank">'+ResManager.LoadKDString("下载并安装引导程序","0991733000003991")+(1==KD.checkDeskShellStatus()?'<span style="font-size:9pt;color:green;">'+ResManager.LoadKDString("(已安装)","0991733000008391")+"</span>":"")+'</a><div class="k3cloudapp-configure-step-des">'+kendo.format(ResManager.LoadKDString("如果已安装可直接执行第二步，也可根据{0}手工配置。","0991733000003556"),i)+"<br/>"+kendo.format(ResManager.LoadKDString("如果反复出现该对话框，请{0}对https证书访问进行授权，可解决反复弹框问题。","0991733000003557"),a)+'</div></div></div><div class="k3cloudapp-configure-container"><div class="k3cloudapp-configure-step-index">2</div><div style="margin-left: 70px;"><a id="openDeskAppLink" class="windowColseHandle k3cloudapp-configure-step" attrUrl="'+e+'" target="_blank" >'+t+'</a></div></div><div class="k3cloudapp-configure-btn windowColseHandle">'+ResManager.LoadKDString("我知道了","0025710030032401")+"</div></div>";return r=r.replace("{setupProgram}","/K3Cloud/Clientbin/K3CloudClientPortal.exe").replace("{helper}","/K3Cloud/Help/ClientHelp.htm").replace("{setupZipProgram}","/K3Cloud/Clientbin/K3CloudClientPortal.zip")},KD.genYZJClientDownloadPanel=function(e,t,n){var i=!KD.isEmpty(e)&&!KD.isEmpty(t),a=(e.toString().replace(/'/g,'"'),"K3CloudClienter"),r=KD.format('<a class="k3cloudapp-configure-step-link kd-setup-download-handle" href="{setupZipProgram}" target="_blank">{0}</a>',ResManager.LoadKDString("压缩包","0991733000003995")),o='<div class="k3cloudapp-configure"><div class="k3cloudapp-title">&nbsp;</div><div class="k3cloudapp-configure-container"><div class="k3cloudapp-configure-step-index">1</div><div style="margin-left: 70px;"><a class="k3cloudapp-configure-step kd-setup-download-handle" href="{setupProgram}" target="_blank">'+ResManager.LoadKDString("下载并安装金蝶云星空服务","00214298000005382")+(1==KD.checkDeskShellStatus(),"")+'</a><div class="k3cloudapp-configure-step-des">'+kendo.format(ResManager.LoadKDString("第一次下载并安装完成后，请在弹窗填写访问金蝶云星空的服务器地址（如https://kingdee.ik3cloud.com/K3cloud/）并运行客户端；如已经安装请按提示检查其他步骤；如果无法直接下载并安装，可将{0}下载到本地，解压后执行安装即可。","00215181030035315"),r)+'</div></div></div><div class="k3cloudapp-configure-container"><div class="k3cloudapp-configure-step-index">2</div><div style="margin-left: 70px;"><div class="k3cloudapp-configure-step" style="cursor:default;text-decoration:none;color:inherit;">'+kendo.format(ResManager.LoadKDString("检查并启用服务({0})","00214298000005384"),a)+'</div><div class="k3cloudapp-configure-step-des">'+(i?kendo.format(ResManager.LoadKDString("确认已经安装该服务，Windows的任务管理器查看服务({0})是否启用，没有启用则点击启用；如果已经启用服务，请执行第三步更新服务。","00214298000005385"),a):kendo.format(ResManager.LoadKDString("确认已经安装该服务，Windows的任务管理器查看服务({0})是否启用，没有启用则点击启用。","00214298000004653"),a))+"</div></div></div>";return i&&(o=o+'<div class="k3cloudapp-configure-container"><div class="k3cloudapp-configure-step-index">3</div><div style="margin-left: 70px;"><a id="openDeskAppLink" class="windowColseHandle k3cloudapp-configure-step" attrUrl="'+e+'" target="_blank" >'+t+'</a><div class="k3cloudapp-configure-step-des">'+kendo.format(ResManager.LoadKDString("确认已经安装并且已经启用服务({0})，点击会自动更新服务，并且更新完成后自动登录云之家。","00214298000005386"),a)+"</div></div></div>"),o=o+'<div class="k3cloudapp-configure-btn windowColseHandle">'+ResManager.LoadKDString("我知道了","0025710030032401")+"</div></div>",o=o.replace("{setupProgram}","/K3Cloud/Clientbin/K3CloudClientPortal.exe").replace("{helper}","/K3Cloud/Help/ClientHelp.htm").replace("{setupZipProgram}","/K3Cloud/Clientbin/K3CloudClientPortal.zip")},KD.isClientUrl=function(e){return KD.IsNullOrWhiteSpace(e)?!1:e.toLowerCase().startsWith("k3cloud://")||-1!=e.indexOf("ExeType=WPFRUNTIME")||-1!=e.indexOf("ExeType=RPTIDE")||-1!=e.indexOf("ExeType=NOTEDESIGNER")||-1!=e.indexOf("ExeType=BOSIDE")},KD.getTipsConfiguration=function(){var e=KD.parseObject(KD.storage.getItem("TipsConfiguration")||"{}"),t={showConsoleTips:!0,showBillDashBoardTips:!0};return e[KD.generateUserHashID()]||t},KD.writeSecureLog=function(){console&&console.log&&(console.log("%c  金蝶警告！","font-size:50px;color:red;-webkit-text-fill-color:red;-webkit-text-stroke: 1px black;"),console.log("%c禁止在此粘贴执行任何内容，这可能会导致你的账号受到攻击！","font-size:14px;"))},KD.QingDesktop=function(){qing&&!qing.isGalaxyDesktop&&(qing.use("desktop-remote",{timeout:2e4,saas:!1,error:function(e){console.log(e)}}),qing.isGalaxyDesktop=!0)},KD.DynaLoadJS=function(e,t){var n=$("head");e&&n.remove("#"+e),t&&$("<script charset='utf-8' async></script>").attr({src:t,type:"text/javascript",id:e}).appendTo(n)},KD.formatHtmlColor=function(e){if(KD.IsNullOrWhiteSpace(e))return e;if(e=e.trim(),!(e.length>7))return e.toUpperCase();var t;return e.indexOf("#00")>-1?void(t=""):e.replace("#FF","#").toUpperCase()},KD.dynamicResAddin=function(e,t){var n=$(KD.format("#{0}",e||t));0!=n.length||KD.isEmpty(t)||$("<script charset='utf-8' async></script>").attr({src:t,type:"text/javascript",id:e}).appendTo($("head"))},KD.newFileUpSecByCryptoJS=function(e){function t(e){var t=CryptoJS.enc.Base64.stringify(e),n=new RegExp("/","g");return t=t.replace(/=+$/,"").replace(/\+/g,"-").replace(n,"_")}if(KD.isEmpty(e))return"";var n=JSON.stringify(KD.CONST.newFileUpHeaderSec),i=JSON.stringify(e),a=t(CryptoJS.enc.Utf8.parse(n))+"."+t(CryptoJS.enc.Utf8.parse(i)),r=t(CryptoJS.HmacSHA256(a,KD.CONST.newFileUpSec));return a+"."+r},KD.getDataMaskTextTips=function(){var e=kendo.format("{0}&#10;{1}&#10;{2}",ResManager.LoadKDString("一键切换明文显示：Ctrl+Alt+K","00215181000007584"),ResManager.LoadKDString("一键切换脱敏显示：Ctrl+Alt+P","00215181000008804"),ResManager.LoadKDString("管理员可以通过“隐私中心-脱敏方案配置”进行设置","00215181000007586"));return e},KD.dataURLToBlob=function(e,t){var n=e.split(",");if(!t){var i=n[0].match(/:(.*?);/);t=i&&i.length>1?i[1]:""}for(var a=n.length>1?window.atob(n[1]):"",r=a.length,o=new ArrayBuffer(r),s=new Uint8Array(o);r--;)s[r]=a.charCodeAt(r);return new Blob([o],{type:t})},KD.imgCompress=function(e){if(!KD.isObject(e))return!1;var t=e.file||void 0,n=e.successful;e.fail;if(!t)return!1;!function(e){var t=new Image,n=new FileReader;n.onload=function(e){t.src=e.target&&e.target.result},n.readAsDataURL(e),t.onload=function(){i(t)}}(t);var i=function(e){var i=1;if(null!=t.size){t.size>1e6&&t.size<3e6?i=.8:t.size>3e6&&t.size<5e6?i=.4:t.size>5e6&&t.size<1e7?i=.1:t.size>1e7&&(i=.01);var a=i;i=1e6/t.size,i=Math.floor(100*Math.sqrt(i))/100,(i>.8||a>i)&&(i=a);var r=document.createElement("canvas"),o=r.getContext("2d"),s=e.width,l=e.height,c=s*i,d=l*i;r.width=c,r.height=d,o.clearRect(0,0,c,d),o.drawImage(e,0,0,c,d);var u=t.type,g=r.toDataURL(u,i),p=KD.dataURLToBlob(g,u),f=new window.File([p],t.name,{type:u,lastModified:t.lastModified});f&&KD.isFunction(n)&&n(f)}}},!function(e){e.fly=function(t,n){var i={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:e.noop},a=this,r=e(t);a.init=function(e){this.setOptions(e),!!this.settings.autoPlay&&this.play()},a.setOptions=function(t){this.settings=e.extend(!0,{},i,t);var n=this.settings,a=n.start,o=n.end;r.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=o.width&&null!=o.height&&e.extend(!0,a,{width:r.width(),height:r.height()});var s=Math.min(a.top,o.top)-Math.abs(a.left-o.left)/3;s<n.vertex_Rtop&&(s=Math.min(n.vertex_Rtop,Math.min(a.top,o.top)));var l=Math.sqrt(Math.pow(a.top-o.top,2)+Math.pow(a.left-o.left,2)),c=Math.ceil(Math.min(Math.max(Math.log(l)/.05-75,30),100)/n.speed),d=a.top==s?0:-Math.sqrt((o.top-s)/(a.top-s)),u=(d*a.left-o.left)/(d-1),g=o.left==u?0:(o.top-s)/Math.pow(o.left-u,2);
e.extend(!0,n,{count:-1,steps:c,vertex_left:u,vertex_top:s,curvature:g})},a.play=function(){this.move()},a.move=function(){var t=this.settings,n=t.start,i=t.count,a=t.steps,o=t.end,s=n.left+(o.left-n.left)*i/a,l=0==t.curvature?n.top+(o.top-n.top)*i/a:t.curvature*Math.pow(s-t.vertex_left,2)+t.vertex_top;if(null!=o.width&&null!=o.height){var c=a/2,d=o.width-(o.width-n.width)*Math.cos(c>i?0:(i-c)/(a-c)*Math.PI/2),u=o.height-(o.height-n.height)*Math.cos(c>i?0:(i-c)/(a-c)*Math.PI/2);r.css({width:d+"px",height:u+"px","font-size":Math.min(d,u)+"px"})}r.css({left:s+"px",top:l+"px"}),t.count++;var g=window.requestAnimationFrame(e.proxy(this.move,this));i==a&&(window.cancelAnimationFrame(g),t.onEnd.apply(this))},a.destroy=function(){r.remove()},a.init(n)},e.fn.fly=function(t){return this.each(function(){void 0==e(this).data("fly")&&e(this).data("fly",new e.fly(this,t))})}}(jQuery),$.prototype.height=function(e){return function(){var t=this,n=arguments.length>0,i=n?arguments[0]:null;return n&&"function"==typeof e?e.call(t,i):i=e.call(t),!n&&0==i&&KD.isIeBrowser()&&t.is&&t.is(":visible")&&t.innerHeight&&(i=t.innerHeight()),n?t:i}}($.prototype.height),$.prototype.unload=function(e){return function(){var e=this,t=arguments.length>0,n=t?arguments[0]:null;return e.off("unload").on("unload",function(t){"function"==typeof n&&n.call(e,t)}),e}}(),function(){var e=KD.bizTipsUtils=KD.bizTipsUtils||{},t="BizTipsNumber",n="MasterId",i="CommunitySolutionCode";e.ToError=function(e){var a=ClientAppProxy.Current.defaultLocalId,r=KD.getLocalValue(a,e.Message),o=KD.getLocalValue(a,e.Description),s={};if(s.errorType=e.ErrorType,s.errorTitle=r,s.errorInfo=e.IsShowDetail?o:"",s[n]=e.MasterId,s[t]=e.Number,s[i]=e.CommunitySolutionCode,e.MsgInnerInfos&&KD.isArray(e.MsgInnerInfos)){var l=[];s.msgcontrol=l;for(var c in e.MsgInnerInfos)l.push(c)}return s},e.ToWanning=function(t){var n=e.ToMessage(t);return n},e.ToMessage=function(e){var a=ClientAppProxy.Current.defaultLocalId,r=KD.getLocalValue(a,e.Message);r||(r="[No Message]");var o=KD.getLocalValue(a,e.Description),s={};if(s.title=r,s.msg=e.IsShowDetail?o:"",s.moretext=e.IsShowDetail?o:"",s.option=e.MsgButtons,s.msgType=e.MsgType,s.id=e.CallBackActionId,s[n]=e.MasterId,s[t]=e.Number,s[i]=e.CommunitySolutionCode,e.MsgInnerInfos&&KD.isArray(e.MsgInnerInfos)){var l=[];s.msgcontrol=l;for(var c in e.MsgInnerInfos)l.push(c)}return s}}(),function(){var e=[],t=function(e,t,n){if(!e)return"";var i=[];for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];r&&(_isTypeOf(r,"function")||(_isTypeOf(r,"date")?r=r.getTime():_isTypeOf(r,"array")?r=r.join(","):_isTypeOf(r,"object")&&(r=JSON.stringify(r)),n&&(r=encodeURIComponent(r)),i.push(encodeURIComponent(a)+"="+r)))}return i.join(t||",")};window._$postMessage=function(){var i="MSG|",a=function(e){var n={};return e=e||{},n.origin=e.origin||"",n.ref=location.href,n.self=e.source,n.data=JSON.stringify(e.data),i+t(n,"|",!0)};return function(t,i){window.postMessage?(i=i||{},t.postMessage(JSON.stringify(i.data),n(i.origin))):e.unshift({w:t,d:escape(a(i))})}}();var n=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){return t=t||"",e.test(t)?RegExp.$1:"*"}}(),i=function(e,t,n){window.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},a=function(e){e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},r=function(e){a(e);var t=e.data||"null";o({data:t,origin:n(e.origin)})},o=function(e){var t=e.data;e.origin;if("string"==typeof t)try{var n=JSON.parse(t),i=n.pageid;if(ClientAppProxy&&i){var a=ClientAppProxy.Current.getAliveForm(i);a&&a.fireCustomEventsNoData.call(a,"$$MessageCustomerEvent","$$MessageCustomerEvent",JSON.stringify(n.putdata),null)}}catch(r){}},s=function(){var t="MSG|",i=function(e,t){for(var n,i=_isTypeOf(t,"function")?t:function(e){return e===t},a=null,r=0,o=e.length-1;o>r;r++)n=e[r],i(n)&&(a=r);return null!=a?a:-1},a=function(){var t,n=function(e,n,a){i(t,e.w)<0&&(t.push(e.w),a.splice(n,1),e.w.name=e.d)};return function(){if(t=[],e&&e.length)for(var i,a=e.length;a--;a>=0)i=e[a],n(i,a,e);t=null}}(),r=function(){var e=unescape(window.name||"");if(e&&0==e.indexOf(t)){window.name="";for(var i=e.replace(t,""),a=i.split("|"),r=a.length,s={},l=0;r>l;l++){var c=a[l].split("=");if(!c||!c.length)return;var d=c.shift();if(!d)return;s[decodeURIComponent(d)]=decodeURIComponent(c.join("="))}i=s;var u=(i.origin||"").toLowerCase();u&&"*"!=u&&0!=location.href.toLowerCase().indexOf(u)||o({data:i.data||"null",origin:n(i.ref||document.referrer)})}};return function(){setInterval(a,100),setInterval(r,20)}}(),l=function(){window.postMessage?i(window,"message",r):s()};return l()}(),function(){window.getpostmessageargs=function(){var e="";return KD.isEmpty(window._$postmessageargs)||(e=window._$postmessageargs),e},window.clearpostmessageargs=function(){KD.isEmpty(window._$postmessageargs)||(window._$postmessageargs="")},window.doOpenerInvokeActions=function(e,t){try{if(KD.isEmpty(e))return;if(KD.isEmpty(t)&&(KD.isArray(e)||e.length>0)){var n=e;e=n[0],t=n[1]}var i=ClientAppProxy.Current.getAliveForm(e);if(!KD.isEmpty(i)){for(var a=KD.parseObject(t),r=[],o=0;o<a.length;o++){var s=a[o];r.push({actionname:s[0]||"",params:s[1]||null})}r.length>0&&i.doActions.call(i,r)}}catch(l){KD.writeLog("targetPageId = ",e),KD.writeLog("actsStr = ",t),KD.writeError(l)}},window.initFrameData=function(e){KD.writeLog("initFrameData::",KD.stringify(e))}}(),function(e){$(document.body).off("compositionstart").off("compositionend").on("compositionstart",function(){(e||{}).isImeInputing=!0,KD.isDebug()&&KD.writeLog("document.body.compositionstart","KD.isImeInputing = true",!0)}).on("compositionend",function(){(e||{}).isImeInputing=!1,KD.isDebug()&&KD.writeLog("document.body.compositionstart","KD.isImeInputing = false",!0)})}(KD),function(e){function t(t){try{if(t&&t.ctrlKey&&t.altKey){var n=t.keyCode||t.which||t.charCode;if(120==n){e.stopPropagation(t);var i=ClientAppProxy.Current.getRootForm();i&&i.onExecCommand.call(i,t)}}}catch(a){e.writeLog(a.message,"",!0)}}$(document.body).off("keyup",t).on("keyup",t)}(KD),define("KD",["KDMessageBox","ResManager","jqueryk3cloudex","KD.CONST","gzipcompressor"],function(e){return function(){var t;return t||e.KD}}(this));var KDKeyNavigate=KDKeyNavigate||{initEnter2tab:function(e,t){if(!t||"kdmaintab"!=t.xtype&&"tabpanel"!=t.xtype){(e.is(":input")||e.is(":text"))&&e.addClass("kd_Enter2tab");var n=e.find(":input").length>0?e.find(":input"):e.find(":text");n&&n.length>0&&$(n[0]).addClass("kd_Enter2tab");var i=e.parent().find("span[tabindex=0]");i&&i.length>0&&i.addClass("kd_Enter2tab")}},onKeyNavigate:function(e,t,n){if(13==n.keyCode){if(t&&("kdmaintab"==t.xtype||"tabpanel"==t.xtype))return!0;var i=e,a=e.find(".kd_Enter2tab");return a&&a.length>0&&(i=$(a[0])),!i.is("textarea")&&!i.is("table")||n.ctrlKey||n.shiftKey||9===n.keyCode?i.is(".k-link")&&13==n.keyCode?!0:(this._goAfter(i,n.shiftKey),!1):!0}},_goAfter:function(e,t){var t=!!t,n=this._getAfter(e,t);n&&n.focus&&n.focus()},_getAfter:function(e,t){t=!!t;for(var n,i=this._getKeyboardList(),a=i.index(e),r=e.is(":radio"),o=e.attr("name");;){if(t?(a--,a=a>=0?a:i.length-1):(a++,a=a>i.length-1?0:a),n=i.eq(a),n[0]==e[0]){n=null;break}if(!r||!n.is(":radio")||o!=n.attr("name"))break}if(n&&n.is(":radio")){var s,l=n.attr("name");l&&(s=i.filter(':radio:checked[name="'+l+'"]:eq(0)'),n=s[0]?s:n)}return n},_getKeyboardList:function(){return $(".kd_Enter2tab:visible:not(.k-state-disabled):not(:disabled)").filter(function(e){return this.tabIndex>=0}).each(function(e,t){t.enter2tabSortKey=e}).sort(function(e,t){return e.tabIndex==t.tabIndex?e.enter2tabSortKey-t.enter2tabSortKey:e.tabIndex-t.tabIndex})}};define("KDKeyNavigate",["KD"],function(e){return function(){var t;return t||e.KDKeyNavigate}}(this)),DataBaseCategory={Normal:1,Archive:2,Report:3,ManagementCenter:4,MultiLanguageCenter:5},function(){KDCookieManager=window.KDCookieManager||{Const_sessionid:"kdservice-sessionid",Const_aspnetsessionkey:"ASP.NET_SessionId",Const_awselb:"AWSELB",kdSessionId:"",aspnetSessionId:"",renewKDSession:function(){KDCookieManager.setKDSessionId("v")},getKDSessionId:function(){return KDCookieManager.kdSessionId||(KDCookieManager.kdSessionId=KD.getKDSessionId()),KDCookieManager.kdSessionId},getAspNetSessionId:function(){return KDCookieManager.aspnetSessionId||(KDCookieManager.aspnetSessionId=KD.getAspNetSessionId()),KDCookieManager.aspnetSessionId},getAWSELB:function(){return KD.getConnectConfig().awselb||""},setKDSessionId:function(e){KDCookieManager.kdSessionId=e,KD.writeLog("setKDSessionId","kdsid="+e,!0)},setAspNetSessionId:function(e){KDCookieManager.aspnetSessionId=e,KD.writeLog("setAspNetSessionId","aspnetsid="+e,!0)},updateSessionId:function(e){e&&e.Context&&(KDCookieManager.setKDSessionId(e.KDSVCSessionId),KDCookieManager.setAspNetSessionId(e.Context.SessionId),KDCookieManager.writeToDocument())},setSessions:function(e){var t=/https\:\/\//.test(document.URL)&&"https://"==document.URL.substr(0,8).toLowerCase(),n=new Date;n.setSeconds(n.getSeconds()+60);var i={expires:n,secure:t},a=KDCookieManager.getAWSELB();a&&(KD.cookie.clear(KDCookieManager.Const_awselb),KD.cookie.write(KDCookieManager.Const_awselb,a,i));var r=KDCookieManager.getAspNetSessionId();KD.IsNullOrWhiteSpace(r)||KD.cookie.write(KDCookieManager.Const_aspnetsessionkey,r,i),KD.cookie.clear(KDCookieManager.Const_sessionid,i),KD.cookie.write(KDCookieManager.Const_sessionid,KDCookieManager.getKDSessionId(),i)},writeToDocument:function(){var e=KDCookieManager.getAspNetSessionId();KD.IsNullOrWhiteSpace(e)||(document.cookie=KD.format("{0}={1}",KDCookieManager.Const_aspnetsessionkey,e));var t=KDCookieManager.getKDSessionId();KD.IsNullOrWhiteSpace(t)||(document.cookie=KD.format("{0}={1}",KDCookieManager.Const_sessionid,t));var n=KDCookieManager.getAWSELB();n&&(document.cookie=KD.format("{0}={1}",KDCookieManager.Const_awselb,n))}},window.KDCookieManager=KDCookieManager}(),function(){function e(e,t){for(var n="",i="",a=e?e.serviceName||"":"",r=e?e.parameters||[]:[],o=void 0,s=0;s<r.length;s++)if("ap1"==r[s].key)i=r[s].value;else if("ap2"==r[s].key)n=r[s].value;else if("ap3"==r[s].key){o=r[s].value;break}var l={status:t,pageId:i,methodName:n,serviceName:a,txtParams:o};return l}KDServiceClient=function(){this.baseUrl=KD.getUrlRoot()},KDServiceClient.getTxtParameters=function(e){for(var t=new Array,n=1;n<e.length;n++){var i=new Object;i.key="ap"+(n-1),void 0===e[n]?i.value=null:i.value=e[n],t.push(i)}return t},KDServiceClient.getContentType=function(){var e="text/json";return KD.isFirefox()&&(e="application/x-www-form-urlencoded"),e},KDServiceClient.compressApx=function(e){var t=e;if(ClientAppProxy.isCompressedApx())for(var n in t){var i=t[n];KD.isString(i)&&KD.isRunInForIn(n,t)&&(KD.equalsIgnoreCase((n||"__").substr(0,2),"ap")||KD.equalsIgnoreCase(n,"forminfo"))&&(t[n]=KD.urlEncodeComponent(KD.compress(KD.urlEncodeComponent(i))))}return t},KDServiceClient.runRequestQueue=function(e){var t=(new Date).getTime(),n=KDServiceClient.reqQueue=KDServiceClient.reqQueue||{items:[],isRunning:!1,lastReqTime:t,limitToReset:6e4,next:function(){var e=KDServiceClient.reqQueue;e.items.length>0&&(e.isRunning=!1,KDServiceClient.runRequestQueue())}};if(e?n.items.push(e):0==n.items.length&&(n.isRunning=!1),n.isRunning&&t-(n.lastReqTime||0)>n.limitToReset&&(n.isRunning=!1),!n.isRunning&&n.items.length>0){var i=n.items.shift(0,1);n.isRunning=!0,n.lastReqTime=t,i.scope.doPostAsyncCore.call(i.scope,i.uri,i.txtParams,i.request)}return n},KDServiceClient.isSeqRequest=function(){var e=!(0==KD.getConnectConfig().HTMLSeqReqEnabled||KD.equalsIgnoreCase("false",KD.getConnectConfig().HTMLSeqReqEnabled));return e},KDServiceClient.beforeLogoff=function(e){if(KDServiceClient.isSeqRequest()){KD.getConnectConfig().HTMLSeqReqEnabled=!1;var t=(new Date).getTime(),n=KDServiceClient.reqQueue||{};n.isRunning=!0,n.lastReqTime=t,KD.delayInvoke(function(){KD.isFunction(e)&&e()},200)}else KD.isFunction(e)&&e()},KDServiceClient.prototype={executeService:function(e){e.url=this.baseUrl+"/"+e.serviceName+"."+e.methodName+".common.kdsvc";var t=KDServiceClient.getTxtParameters(arguments);e.parameters=t,this.doExecuteAsync(e)},executeServiceByUrl:function(e){var t=KDServiceClient.getTxtParameters(arguments);e.parameters=t,this.doExecuteAsync(e)},doExecuteAsync:function(e){for(var t=new Object,n=e.parameters,i=0;i<n.length;i++)if("string"==typeof n[i].value){var a=n[i].value;t[n[i].key]=a}else{var a=JSON.stringify(n[i].value);t[n[i].key]=a}t.nonce="",t.v="1.0",t.format="1",t.sign="",t.timestamp=JSON.stringify(new Date),t.compressed=e.compressed,t.compressedapx=ClientAppProxy.isCompressedApx(),t.useragent="KD.HTML5.GZIP";var r=JSON.stringify(KD.getClientInfo());t.clientinfo=r,t.forminfo=JSON.stringify(KDServiceClient.getFormInfo(e)),1==KD.IsHtml5LoginForSilverlight&&(t.useragent="Silverlight AppDomain"),this.doPostAsync(e.url,t,e)},doSimulationAttack:function(e){if(ClientAppProxy.isSimulationAttack){ClientAppProxy.simulationAttackList||(ClientAppProxy.simulationAttackList=['><img src=x onerror=alert("xss");>',"<media location=x onload = alert(1);>",'<script>alert("sss");</script>','<iframe href="www.baidu.com"/>','alter(document.cookie.get("aaa"))']),ClientAppProxy.simulationAttackParamList||(ClientAppProxy.simulationAttackParamList=["ap0","ap1","ap2","ap3","ap4","ap5","ap6","format","clientinfo","useragent","v"]);var t=ClientAppProxy.simulationAttackParamList[ClientAppProxy.simulationAttackCurParam||0],n=ClientAppProxy.simulationAttackList[ClientAppProxy.simulationAttackTime||0];e[t]&&(e[t]=e[t]+n),ClientAppProxy.simulationAttackTime=((ClientAppProxy.simulationAttackTime||0)+1)%ClientAppProxy.simulationAttackList.length,ClientAppProxy.simulationAttackCurParam=((ClientAppProxy.simulationAttackCurParam||0)+1)%ClientAppProxy.simulationAttackParamList.length}},doPostAsync:function(e,t,n){var i=KDServiceClient.isSeqRequest();if(i){var a={scope:this,uri:e,txtParams:t,request:n};KDServiceClient.runRequestQueue(a)}else this.doPostAsyncCore(e,t,n)},doPostAsyncCore:function(t,n,i){var a=i;this.doSimulationAttack(n);var r=JSON.stringify(n),o=KDServiceClient.fetchBizMethod(i.methodName,n);n=KDServiceClient.compressApx(n);var s=JSON.stringify(n);KDServiceClient.updateLastTime(o,n);var l=KD.isIndex()&&t.indexOf("Kingdee.BOS.ServiceFacade.ServicesStub.ClienterService.GetServerCommonConfig.common.kdsvc")>0,c=KD.getReqBETimeString(),d=i.csrfToken||"",u=KDServiceClient.getRequestBizInfo(i)||"";$.ajax({url:t,async:void 0==i.async||i.async,data:KD.isFirefox()?n:s,type:i.type||"Post",contentType:KDServiceClient.getContentType(),beforeSend:function(e){e.setRequestHeader(KDCookieManager.Const_sessionid,KDCookieManager.getKDSessionId()),d&&e.setRequestHeader("CSRF-Token",d),u&&e.setRequestHeader("KDBIZ-Info",u),KDCookieManager.setSessions(l);var t=KD.cookie.read("Theme");(!t||KD.checkChinese(t))&&(t="standard",KD.cookie.write("Theme",t)),e.setRequestHeader("Theme",t)},jsonpCallback:function(){},success:function(i,s,l){if(KDServiceClient.isIdle(a),"string"==typeof i&&0==(i||"").indexOf("response_error"))return n.uri=t,n.debugMessage=KDServiceClient.debugMessage,KDServiceClient.writeReqLog(r,i,o,c),i=i.replace(/\n/g,"<br/>").replace(/\r\n/g,"<br/>").replace(/\\r\\n/g,"<br/>"),void(a.response_error?a.response_error.call(a.scope||a,i):KDMessageBox.show({sourceClass:"",sourceMethod:o,type:KDMessageBox.KDMesBoxType.Error,msg:"response_error",description:i}));var d=i;if(KDServiceClient.isCompressData(i))try{d=KD.utf8Decode(KD.decompress(i))}catch(u){d=i}n.uri=t,n.debugMessage=KDServiceClient.debugMessage,KDServiceClient.writeReqLog(r,d,o,c);var g=e(a,s);a.callback.call(a.scope||a,d,g,l),KDServiceClient.runRequestQueue().next()},error:function(e,i,r){n.uri=t,n.debugMessage=KDServiceClient.debugMessage;var s=[{actionname:"showConfirm",params:[{title:"",msg:e?KD.getReponseHttpCodeTipMessage(e.status):KD.format(ResManager.LoadKDString("未找到远程服务器或服务器强制中断请求! [{0}]","0025710000008513"),n.uri),option:0,msgType:KDMessageBox.KDMesBoxType.Warning}]}];KDServiceClient.writeReqLog(JSON.stringify(n),KD.stringify(s),o,c);var l=a.scope&&a.scope.errcallback?a.scope.errcallback:a.errcallback,d=a.scope?a.scope:a;d&&l.call(d,KD.stringify(s),i,r),KDServiceClient.runRequestQueue().next()}})}},$.extend(KDServiceClient,{IdleMin:10,getHttpWatchUrl:function(e){var t=KD.format("../help/httpwatcher/index.html{0}&token={1}",(KD.getConnectConfig()||{}).resVer||"?ver=1",e);return t},ignoreUpdateLastTimeMethods:{TimerElapsed:!0,QueryProgressValue:{ignoreUpdateLastTime:!0},CustomEvents:{smartRobotCircleReq:!0,smartRobotCircleMsg:!0},DoKDMessageConcentratorData:!0,CommitChildFormData:!0},getCSRFToken:function(e,t,n){var i="",a=16,r=e||"",o=t||"";if(!KD.isString(o)){var s=o||{};o=s.pageid||s.pageId||""}if(KD.isString(o)||(o=""),KD.equalsIgnoreCase("CallByUrl",r)){var l=(KD.isString(n)?n:"")||"",c=l.split("?"),d=c.length>1?c[1]:c[0],u=d.split("&");for(var g in u){var p=u[g],c=(p||"").split(/=/g);if(KD.isString(p)&&KD.equalsIgnoreCase("pageid",c[0]||"")){o=c[1]||"";break}}}if(!KD.equalsIgnoreCase("MainPageId",o)){var f=o.replace(/-/g,""),h=f.length>a?a:f.length;f=f.substr(0,h);var m=KDServiceClient.getNonce()+"&"+f+"&"+(new Date).getTime().toString();m=KD.base64Encode(KD.utf8Encode(m)),i=m}return i},getNonce:function(){for(var e=6,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",i=e;i>0;--i)n+=t[Math.floor(Math.random()*t.length)];return n},showWatcherPop:function(e){var t=KDServiceClient.getHttpWatchUrl(e);KDServiceClient.logWatcher=KD.openPage(t,"_newwindow"," ")},showWatcher:function(e){if($("#watchersh").length>0){var t=$("#watchersh").data("kendoWindow"),n=t.isMinimized();return void(n?t.open():t.minimize())}var i=KDServiceClient.getHttpWatchUrl(e);$(document.body).append('<div class="kd-httpwatcher"><div id="watchersh"></div></div>'),$("#watchersh").kendoWindow({actions:["Minimize","Maximize","Close"],content:i,pinned:!0,scrollable:!1,height:750,width:650,title:ResManager.LoadKDString("http数据监控","0025710000004015"),position:{top:20,left:10},refresh:function(e){try{KDServiceClient.logWatcher&&KDServiceClient.logWatcher.initSplitter&&KDServiceClient.logWatcher.initSplitter()}catch(t){console&&console.log&&console.log(t.message,t.stack)}},iframe:!0,close:function(e){return KDServiceClient.logwatcherClearLog(),setTimeout(function(){var e=$("#watchersh"),t=e.data&&e.data("kendoWindow");t&&t.destroy&&t.destroy(),e.remove(),delete KDServiceClient.logWatcher},300),!0}}),$("#watchersh").data("kendoWindow").minimize(),KDServiceClient.logWatcher=$(".k-content-frame")[0].contentWindow},fetchBizMethod:function(e,t){var n="";try{if("CallByUrl"==e){var i=t.ap0,a=i.indexOf("methodname=")+"methodname=".length,r=i.substring(a).indexOf("&");n=t.ap0.substring(a).substr(0,r)+"."+e}else n="Call"==e?t.ap2:e}catch(o){n=e}return n},registerIgnoreUpdateTime:function(e,t){var n=e?KDServiceClient.ignoreUpdateLastTimeMethods[e]:void 0;KD.isEmpty(n)&&(n=t?{}:!0),t&&!KD.isObject(n)&&(n={},n[e]=!0),t&&(n[t]=!0),KDServiceClient.ignoreUpdateLastTimeMethods[e]=n},isIgnoreUpdateLastTime:function(e){var t=!1,n=e.methodName,i=e.txtParams,a=n?KDServiceClient.ignoreUpdateLastTimeMethods[n]:void 0;if(!KD.isEmpty(a))if(t=!1,1==a)t=!0;else if(KD.isObject(a)){var r=KD.isArray(i)?i:KD.parseObject(i.ap3||[]),o=KD.isArray(r)&&r.length>1?r[1]||"":n,s=KD.isArray(r)&&r.length>3?r[3]||"":n;o&&1==a[o]?t=!0:"QueryProgressValue"==n&&1==a[s]&&(t=!0)}return t},updateLastTime:function(e,t){var n={methodName:e,txtParams:t};KDServiceClient.isIgnoreUpdateLastTime(n)||(KDServiceClient.LastReqTime=KDServiceClient.getNowMinutes())},getNowMinutes:function(){var e=0,t=new Date;if($.isFunction(t.getHours)){var n=t.getHours(),i=t.getMinutes(),a=t.getSeconds();e=60*n+i+a/60}return e},setIdleMin:function(e){try{KDServiceClient.IdleMin=(e||300)/60}catch(t){KDServiceClient.IdleMin=5}},isIdle:function(e){var t=!1,n=KDServiceClient.getNowMinutes(),i=KDServiceClient.LastReqTime,a=n-i;t=a>=KDServiceClient.IdleMin;var r={timeoutInfo:{escapeMin:a.toFixed(3),isIdle:t,last:i.toFixed(3),now:n.toFixed(3),idleMin:KDServiceClient.IdleMin}};return KDServiceClient.debugMessage=KD.stringify(r),t},isCompressData:function(e){var t="H4sIAAAAAAAEA";return e.length>t.length&&e.substr(0,t.length)==t},logwatcherWriteLog:function(e,t){try{var n=KDServiceClient.logWatcher,i={message:KD.isString(e)?e:KD.stringify(e),description:KD.isString(t)?t:KD.stringify(t),invokeMth:"writeLog"};KD.equalsIgnoreCase(typeof n.postMessage,"function")?n.postMessage(i,"*"):n.writeLog&&n.writeLog(e,t)}catch(a){console&&console.log&&console.log(a.message,a.stack)}},logwatcherWriteReqLog:function(e,t,n,i,a){try{var r=KDServiceClient.logWatcher,o={message:KD.isString(e)?e:KD.stringify(e),description:KD.isString(t)?t:KD.stringify(t),method:n,reqTime:i,endTime:a,invokeMth:"writeReqLog"};KD.equalsIgnoreCase(typeof r.postMessage,"function")?r.postMessage(o,"*"):r.writeReqLog&&r.writeReqLog(e,t,n,i,a)}catch(s){console&&console.log&&console.log(s.message,s.stack)}},logwatcherClearLog:function(){try{var e=KDServiceClient.logWatcher,t={invokeMth:"clearLog"};KD.equalsIgnoreCase(typeof e.postMessage,"function")?e.postMessage(t,"*"):e.clearLog&&e.clearLog()}catch(n){console&&console.log&&console.log(n.message,n.stack)}},writeLog:function(e,t){try{var n=this,i=KDServiceClient.logWatcher;if(!i||i.closed){delete i,delete KDServiceClient.logWatcher,this.showWatcher();var a=setTimeout(function(){clearTimeout(a),n.logwatcherWriteLog(e,t)},300)}else n.logwatcherWriteLog(e,t)}catch(r){console&&console.log&&console.log(r.message,r.stack)}},writeReqLog:function(e,t,n,i){try{var a=this,r=KDServiceClient.logWatcher,o=15e4;if(r)if(r.closed)delete KDServiceClient.logWatcher;else{var s=KD.getReqBETimeString(i),l=(e||"").length,c=(t||"").length;l>o&&(e=KD.format(" Posted data is out of {0} kb. \r\n length = {1} kb",o/1e3,l/1e3)),c>o&&(t=KD.format(" Received data is out of {0} kb. \r\n length = {1} kb",o/1e3,c/1e3)),a.logwatcherWriteReqLog(KD.htmlUtil.encode(e),KD.htmlUtil.encode(t),KD.htmlUtil.encode(n),i,s)}}catch(d){console&&console.log&&console.log(d.message,d.stack)}},getFormInfo:function(e){var t={};try{var n=(e||{}).scope||{};t=KD.isFunction(n.getFormId)?{scope:n.getFormId.call(n)}:KD.isEmpty(n[0])?{scope:"all"}:{scope:KD.format("{0}_{1}",n[0].tagName,n[0].id)}}catch(i){t={}}return t},getRequestBizInfo:function(e){var t={};try{var n=(e||{}).scope||{};void 0===n.dformConfig&&KD.isFunction(n.getFormProxy)&&(n=n.getFormProxy.call(n));var i=(e||{}).parameters||[],a=(e||{}).methodName||"",r=n.dformConfig||{},o=r.serviceName||"",s=r.loadUrl||"",l=r.formid||"",c=(i.length>2?(i[2]||{}).value:"")||a||"";if(KD.equalsIgnoreCase(c,"CallByUrl")){var d=(i[0]||{}).value||"",u=new RegExp(/methodname\=[\w|W^&]{1,}\&/);c=(u.exec(d)[0]||"").substr("methodname=".length).replace("&","")}if(/get[a-z,A-Z,0-9]{0,}metadata/i.test(c)){var g="servicename=",p=(s.match("[^|&]"+g+"([^&]*)(&|$)")[0]||"").replace(/\&/g,"");o=p.substr(g.length+1)}if(!o){var f=((e||{}).url||"").split("/");f=(f[f.length-1]||"").split(".common.kdsvc"),f=(f[0]||"").split("."),o=f.length>1?f[f.length-2]:o,a=f.length>0?f[f.length-1]:a}l&&(t.t=l),t.m=t.t?c:a,o&&(t.s=o)}catch(h){}finally{t.sd=t.sd||KD.getSubDomainName(),t.c="HTML5"}return KD.stringify(t)}})}(),LoginInfo=function(){},LoginInfo.prototype={Username:"",Password:"",AcctID:"",Lcid:"",AuthenticateType:"",ValidationCode:"",EncyptType:1,PasswordIsEncrypted:!1},ClienterServiceProxy=function(){},ClienterServiceProxy.prototype={GetServerCommonConfig:function(e){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.ClienterService",e.methodName="GetServerCommonConfig";var t=new KDServiceClient;t.executeService.call(t,e,0)},FaceVerify:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.ClienterService",e.methodName="FaceVerify";var n=new KDServiceClient;n.executeService.call(n,e,t)},InitializeHtml5MainConsole:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.DataCenterService",e.methodName="InitializeHtml5MainConsoleInner";var n=new KDServiceClient;n.executeService.call(n,e,t,!0)},GetSMSVerificationCode:function(e,t,n,i){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="GetUserSmsCode";var a={u:n,p:i};beforeLogin(a,1),t.AuthSign="HTML5",t.CustomizationParameter=KD.stringify({a:f5});var r=new KDServiceClient;r.executeService.call(r,e,t)},IsSubscriptionRegControlPolicy:function(e){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.ClienterService",e.methodName="IsSubscriptionRegControlPolicy";var t=new KDServiceClient;t.executeService.call(t,e,0)}},UserServiceProxy=function(){},UserServiceProxy.prototype={ValidateUser:function(e,t){var n=t.Username,i=t.Password;delete t.Username,delete t.Password,e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService";var a={u:n,p:i};e.methodName="ValidateLoginInfo";var r=new KDServiceClient;beforeLogin(a,1),t.AuthSign="HTML5",KD.isIndex()&&!KD.isLoginByValidationCode()&&KDCookieManager.renewKDSession(),t.CustomizationParameter=KD.stringify({a:f5,c:t.CustomizationParameter}),r.executeService.call(r,e,"",t)},logout:function(e){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="Logout";var t=new KDServiceClient;t.executeService.call(t,e)},BuildSession:function(e,t){e.compressed=!1,e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="BuildSession";var n=new KDServiceClient,i=t.UserToken||t.Context&&t.Context.UserToken;n.executeService.call(n,e,i)},BuildSessionWithClient:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="BuildSessionWithClient";var n=new KDServiceClient,i=t.UserToken||t.Context&&t.Context.UserToken;n.executeService.call(n,e,i,t.clientInfo)},BuildSessionWithHtml5:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="BuildSessionWithHtml5";var n=new KDServiceClient,i=t.UserToken||t.Context&&t.Context.UserToken;n.executeService.call(n,e,i,t.clientInfo)},UserFaceCollection:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="UserFaceCollection";var n=new KDServiceClient;n.executeService.call(n,e,t.userToken,t.userid,t.convalue)},CheckAutherUser:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName="Kingdee.BOS.ServiceFacade.ServicesStub.User.UserService",e.methodName="CheckAutherUser";var n=new KDServiceClient;n.executeService.call(n,e,t.userName,t.dbid,t.clientType,t.lcid)}},AccountClientProxy=function(){},AccountClientProxy.prototype={serviceName:"Kingdee.BOS.ServiceFacade.ServicesStub.Account.AccountService",getDataCenterList:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.serviceName=this.serviceName;var n=new KDServiceClient,i=KD.getQueryString("tenantid",void 0,!1);KD.isManagementSite()?(e.methodName="GetManagementDataCenterList",t=4,n.executeService.call(n,e,t)):i?(e.methodName="GetDataCenterListByTenanID",n.executeService.call(n,e,i,t)):(e.methodName="GetDataCenterList",n.executeService.call(n,e,t))},getDataCenterLoginLanguages:function(e,t,n,i,a){e.compressed=ClientAppProxy.isCompressed(),e.serviceName=this.serviceName;var r=new KDServiceClient;switch(n){case DataBaseCategory.ManagementCenter:e.methodName="GetManageDataCenterLoginLanguages",r.executeService.call(r,e,t);break;case DataBaseCategory.MultiLanguageCenter:e.methodName="GetMultilangDataCenterLoginLanguages",r.executeService.call(r,e,t);break;default:e.methodName="GetDataCenterLoginLanguages",r.executeService.call(r,e,i,a,t)}},getValidationCodeImageByte:function(e){e.compressed=ClientAppProxy.isCompressed(),e.methodName="GetValidationCodeImageByte",e.serviceName=this.serviceName;var t=new KDServiceClient;KD.isIndex()&&KDCookieManager.renewKDSession(),t.executeService.call(t,e)},getValidationCodeObject:function(e){e.compressed=ClientAppProxy.serverConfig?ClientAppProxy.serverConfig.SL_Http_Compressed:!1,e.methodName="GetVImageInfo4CookieOnly",e.serviceName=this.serviceName;var t=new KDServiceClient;KD.isIndex()&&KDCookieManager.renewKDSession(),t.executeService.call(t,e)},getDataCenterDBLanguages:function(e,t,n,i,a,r){e.compressed=ClientAppProxy.isCompressed(),e.methodName="GetDataCenterDBLanguages",e.serviceName=this.serviceName;var o=new KDServiceClient;o.executeService.call(o,e,t,n,i,a,r)},getDataCenterDBStatus:function(e,t,n,i,a){e.compressed=ClientAppProxy.isCompressed(),e.methodName="GetDataCenterDBStatus",e.serviceName=this.serviceName;var r=new KDServiceClient;r.executeService.call(r,e,t,n,i,a)}},DynamicFormServiceProxy=function(){},DynamicFormServiceProxy.prototype={serviceName:"Kingdee.BOS.ServiceFacade.ServicesStub.DynamicForm.DynamicFormService",callByUrl:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.methodName="CallByUrl",e.serviceName=this.serviceName;var n=t;e.csrfToken=KDServiceClient.getCSRFToken("CallByUrl","",n);var i=new KDServiceClient;i.executeService.call(i,e,n)},call:function(e,t,n,i,a){e.compressed=ClientAppProxy.isCompressed(),e.methodName="Call",e.serviceName=this.serviceName,e.csrfToken=KDServiceClient.getCSRFToken("Call",n,"");var r=new KDServiceClient;r.executeService.call(r,e,t,n,i,a)},closeForm:function(e,t){var n=t[0]||"";e.compressed=ClientAppProxy.isCompressed(),e.methodName="CloseForm",e.serviceName=this.serviceName,e.async=!1,e.csrfToken=KDServiceClient.getCSRFToken("CloseForm",n,"");var i=new KDServiceClient;i.executeService.call(i,e,t)}},HTMLFormHandlerProxy=function(){},HTMLFormHandlerProxy.prototype={ValidateUser:function(e,t){e.compressed=!1;var n=ClientAppProxy.serverConfig?ClientAppProxy.serverConfig.LoginEntryRole:"";n=n||(e&&e.scope?e.scope.entryrole:""),n=n?n.toLocaleLowerCase():n,t.EntryRole=n;var i=null,a=KD.entryrolePlugins.getPlugin(n);a&&$.isFunction(a.getUserServiceProxy)&&(i=a.getUserServiceProxy.call(a)),i&&$.isFunction(i.ValidateUser)||(i=new UserServiceProxy),i.ValidateUser(e,t)}},ReportDataProxy=function(){},ReportDataProxy.prototype={serviceName:"Kingdee.BOS.ServiceFacade.ServicesStub.DynamicForm.DynamicFormService",getNoteReport:function(e,t){var n=t.printConfig;e.compressed=ClientAppProxy.isCompressed(),e.methodName="call",e.serviceName=this.serviceName,e.url=KD.getUrlRoot()+"/Service.aspx";var i=new KDServiceClient,a=n.pageID||n.pageId||"",r=n.printJobId||"",o=n.start||0,s=n.pageSize||20,l=n.action||"",c=t.dataMethod||"GetReport";e.csrfToken=KDServiceClient.getCSRFToken(c,a,""),i.executeService.call(i,e,"NotePrintService",a,c,[a,r,o,s,l])},getListReport:function(e,t){var n=t.printConfig,i=t.serviceName||"ListService";e.compressed=ClientAppProxy.isCompressed(),e.methodName="call",e.serviceName=this.serviceName,e.url=KD.getUrlRoot()+"/Service.aspx";var a=new KDServiceClient,r=n.pageId||n.pageID||"",o=(n.printJobId||"",n.start||0),s=n.pageSize||20,l=n.OperationKey||"PrintSync",c=t.dataMethod||"GetEntryPrintData";e.csrfToken=KDServiceClient.getCSRFToken(c,r,""),a.executeService.call(a,e,i,r,c,["FLIST",o,s,l])}},CPDemoClientProxy=function(){},CPDemoClientProxy.prototype={serviceName:"Kingdee.BOS.ServiceFacade.ServicesStub.DynamicForm.CDPDemoActionService",autoLogin:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.methodName="AutoLogin",e.serviceName=this.serviceName;var n=new KDServiceClient;n.executeService.call(n,e,t)}},StartAppServiceProxy=function(){},StartAppServiceProxy.prototype={serviceName:"Kingdee.BOS.ServiceFacade.ServicesStub.StartAppVerifySerivce",Verify:function(e,t){e.compressed=ClientAppProxy.isCompressed(),e.methodName="Verify",
e.serviceName=this.serviceName;var n=new KDServiceClient;n.executeService.call(n,e,t)}},define("KDServiceClient",["KD"],function(e){return function(){var t;return t||e.KDServiceClient}}(this)),KDRequest=function(){},KDRequest.serviceProxy=new DynamicFormServiceProxy,KDRequest.prototype={actionCacheId:"",url:"",serviceName:"",queryString:"",pageId:"",callback:null,errcallback:null,scope:null,showProgressBar:!1,progressBarTipInfo:"",progressShowType:"",released:!1,pushBatchCall:function(e){var t=this;t.getBatchCall().push(e)},getBatchCall:function(){var e=this;return e.batchCall=e.batchCall||[],e.batchCall},resetBatchCall:function(){var e=this;e.batchCall=[]},isEnableBatchRequest:function(){var e=this.isBatchRequest>1;return e},beginBatchRequest:function(){var e=this;KD.isSingleReq()?e.isBatchRequest=0:e.isBatchRequest=(e.isBatchRequest||0)+1},endBatchRequest:function(){var e=this;e.isBatchRequest=(e.isBatchRequest||0)-1;try{if((e.isBatchRequest||0)<=0){var t=e.getBatchCall();if(!KD.isEmpty(t)&&t.length>1){var n=t;e.resetBatchCall(),e.call("BatchCall",n)}else if(1==t.length){var i=t[0];e.resetBatchCall(),e.call2(i.methodname,i.async,i.param)}}}catch(a){KD.writeLog(a)}finally{}},callByUrl:function(){var e=new Object;e.callback=this.callback,e.errcallback=this.errcallback,e.scope=this.scope,KDRequest.serviceProxy.callByUrl(e,this.url)},syncCall:function(e){var t=this.getParamFromArgument(arguments);this.callByParaArray(e,!1,t)},call:function(e){var t=this.getParamFromArgument(arguments);this.callByParaArray(e,!0,t)},closeForm:function(e){var t=new Object;t.callback=this.callback,t.errcallback=this.errcallback,t.scope=this.scope,KDRequest.serviceProxy.closeForm(t,e)},callByParaArray:function(e,t,n){var i=this;if((i.isBatchRequest||0)>0){var a=new Object;a.methodname=e,a.async=void 0==t||t,a.param=n,i.pushBatchCall(a)}else i.call2(e,t,n)},getData:function(e){var t=new Object;t.callback=this.callback,t.errcallback=this.errcallback,t.scope=this.scope,KDRequest.serviceProxy.callByUrl(t,e)},getBeforeCalledEventArgs:function(e,t){return{MethodName:e,Parameter:t}},call2:function(e,t,n){var i=this,a=new Object;$(this).trigger("BeforeCalled",i.getBeforeCalledEventArgs(e,n)),$.extend(a,{async:void 0==t||t,callback:this.callback,errcallback:this.errcallback,scope:this.scope}),KDRequest.serviceProxy.call(a,this.serviceName,this.pageId,e,n)},getParamFromArgument:function(e){var t=new Array;if(null!=e){for(var n=1;n<e.length;n++)void 0===e[n]?t.push(null):t.push(e[n]);return t}},bindBeforeCalledEvent:function(e){KD.isFunction(e)&&$(this).bind("BeforeCalled",e)}},define("KDRequest",["KDServiceClient","KD"],function(e){return function(){var t;return t||e.kdmain}}(this)),ShowFormType={FORM:0,LIST:1},LookUpLikeMatchType={LeftMatch:1,RightMatch:2,BothMatch:3},ClientAppProxy=function(){},function(e){var t=function(t,n){var i=t&&e.serverConfig?"true"==(e.serverConfig[t]||"").toLowerCase():void 0===n?!0:n;return i};$.extend(e,{C_DefTimeout:1800,C_MinIdleTimeOut:600,C_MinHearbeat:10,C_DefHearbeat:300,C_IdleTimeOfHearbeat:1,isCompressed:function(){var e=!KD.equalsIgnoreCase(KD.getConnectConfig().compressed,"false");return e},isCompressedApx:function(){var t=e.isCompressed()?!KD.equalsIgnoreCase(KD.getConnectConfig().compressedapx,"false"):!1;return KD.isFunction(KD.getCompressor())||(t=!1),t},isResponseUnzip:function(){var e=t("ResponseUnzip",!0);return e},isInputBlock:function(){var e=t("IsInputBlock",!0);return e},isShowLoggedInMessage:function(){var e=t("IsShowLoggedInMessage",!1);return e},isLoginVaildCookieTip:function(){var e=t("IsLoginVaildCookieTip",!1);return e},fireUserBehavior:function(t,n,i,a){var r=KD.CONST.CustomEventName.PutUserBehavior,o={};try{if(KD.equalsIgnoreCase(KD.getConnectConfig().sendUserBehaviorData+"","false"))return;if(KD.isEmpty(t)){var s=e.Current.getRootForm();t=KD.isFunction((s||{}).getPageId)?s.getPageId():null}if(!KD.isEmpty(t)){var l=e.Current.getAliveForm(t);l&&(o.opkey=KD.format("{0}{1}",n,i?KD.format(".{0}",i):""),o.opname=a,l.fireCustomEventsNoData.call(l,r,r,KD.stringify(o)))}}catch(c){KD.writeLog(KD.format("{0},{1}",n,i,a),c.message,!0)}}})}(ClientAppProxy),function(e){var t=function(t){for(var n=$.isPlainObject(t)?e.base64Encode(t):t,i="",a=n.length,r=95,o=a%r,s=0;a>s;s++){var l=n.charCodeAt(s),c=l-o;32>c?c+=r:c>126&&(c-=r),i+=String.fromCharCode(c)}return e.base64Encode(i)};beforeLogin=function(n,i){var a=window,r=i||0;a[e.format("f{0}",4+r)]=t(n)};var n=function(t,n){for(var i=e.urlEncode(t),a="",r=i.length,o=95,s=(e.getStrCharFlag(n)+r)%o,l=0;r>l;l++){var c=i.charCodeAt(l),d=c-s;32>d?d+=o:d>126&&(d-=o),a+=String.fromCharCode(d)}return e.base64Encode(a)};beforeTransForm=function(t,i){var a=window,r=i||0,o=n(e.stringify(t),t.key);a[e.format("C{0}.S{1}",2+r,3+r)]=o},e.getStrCharFlag=function(t){var n=31;if(!e.isEmpty(t)){for(var i=0;i<t.length;i++){var a=t.substr(i,1);n+=a.charCodeAt()}n%=126}return n}}(KD),ClientAppProxy.prototype={defaultLocalId:2052,logoff:null,rootForm:null,aliveForms:{},IdleTimeout:ClientAppProxy.C_DefTimeout,IsPreTimeOutLogoffTip:!1,lastRequestTime:new Date,_clientUserParamsSetting:null,_messageConcentrator:null,IsLookupLikeMatch:!1,IsQingJSRegister:!1,AllowUpLoadFileType:"",IsTableVerticalNoLines:!1,NumFieldRPTakeFormat:void 0,ImgFileEnableCompress:!1,LineTipsDisplayRule:"",tipsDelayMillisec:0,setLogoffPage:function(e,t){var n=e||"index.aspx";void 0==t&&(t="");var i=[],a=(n||"").indexOf("?")>0?"&":"?";KD.isDebug()&&i.push("isDebug=true"),(t||"").replace(/\s/g,"")&&i.push("EntryRole="+t),this.logoffPage=n+(i.length?a:"");for(var r=0;r<i.length;r++)this.logoffPage+=i[r]+(r<i.length-1?"&":"")},getLogoffPage:function(){return this.logoffPage||this.setLogoffPage("index.aspx"),this.logoffPage},getRootForm:function(){return this.rootForm},getIsNotLoginUserByHistory:function(){return ClientAppProxy.serverConfig&&void 0!=ClientAppProxy.serverConfig.IsNotLoginUserByHistory?"true"==ClientAppProxy.serverConfig.IsNotLoginUserByHistory:!1},getAliveForm:function(e){return this.aliveForms[e]},getAliveForms:function(e){var t=[];for(var n in this.aliveForms){var i=this.aliveForms[n];i&&i.dformConfig&&KD.equalsIgnoreCase(e,i.dformConfig.formid)&&t.push(i)}return t},getLocals:function(){if(this._locals="underfined"){if(!(null!=this.CTX&&null!=this.CTX.UseLanguages&&this.CTX.UseLanguages.length>0))return[{lang:"2052",alias:"CN",text:ResManager.LoadKDString("简体中文","0025710030032331")},{lang:"1033",alias:"EN",text:"English"},{lang:"3076",alias:"TW",text:ResManager.LoadKDString("繁体中文","0025710030032332")}];var e=[];for(var t in this.CTX.UseLanguages){var n=this.CTX.UseLanguages[t],i={};i.lang=""+n.LocaleId,i.alias=n.Alias,i.text=n.LocaleName,e.push(i)}this._locals=e}return this._locals},getGolbalFontName:function(){if(KD.isEmpty(KD.golbalFontNames)){var e=KD.parseObject(KD.getConnectConfig().browserFontFamilys||KD.storage.getItem("KDGolbalFontFames")||"{}");ClientAppProxy.Current.setGolbalFontNames(e)}var t=KD.golbalFontNames=KD.golbalFontNames||{},n=ClientAppProxy.Current.defaultLocalId||2052,i=t[n];return i},setGolbalFontNames:function(e){var t=KD.golbalFontNames=KD.golbalFontNames||{};KD.isObject(e)&&!KD.isEmpty(e)&&$.extend(t,e),KD.isEmpty(t)||KD.storage.setItem("KDGolbalFontFames",JSON.stringify(t))},removeAliveForm:function(e){null!=this.rootForm&&this.rootForm.dformConfig.pageId==e&&(this.rootForm=null),delete this.aliveForms[e]},addAliveForm:function(e,t){if(null==this.rootForm&&(this.rootForm=t),this.aliveForms[e]){var n=this.aliveForms[e];delete this.aliveForms[e],n.doCloseWindow()}this.aliveForms[e]=t},setMainTab:function(e){this.mainTab||(this.mainTab=e)},getMainTab:function(){return this.mainTab},setMainConsoleForm:function(e){this.mainConsoleForm||(this.mainConsoleForm=e)},getMainConsoleForm:function(){return this.mainConsoleForm},releaseMainTab:function(){delete this.mainTab,delete this.mainConsoleForm},invokeTimeCounter:function(){if(this.AppTimeOutEnable){var e=KD.dateDiff(new Date,this.lastRequestTime,"second"),t=this.IdleTimeout-300;if(t>0&&e>=t&&e<this.IdleTimeout&&this.rootForm&&this.rootForm.logoffPreWarn){var n={TimeOutPoint:"LogOutPreFivePoint"};this.rootForm.logoffPreWarn(n),this.IsPreTimeOutLogoffTip=!0}return KD.writeLog("current idle::"+e+", timeout::"+this.IdleTimeout,"",!0),e>this.IdleTimeout?(KDMessageBox.remove(),this.IsPreTimeOutLogoffTip=!1,void(this.rootForm&&this.rootForm.logoff?this.rootForm.logoff({isTimeOut:!0,LoginRedirectUrl:"index.aspx"}):this.raiseLogoff(!0))):void(null!=this.rootForm&&this.rootForm.invokeTimeCounter.call(this.rootForm))}},resetTimeCount:function(){var e=this.timeoutHandler||ClientAppProxy.Current.timeoutHandler,t=window.clearTimeout;void 0!=e&&t(e)},setHearbeat:function(e){this.C_ClientTimerCount=e,KDServiceClient&&KDServiceClient.setIdleMin(this.C_ClientTimerCount*ClientAppProxy.C_IdleTimeOfHearbeat)},loadTimeoutConfig:function(e){var t=null!=e&&e.length>0?e[0]:null;this.IdleTimeout=t&&t.value?parseInt(t.value):ClientAppProxy.C_DefTimeout,this.IdleTimeout<ClientAppProxy.C_MinIdleTimeOut&&(this.IdleTimeout=ClientAppProxy.C_MinIdleTimeOut),this.AppTimeOutEnable=t.enabled||void 0===t.enabled,this.AppTimeOutEnable?(this.setHearbeat(t.hearbeat?t.hearbeat:ClientAppProxy.C_DefHearbeat),this.C_ClientTimerCount<ClientAppProxy.C_MinHearbeat&&this.setHearbeat(ClientAppProxy.C_MinHearbeat),null!=this.rootForm&&KD.getValue(t,"immediately",!0)&&this.rootForm.resetTimeCount()):(this.setHearbeat(2*this.IdleTimeout),this.rootForm&&KD.isFunction(this.rootForm.resetTimeCount)&&this.rootForm.resetTimeCount()),KD.getValue(t,"immediately",!0)&&this.startHearbeat()},startHearbeat:function(){try{ClientAppProxy.Current.resetTimeCount.call(ClientAppProxy.Current);var e=window.setTimeout;ClientAppProxy.Current.timeoutHandler=e(function(){ClientAppProxy.Current.resetTimeCount.call(ClientAppProxy.Current),ClientAppProxy.Current.invokeTimeCounter.call(ClientAppProxy.Current)},1e3*ClientAppProxy.Current.C_ClientTimerCount)}catch(t){ClientAppProxy.Current.resetTimeCount.call(ClientAppProxy.Current)}},updateLastReqTime:function(e,t){if(null!=e){var n=!1;if(KDServiceClient&&KDServiceClient.isIgnoreUpdateLastTime(t)&&(n=!0),!n)for(var i in e){var a=e[i],r=a.actionname;if(r&&"SETTIMEOUT"==r.toUpperCase()){n=!0;break}}n||(this.lastRequestTime=new Date)}},setWatermark:function(e,t){try{var n=KD.getConnectConfig(),i="GenuineLicense",a=n.LicenseType,r=e.el,o=(n.showGlobalWatermark||"0").toString(),s=e.config||n.globalWatermarkConfig||{},l=s.width||260,c=s.height||160,d=s.angle||-15,u=s.fontsize||12,g=s.opacity||.1,p=s.fontfamily||"",f=s.big_fontsize||16,h=s.lictext||"",m=s.watermarktext||"",v=void 0===s.showtype?o:KD.format("{0}",s.showtype);if((d>360||-360>d)&&(d=-15),(0>g||g>1)&&(g=.1),(16>l||l>screen.availWidth)&&(l=240),(16>c||c>screen.availHeight)&&(c=200),"0"==KD.format("{0}",a)&&(a=i),KD.equalsIgnoreCase(a,i)||(u=f),KD.equalsIgnoreCase(a,i)){if(KD.equalsIgnoreCase(v,"0")||KD.equalsIgnoreCase(v,"2"))return}else if(KD.equalsIgnoreCase(v,"2"))return;var y=function(e){KD.__curlicDescMaps=KD.__curlicDescMaps||{};var t=KD.__curlicDescMaps[e]||"";return t},D="",K="",C=y(a),k=(ClientAppProxy.Current.CTX||{}).UserName||"";(KD.equalsIgnoreCase(v,"0")||KD.equalsIgnoreCase(v,"2"))&&(k=""),K=a==i?KD.format("{0}",m||k):KD.format("{0} {1}",h||C,m||k);var b=$.extend({},s,{licType:a,dspDesc:K});D=KD.base64Encode(b);var w=function(e,t,n,i){var a="";try{var o=t,s=document.createElement("canvas");s.width=o,s.height=n;var l=s.getContext("2d");l.rotate(i*Math.PI/180),l.fillStyle="#000000",l.font=KD.format("{0}px {1}",u,p||r.css("fontFamily")||"Microsoft YaHei").replace(/\"/g,""),l.textAlign="start";var c=l.measureText(e).width,d=i/90*o,g=i/90*n,f=(o-c)/2+g,h=(n-u)/2-d;f=d>f?d:f,h=h>n?n-u:h;var m=c>.98*o;f=m?h*(i/90):f,l.fillText(e,f,h),l.restore(),a=s.toDataURL("image/png")}catch(v){a=""}return a};if(K&&r&&r.length>0){var S=KD.__curlicDescMaps[D]=KD.__curlicDescMaps[D]||w(K,l,c,d),x={"background-image":"url("+S+")",position:"absolute",opacity:g,top:0,left:0,height:"100%",width:"100%","pointer-events":"none"};t&&(x.position="fixed"),$(".kd-gbl-watermark",r).remove(),S&&$('<div class="kd-gbl-watermark">').css(x).appendTo(r),KD.delayInvoke(function(){ClientAppProxy.fireUserBehavior(null,"HTML5","GlobalWatermark","全局安全水印")},15e3)}}catch(_){KD.writeLog("ClientAppProxy.setWatermark() failure",_.message,!0)}},raiseLogoff:function(e,t,n){var i=new UserServiceProxy,a={sessionkey:"none",scope:this.rootForm,callback:function(e){try{}catch(i){}finally{KD.isFunction(n)&&(t?n.call(t):n())}},errcallback:function(){KD.isFunction(n)&&(t?n.call(t):n())}};i.logout(a),this.releaseMainTab(),KDLockedSystem.reset();var r=KD.getEntryRole(),o=KD.entryrolePlugins.getPlugin(r),s=!0;o&&$.isFunction(o.isDefaultLogoff)&&(s=o.isDefaultLogoff.call(o));var l=this.getMessageConcentrator();if(l&&l.StopTimer.call(l),s&&null!=this.logoff){var c=1==e;c?this.logoff(this,{isTimeOut:c,LoginRedirectUrl:"index.aspx"}):this.logoff(this,new Object)}},showWatcher:function(e){KDServiceClient&&KDServiceClient.showWatcher(e)},writeLog:function(e,t){KDServiceClient&&KDServiceClient.writeLog(e,t)},writeReqLog:function(e,t,n,i){KDServiceClient&&KDServiceClient.writeReqLog(e,t,n,i)},LookupLikeMatchType:LookUpLikeMatchType.LeftMatch,setLookupLikeMatchType:function(e){this.LookupLikeMatchType=e},setLookupLikeMatchTypeSilent:function(e){if(e=parseInt(e),this.LookupLikeMatchType!=e){this.LookupLikeMatchType=e;var t=this.rootForm;t&&t.fireEventNoData("CustomEvents","RootFormDefault","LookupLikeMatch",e,[])}},getLookupLikeMatchType:function(){return this.LookupLikeMatchType},getClientUserPaSetting:function(){var e="C"+ClientAppProxy.Current.CTX.UserName+"_"+ClientAppProxy.Current.CTX.UserId+"_"+ClientAppProxy.Current.CTX.DBid;return null==this._clientUserParamsSetting?this._clientUserParamsSetting=new ClientUserParamsSetting(e):this._clientUserParamsSetting.CurrentUsepre()!=e&&(this._clientUserParamsSetting=new ClientUserParamsSetting(e)),this._clientUserParamsSetting},getMessageConcentrator:function(){return null==this._messageConcentrator&&(this._messageConcentrator=new KDMessageConcentrator),this._messageConcentrator},getLineTipsDelayMillisec:function(){var e=this.LineTipsDisplayRule;switch(e){case"0":this.tipsDelayMillisec=0;break;case"1":this.tipsDelayMillisec=1200;break;case"2":this.tipsDelayMillisec=3e3;break;case"3":return this.tipsDelayMillisec=4,!1;default:this.tipsDelayMillisec=0}return this.tipsDelayMillisec},handlerLoginCustParam:function(){var e=KD.getConnectConfig()||{},t={};if(e.connectState&&KD.isObject(e.connectState)){var n=e.connectState.lcp;n&&KD.isObject(n)&&(t=n)}this.ImgFileEnableCompress=KD.getValue(t,"FImgFileCompress",!1),this.LineTipsDisplayRule=KD.getValue(t,"FSystemTipsRule","")},handlerUnload:function(){function e(){if(KD.IsF5RefreshToMainConsole()){if(KD.isDebug())return;var e=KD.storage.getItem(KD.CONST.F5RefreshEventParameterName);KD.storage.removeItem(KD.CONST.F5RefreshEventParameterName);var t=KD.isObject(e)?e:KD.parseObject(e);if(t){var n=t.isdispose;if(0==n)return}}var i=window.disposeData.disposeUrl,a="",r=$.extend({},window.disposeData||{});delete r.disposeUrl,ClientAppProxy.Current.writeReqLog(KD.stringify({ap0:r}),KD.stringify({message:"send."}),"Client DoDispose","");try{if(KD.isChrome()){a=navigator.sendBeacon(i,null);for(var o=(new Date).getTime();;)if((new Date).getTime()-o>100)break}else $.ajax({url:i,async:!1,beforeSend:function(e){e.setRequestHeader("Cookie","ASP.NET_SessionId="+window.disposeData.aspSid),e.setRequestHeader("kdservice-sessionid",window.disposeData.kdsvSid)},success:function(e,t,n){a=e},error:function(e,t,n){a=(e||{}).statusText||"error"}})}catch(s){}return a}var t=KD.getConnectConfig()||{};if(void 0!==t.userToken){var n=window.disposeData={};n.disposeUrl=KD.getUrlRoot()+"/Services/Dispose.ashx?usertoken="+t.userToken,n.aspSid=t.aspNetSessionId,n.kdsvSid=t.kdSessionId,n.userToken=t.userToken;var i=ClientAppProxy.prototype.raiseLogoff;ClientAppProxy.prototype.__raiseLogoff=i,ClientAppProxy.prototype.raiseLogoff=function(){var e=arguments;window.disposeData.svrLogoff=!0,KD.delayInvoke(function(){ClientAppProxy.prototype.__raiseLogoff.apply(ClientAppProxy.Current,e)},500,!0)};var a=function(e){if(!window.disposeData.svrLogoff){var t=ResManager.LoadKDString("要离开金蝶云星空页面吗？","0025710000005246")||" ";e.returnValue=t}},r=function(t){window.disposeData.svrLogoff||e(),delete window.disposeData};KD.storage.removeItem(KD.CONST.F5RefreshEventParameterName);var o=window;KD.isDForm()&&!KD.equalsIgnoreCase(KD.getConnectConfig().IsUnloadConfirm||"false","false")&&(o.addEventListener?o.addEventListener("beforeunload",a,!1):o.attachEvent&&o.attachEvent("beforeunload",a)),KD.isDForm()&&(o.addEventListener?o.addEventListener("unload",r,!1):o.attachEvent&&o.attachEvent("onunload",r))}}},ClientAppProxy.Current=new ClientAppProxy,ClientAppProxy.Current.IdleTimeout=ClientAppProxy.C_DefTimeout,ClientAppProxy.Current.AppTimeOutEnable=!0,ClientAppProxy.Current.lastRequestTime=new Date,ClientAppProxy.Current.handlerUnload(),ClientAppProxy.Current.handlerLoginCustParam(),$.extend(KD,{entryCellBtnClick:function(e){var t=ClientAppProxy.Current,n=t.getAliveForm.call(t,e.pageid);if(n){var i=JSON.stringify({key:e.key,row:e.row}),a=n.getControlProxy.call(n,e.entrykey);a&&void 0!=a.setFocusRowIndex&&a.setFocusRowIndex.call(a,e.row,!0),KD.getValue(e,"sync",!0)?n.fireSyncCustomEvents.call(n,e.entrykey,"EntryCellBtnClick",i):n.fireCustomEvents.call(n,e.entrykey,"EntryCellBtnClick",i)}},entryLargetextClick:function(e){var t=ClientAppProxy.Current,n=t.getAliveForm.call(t,e.pageid),i=n.getControlProxy.call(n,e.entrykey);i.setFocusRowIndex.call(i,e.row,!0),KD.delayInvoke(function(){var t=new FormManager,n=new ShowFormParameter("BOS_LargeTextEdit");n.CustomParams.FieldKey=e.key,n.CustomParams.AllowEdit=!1,n.CustomParams.parentPageId=e.pageid,t.ShowClientDynamicForm.call(t,n)},200)},entryLinkBtnClick:function(e,t){var n=ClientAppProxy.Current;if(KD.isString(e))try{e=KD.parseObject(e)}catch(i){e=KD.htmlUtil.decode(e),e=KD.parseObject(e)}if(!KD.isEmpty(e)){var a=n.getAliveForm.call(n,e.pageid);if(a){var r=a.getControlProxy.call(a,e.entrykey);r.setFocusRowIndex.call(r,e.row,!0),a.lockControl.call(a,r),KD.isEmpty(e.itemid)||KD.isEmpty(e.attrname)||r.el.find("#"+e.itemid).attr(e.attrname,"true"),KD.isEmpty(t)?KD.getValue(e,"sync",!0)?a.fireSyncEvent.call(a,"EntryButtonCellClick",e.entrykey,e.key,e.row):a.fireEvent.call(a,"EntryButtonCellClick",e.entrykey,e.key,e.row):KD.getValue(e,"sync",!0)?a.fireSyncEvent.call(a,"EntryButtonCellClickExt",e.entrykey,e.key,e.row,t):a.fireEvent.call(a,"EntryButtonCellClickExt",e.entrykey,e.key,e.row,t)}}},entryButtonClick:function(e,t){KD.entryLinkBtnClick(e,t)},entryPictureFileClick:function(e){var t=ClientAppProxy.Current;if("string"==typeof e)try{e=KD.parseObject(e)}catch(n){e=KD.htmlUtil.decode(e),e=KD.parseObject(e)}var i=t.getAliveForm.call(t,e.pageid);if(i){var a=i.getControlProxy.call(i,e.entrykey);if(e.key){var r=a.getStore(),o=null==r?null:r.getColumnDescriptor(e.key);if(o&&o.PictureFileClick){var s=window.event||arguments.callee.caller.arguments[0];e.target=s.currentTarget,o.PictureFileClick.call(o,e,event)}}}},entryPictureFieldHover:function(e){var t=ClientAppProxy.Current;if("string"==typeof e)try{e=KD.parseObject(e)}catch(n){e=KD.htmlUtil.decode(e),e=KD.parseObject(e)}var i=t.getAliveForm.call(t,e.pageid);if(i){i.currentPastePicItem={ctlbaseid:e.id,ctlKey:e.ctlkey,arg:e};var a=i.getControlProxy.call(i,e.entrykey);if(e.key){var r=a.getStore(),o=null==r?null:r.getColumnDescriptor(e.key);if(o){var s=window.event||arguments.callee.caller.arguments[0];e.target=s.currentTarget,o.PictureFileClick.call(o,e)}}}}}),ClientUserParamsSetting=function(e){this.CurrentUsepre=function(){return this.UserPre},this.UserPre=e,KD.IsNullOrWhiteSpace(this.UserPre)&&(this.UserPre=KD.Guid.NewGuid().ToString()),this.InitCurrentElemnt()},ClientUserParamsSetting.prototype={xmlFileName:"ClientUserParamsSetting",xmlPath:"",currentElement:null,RootElement:null,UserPre:"",InitCurrentElemnt:function(){if(null!=KD.storage.getStorage()){var e=KD.storage.getItem(this.xmlFileName);null==e?(this.RootElement=new Object,this.RootElement[this.UserPre]=new Object,KD.storage.setItem(this.xmlFileName,JSON.stringify(this.RootElement))):this.RootElement=KD.parseObject(e),this.currentElement=this.RootElement[this.UserPre]}},InitRootElemnt:function(){this.RootElement=KD.storage.getItem(this.xmlFileName),null==this.RootElement&&(this.RootElement=new Object,KD.storage.setItem(this.xmlFileName,JSON.stringify(this.RootElement)))},SetAttribute:function(e,t){this.SetAttributeOnly(e,t),this.SaveXmlFile()},SetAttributeOnly:function(e,t){null==this.RootElement&&this.InitCurrentElemnt(),null==this.currentElement&&(this.currentElement=new Object),this.currentElement[e]=t},GetAttribute:function(e){return null==this.RootElement&&this.InitCurrentElemnt(),null==this.currentElement?null:this.currentElement[e]},SaveXmlFile:function(){null==this.RootElement&&this.InitRootElemnt(),KD.storage.setItem(this.xmlFileName,JSON.stringify(this.RootElement))},ResetSaveByRootElment:function(e){return!0},SaveXmlFileByCurrentUser:function(e){return!0},LoadXmlStream:function(e){return!0}},KDMessageConcentrator=function(){function e(){i=setTimeout(function(){if(KD.dateDiff(new Date,o,"second")>n){var t=ClientAppProxy.Current.getRootForm();t&&t.fireDoKDMessageConcentratorDataNoPostData.call(t,"")}e()},1e3*t,"KDMessageConcentrator.getMesReqTimer()")}var t=60,n=10,i=null,a=!1,r=new Date,o=new Date,s={InvokeCloseAction:!0};return{registerIngorGetMessageEvent:function(e){s[e]=!0},IsGetMessage:function(){return a},StartTimer:function(){null==i&&e()},StopTimer:function(){null!=i&&(clearTimeout(i),i=null)},GetIsMessage:function(e){var t=e?s[e]:void 0;if(t)return a=!1;var i=new Date;return KD.dateDiff(i,r,"second")<n?(a=!1,this.StartTimer()):(a=!0,o=i),r=i,a}}},define("ClientAppProxy",["KD"],function(e){return function(){var t;return t||e.ClientAppProxy}}(this)),function(e){function t(t){return e.extend(this,e.fn.KDControlBase.prototype,e.fn.KDControlBase.defaults,t)}e.fn.KDControlBase=function(e){return t(e)},e.fn.KDControlBase.prototype={debug:!1,id:"",serverProxy:{},formProxy:{},metaData:{},content:e({}),addControl:function(e){e.appendTo(this.content)},getType:function(){return"KDControlBase"},loadConfig:function(e){KD.setAttachmentData(this,e),KD.layout.setAbsolute(this,e),this.config=e},metaHtml:"",ctIdKeyHolder:"{$this.ctId}",getMetaHtml:function(){var e=this.metaHtml.replace(this.ctIdKeyHolder,"ct_"+this.id);return e},setVisible:function(e){if(e||(this._height=this.css("height"),this._width=this.css("width"),this._padding=this.css("padding"),this._margin=this.css("margin")),void 0!=e&&"boolean"==typeof e){var t=e?"visible":"hidden",n=e?this._height:"0px",i=e?this._width:"0px",a=e?this._padding:"0px",r=e?this._margin:"0px";this.css({visibility:t,height:n,width:i,padding:a,margin:r})}},getId:function(){return this.id},setId:function(e){this.id=e},getProxy:function(){return this.proxy},getBaseId:function(){var e=this.getProxy();return e?e.getBaseId():"undefined_kdcontrolbase"},getConfig:function(){return this.config?this.config:{}},doLayout:function(){},setValue:function(e){var t=e;try{"string"!=typeof e&&(t=e.toString()),this.content?this.content.text(e):this.text(e)}catch(n){}},release:function(){this.remove&&this.remove()}},e.fn.KDControlBase.defaults={id:"",x:0,y:0,serverProxy:{},formProxy:{},metaData:{},metaHtml:"",debug:!1}}(jQuery),define("KDControlBase",["KD"],function(e){return function(){var t;return t||e.KDControlBase}}(this));var AuthenticationType=AuthenticationType||{DomainAuthentication:0,PwdAuthentication:1,DynamicPwdAuthentication:2,CAAuthentication:3,XuntongAuthentication:4,WeixinPublicAuthentication:5,WeixinEntAuthentication:6,CloudEntryAuthentication:7,IDECloudEntryAuthentication:8,SimplePassportAuthentication:9,YunZhiJiaAuthentication:10,YunZhiJiaDynamicPwdAuthentication:11,YunZhiJiaQRCodeAuther:12},LoginMethod={Normal:0,ByUserToken:1,SpecDataCenterId:2},qrcodeDivObject=null;window.vQRLifeCycle=1e3,window.isUserQRCodeNew=!1,window.isConnectYZJok=!1,window.cloudAccountTypeId="20",window.SMSVerifyTypeId="25",window.limitGetSMSIntervalCode=-1,window.lanErrRequestStr="",window.LicenseType=-1;var timer=null,checkTimer=null,__execContent=function(e,t){function n(){var t=e("#particles-js"),n={particles:{number:{value:70,density:{enable:!0,value_area:2e3}},color:{value:"#ffffff"},shape:{type:"circle",stroke:{width:0,color:"#000000"},polygon:{nb_sides:3},image:{src:"img/github.svg",width:100,height:100}},opacity:{value:.5,random:!1,anim:{enable:!0,speed:.07992007992007992,opacity_min:.1,sync:!1}},size:{value:5,random:!1,anim:{enable:!0,speed:9.744926547616142,size_min:.1,sync:!1}},line_linked:{enable:!0,distance:250,color:"#ECF0F1",opacity:.6,width:1},move:{enable:!0,speed:1,direction:"top-right",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:1042.21783956259,rotateY:1200}}},interactivity:{detect_on:"canvas",events:{onhover:{enable:!1,mode:"repulse"},onclick:{enable:!1,mode:"push"},resize:!0},modes:{grab:{distance:800,line_linked:{opacity:1}},bubble:{distance:800,size:40,duration:3,opacity:8,speed:3},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}}},retina_detect:!0};t.length>0&&window.particlesJS("particles-js",n)}function i(e,t){var n=!0,i=!1,a=KD.isEmpty(KD.getQueryString("EntryRole"))?"":KD.getQueryString("EntryRole");return(KD.equalsIgnoreCase(a,"srm")||KD.IsNullOrWhiteSpace(a))&&(i=!0),(!i||KD.isManagementSite()||1!=e&&e!=window.SMSVerifyTypeId&&!t)&&(n=!1),n}function a(){var t=KD.getConnectConfig()&&KD.getConnectConfig().IsPublicCloud;t?e("#divICPNo").css({display:"block","margin-top":"3px"}):(e("#divICPNo").css({display:"none"}),e("#divKDIntroInfo").css({"margin-top":"3px"}))}function r(){var e=KD.entryrolePlugins.getPlugin(KD.getEntryRole()),t=!0,n=!0;e&&KD.isFunction(e.isUseQRCode)&&(n=e.isUseQRCode.call(e));var i=KD.isManagementSite();return(i||!n)&&(t=!1),t}function o(){if(r()){var t=KD.getUrlSubRoot()+"/Kingdee.BOS.ServiceFacade.ServicesStub.QRCode.QRCodeService.GetQRCode.common.kdsvc",n=Date.parse(new Date);e.get(t,'{"timestamp": "'+n+'"}',function(t){var n=KD.parseObject(t);if(1==n.success){window.vQRAccessToken=n.data.token,window.vQRLifeCycle=n.data.expiretime<1e3?6e4:n.data.expiretime,window.dbId=n.dbid,window.appId=n.appid;var i=n.data.url;e("#yzjQRCode").attr("src",i)}else{var a=KD.format("<span class='qrcode-errreload active'><span></span><i class='linefirst'>{0}</i><i class='linesec'>{1}<i></span>",ResManager.LoadKDString("开通云之家","0991733000006701"),ResManager.LoadKDString("畅享二维码登录","0991733000006702"));e(".qr-wrap").find(".qrcode-reload").remove(),e(".qr-wrap").find(".qrcode-errreload").remove(),e(".qr-wrap").append(e(a));var i=KD.getUrlSubRoot()+"/images/biz/default/MainConsole/H5CardLayout/qrcode_grey.png";e("#yzjQRCode").attr("src",i),KD.writeLog("qrcode login error log:"+n.error)}})}}function s(t,n,i){r()&&(scanGuid=e(".scan-guid"),loginQrcode=e(".login-qrcode"),reload=e(".qrcode-reload"),loginQrcode.on("mouseenter",function(){return reload.hasClass("active")?!1:(e(this).addClass("active").animate({left:26},500),scanGuid.animate({right:6,opacity:1},500),!1)}),reload.on("click",function(){e(this).removeClass("active"),loginQrcode.animate({left:26},500),scanGuid.animate({right:6,opacity:1},500),window.isUserQRCodeNew||(clearTimeout(timer),o(),l(),c(t,n,null))}),l())}function l(){if(reload.addClass("active"),!window.isUserQRCodeNew){var e=function(){timer=KD.delayInvoke(e,window.vQRLifeCycle)};timer=KD.delayInvoke(e,window.vQRLifeCycle)}}function c(n,i,a){if(r()&&!(!X()||e("#yzjQRCode").next("span.qrcode-reload.active").length>0||e("#yzjQRCode").next("span.qrcode-errreload.active").length>0)){var o=KD.getUrlSubRoot()+"/Kingdee.BOS.ServiceFacade.ServicesStub.QRCode.QRCodeService.GetQRCodeTicket.common.kdsvc",s=Date.parse(new Date);e.post(o,'{"token": "'+window.vQRAccessToken+'","timestamp": "'+s+'"}',function(e){var i=KD.parseObject(e);return null==e?void(checkTimer=KD.delayInvoke(c,2e3,!0)):""==e?void(checkTimer=KD.delayInvoke(c,2e3,!0)):void(1==i.success?null!=i.data.ticket&&i.data.ticket!=t?(window.ticktId=i.data.ticket,u(n,qrcodeDivObject,null),d()):(alert(e.description),checkTimer=KD.delayInvoke(c,2e3,!0)):checkTimer=KD.delayInvoke(c,2e3,!0))})}}function d(){window.ticktId=null,window.appId=null,window.dbId=null,window.vQRAccessToken=null,window.vQRLifeCycle=1e3}function u(t,n,i){var a=new LoginInfo;e.extend(a,{EncyptType:1,PasswordIsEncrypted:!1,AuthenticateType:12,ClientInfo:KD.getClientInfo()});try{var r={sessionkey:KDCookieManager.getKDSessionId(),scope:n,response_error:function(e){var t={};"response_error:"==(e||"").substr(0,15)?(t=KD.parseObject((e||"").substr((e||"").indexOf("{"))),t={sourceClass:t.ClassName,sourceMethod:t.ExceptionMethod,msg:t.Message||(e||"").substr(30),description:e}):t={name:"",number:"",description:e},KD.Error.raise(t)},callback:function(e){var t=this;t.isAsyncJs=!1;try{var n="string"==typeof e?KD.parseObject(e):e;if(KDCookieManager.updateSessionId(n),1==KD.IsHtml5LoginForSilverlight)return void(t.ok&&t.ok.call(t,n));if(n.LoginResultType==KD.LoginResultType.Success){var i=function(){t.ok&&t.ok.call(t,n)};if(KD.isSameUTimeZone(n)||KD.getLocalConfiguration(n).NotShowUtcOffset)i();else{var a={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),number:"",msg:D(n),description:"",type:KDMessageBox.KDMesBoxType.Warning,button:KDMessageBox.KDMessageBoxButtons.YesNo,callback:function(e){e==KDMessageBox.KDDialogResult.Yes?i():E()}};KD.Error.raise(a)}}else K(n)?(t.isAsyncJs=!0,C(t,function(e,t){b.call(e,t)},n)):b.call(t,n)}catch(r){KD.writeError(r)}finally{t.isAsyncJs||KD.delayInvoke(function(){t.waiting.hide.call(t.waiting)},1e3)}},errcallback:function(e){var t=this;e||(e="return null error"),t.err&&t.err({msg:ResManager.LoadKDString("登录失败","0991733000004007"),type:KDMessageBox.KDMesBoxType.Error,description:e.responseText||e})}};a.Username="******",a.Password="******",a.AcctID=window.dbId,a.Lcid=2052,a.AppId=window.appId,a.OpenToken=window.ticktId;var l=new HTMLFormHandlerProxy;l.ValidateUser.call(l,r,a),d(),o(),s($this,n,null),c($this,n,null)}catch(u){KD.Error.raise({msg:"login error",description:u.toString()})}finally{}}function g(){e(".k-dropdown-wrap",e("#loginDBInfo")).css({border:"none",background:"#fff","text-align":"right","box-shadow":"none"}),e(".k-dropdown",e("#loginDBInfo")).css({border:"none",background:"#fff","box-shadow":"none"}),e(".k-dropdown-wrap",e("#divqrcodedatacenterinfo")).css({border:"none",background:"#fff","text-align":"right","box-shadow":"none"}),e(".k-dropdown",e("#divqrcodedatacenterinfo")).css({border:"none",background:"#fff","box-shadow":"none"})}function p(t){var n={user:"",acc:"",lan:"",ver:""};try{var i=KD.entryrolePlugins.getPlugin(t.entryrole),a=!0;i&&e.isFunction(i.isUseDefaultLoginUI)&&(a=i.isUseDefaultLoginUI.call(i));var r="",o=e("#language").data("kendoDropDownList").value(),s="",l=e("#user").val(),n={user:l,lan:o};if(a){var c=e("#datacenter");r=c.data("kendoDropDownList").value();var d=e("#verifyType");s=d.data("kendoDropDownList").value(),e.extend(n,{acc:r,ver:s})}i&&e.isFunction(i.beforeSaveCookies)&&i.beforeSaveCookies.call(i,n)}catch(u){}finally{KD.storage.setItem(KD.CONST.k3CloudLoginInfoKey,JSON.stringify(n))}}function f(t){var n={user:"",acc:"",lan:"",ver:""};try{var i=KD.storage.getItem(KD.CONST.k3CloudLoginInfoKey)||"{}",a=KD.parseObject(i);n=e.extend(n,a);var r=KD.entryrolePlugins.getPlugin(t.entryrole);r&&e.isFunction(r.afterLoadCookies)&&r.afterLoadCookies.call(r,n)}catch(o){}finally{t.__LoginInfo=n}}function h(){E()}function m(t,n,i){if("1"==KD.IsLoginManualInputDC()){var a=e("#inputDatacenter").val();if(""==a.trim())return KDMessageBox.show({msg:ResManager.LoadKDString("请输入数据中心","0991733030034783"),type:KDMessageBox.KDMesBoxType.Warning}),!1;if(e("#spanDatacenter").hasClass("k-i-wrong"))return KDMessageBox.show({
msg:ResManager.LoadKDString("数据中心不正确，请重新输入","0991733030034784"),type:KDMessageBox.KDMesBoxType.Warning}),!1}var r=e("#datacenter"),a=r.data("kendoDropDownList")&&r.data("kendoDropDownList").value();if(a&&a.trim&&""==a.trim())return KDMessageBox.show({msg:ResManager.LoadKDString("数据中心未加载。","014004030026308"),type:KDMessageBox.KDMesBoxType.Warning}),!1;var n=e("#language"),o=n.data("kendoDropDownList").value();if(""==o.trim())return KDMessageBox.show({msg:ResManager.LoadKDString("语言未加载。","0991733030031988"),type:KDMessageBox.KDMesBoxType.Warning}),!1;var s=e("#user").val(),l=e("#password").val();if(KD.IsNullOrWhiteSpace(s)&&t!=AuthenticationType.CAAuthentication.toString())return KDMessageBox.show({msg:i?ResManager.LoadKDString("请输入手机号。","0991733000004315"):ResManager.LoadKDString("请输入用户名。","0991733000004004"),type:KDMessageBox.KDMesBoxType.Warning}),!1;if(KD.IsNullOrWhiteSpace(l))return KDMessageBox.show({msg:ResManager.LoadKDString("请输入密码。","0991733000004005"),type:KDMessageBox.KDMesBoxType.Warning}),!1;var c=n.val();return KD.IsNullOrWhiteSpace(ResFactoryProxy.res[c])?(KDMessageBox.show({msg:"Cannot find file MlResource_"+c+",please contact the admin or change the language and log in again.",type:KDMessageBox.KDMesBoxType.Error}),!1):!0}function v(t,n){if(n==AuthenticationType.CAAuthentication.toString()){var i=e("#CAuser").data("kendoDropDownList"),a=i.value();if(KD.isEmpty(a))return KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:ResManager.LoadKDString("请选择证书","0991733030034787")}),!1;var r=null,o=new Date,s=(1e4*o.getTime()+621355968e9-6e8*o.getTimezoneOffset()+102).toString();try{r=getSignLogonData(a,s)}catch(l){return KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:l.stack}),!1}return KD.isEmpty(r)?(KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:ResManager.LoadKDString("签名时发生错误，请重试","0991733030034788")}),!1):r.Success?(KD.isEmpty(r.RawSignData)||(s=r.RawSignData),t.RawSignData=s,t.SignedData=r.SignedData,!0):(KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:kendo.format(ResManager.LoadKDString("签名时发生错误，错误号：{0}，错误描述：{1}","0025710030033250"),r.HexCode,r.Message)}),!1)}return!0}function y(n,i,a,r,o){if(KD.isShowAcceptCookieForm())return void KD.acceptCookieVerify(!0);var s=new LoginInfo;e.extend(s,{EncyptType:1,PasswordIsEncrypted:!1,AcctID:"",AuthenticateType:1,ClientInfo:k()}),r&&o&&o.Context&&!KD.isEmpty(o.Context.UserToken)&&(s.LoginMethod=LoginMethod.ByUserToken,s.UserToken=o.Context.UserToken);var l=e("#datacenter"),c=e("#language"),d=e("#verifyType"),u=e("#velidationCode"),g=0;d&&d.data&&d.data("kendoDropDownList")&&d.data("kendoDropDownList").value&&(g=d.data("kendoDropDownList").value());var u=e("#velidationCode");if(v(s,g)&&m(g,c,W())){e("#oldpassword").val(e("#password").val());var f=new KD.blocking;f.show.call(f,{target:e("#MainPanel"),id:"dbox",text:ResManager.LoadKDString("登录校验中...","0991733000004006")});try{KD.isEmpty(i.currentTarget)&&(i.currentTarget=n),i.waiting=f;var h={sessionkey:KDCookieManager.getKDSessionId(),scope:i,response_error:function(e){var t=this,n={};"response_error:"==(e||"").substr(0,15)?(n=KD.parseObject((e||"").substr((e||"").indexOf("{"))),n={sourceClass:n.ClassName,sourceMethod:n.ExceptionMethod,msg:n.Message||(e||"").substr(30),description:e}):n={name:"",number:"",description:e},t.waiting.hide.call(t.waiting),KD.Error.raise(n)},callback:function(e){var t=this;t.isAsyncJs=!1;try{var n="string"==typeof e?KD.parseObject(e):e;if(KDCookieManager.updateSessionId(n),1==KD.IsHtml5LoginForSilverlight)return void(t.ok&&t.ok.call(t,n));switch(n.LoginResultType){case KD.LoginResultType.Success:case KD.LoginResultType.PWInvalid_Optional:case KD.LoginResultType.DealWithForm:case KD.LoginResultType.Wanning:p(h.scope)}if(n.LoginResultType==KD.LoginResultType.Success){var i=function(){t.ok&&t.ok.call(t,n)};if(KD.isSameUTimeZone(n)||KD.getLocalConfiguration(n).NotShowUtcOffset)i();else{var a={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),number:"",msg:D(n),description:"",type:KDMessageBox.KDMesBoxType.Warning,button:KDMessageBox.KDMessageBoxButtons.YesNo,callback:function(e){e==KDMessageBox.KDDialogResult.Yes?i():E()}};KD.Error.raise(a)}}else K(n)?(t.isAsyncJs=!0,t.currentLanId=ResManager.Language,C(t,function(e,t){b.call(e,t),e.waiting.hide.call(e.waiting),ResManager.setLanguage(e.currentLanId)},n)):b.call(t,n)}catch(r){KD.writeError(r)}finally{t.isAsyncJs||KD.delayInvoke(function(){t.waiting.hide.call(t.waiting)},50)}},errcallback:function(e){var t=this;e||(e="return null error"),t.waiting.hide.call(t.waiting),t.err&&t.err({msg:ResManager.LoadKDString("登录失败","0991733000004007"),type:KDMessageBox.KDMesBoxType.Error,description:e.responseText||e})}},y=KD.entryrolePlugins.getPlugin(i.entryrole),w=!0;y&&e.isFunction(y.isUseDefaultLoginUI)&&(w=y.isUseDefaultLoginUI.call(y));var S=e("#user").val();g==AuthenticationType.CAAuthentication.toString()&&(S=e("#CAuser").data("kendoDropDownList").text());var x=a?a.isShowLoggedInMessage:t;!w&&y&&e.isFunction(y.getLogininfo)?(s=y.getLogininfo.call(y,s),s&&(s.IsShowLoggedInMessage=x===t?ClientAppProxy.isShowLoggedInMessage():x)):(s.Username=S,s.Password=e("#password").val(),s.AcctID=l.data("kendoDropDownList").value(),s.Lcid=c.data("kendoDropDownList").value(),s.AuthenticateType=W()?window.cloudAccountTypeId:d.data("kendoDropDownList").value(),s.ValidationCode=u.val(),s.SMSCode=se(),s.IsShowLoggedInMessage=x===t?ClientAppProxy.isShowLoggedInMessage():x);var _=new HTMLFormHandlerProxy;_.ValidateUser.call(_,h,s)}catch(I){KD.Error.raise({msg:"login error",description:I.toString()})}finally{}}}function D(e){var t=ResManager.LoadKDString("本地操作系统时区与登录用户时区不一致，建议修改本地操作系统时区后，重新刷新浏览器。","0991733000008451")+"\n"+ResManager.LoadKDString("本地操作系统时区：{0}。","0991733030034195")+"\n"+ResManager.LoadKDString("登录用户时区：{1}。","0991733000008452")+"\n"+ResManager.LoadKDString("是否继续登录？","0991733000008453"),n="";if(e&&e.Context&&e.Context.UTimeZone){var i=e.Context.UTimeZone,a=i.OffsetTicks/1e7/60/60;n+=i.StandardName+"("+(a>0?"+"+a:a)+")"}var r=-1*(new Date).getTimezoneOffset()/60;return KD.format(t,KD.getTimeZoneName()+"("+(r>0?"+"+r:r)+")",n)}function K(t){var n=!1,i=KD.isDebug();switch(t.LoginResultType){case KD.LoginResultType.PWInvalid_Required:case KD.LoginResultType.PWInvalid_Optional:case KD.LoginResultType.Activation:case KD.LoginResultType.DealWithForm:case KD.LoginResultType.PWError:n=!0}return n&&(n=i?0==e('[data-requiremodule="kendo.view"]',"head").length:0==e('[data-requiremodule="k3cloudmin"]',"head").length),n}function C(t,n,i){e('[data-requirecontext="_"]',"head").remove();var a=KD.isDebug();window.isLoadFullRes=!0,window.onKDScriptReady=function(){KD.triggerPluginsReady(),n&&n(t,i),window.isLoadFullRes=!1,KD.GetServerCommonConfig()},KDCustomControlProxy.createResourceNodeBatch({items:[{key:KD.getUrlRoot()+"/"+KD.getSubPath()+"/kdformjsloader"+(a?"":".min"),ver:KD.getVersion(),jsUrl:KD.getUrlRoot()+"/"+KD.getSubPath()+"/script/kdformjsloader"+(a?"":".min")+".js"}],scope:this,onComplete:function(e){},onError:function(a){KD.writeLog(a.message||"error",a.stack||KD.stringify(a)),i=e(i||{},{error:!0}),n&&n(t,i)}})}function k(){return KD.getClientInfo()}function b(n){var i=this,a=t,r=(n.Message||"")+(n.ErrorStackTrace||"");switch(n.LoginResultType){case KD.LoginResultType.Failure:a={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),number:"",msg:r,description:r,type:KDMessageBox.KDMesBoxType.Error,button:KDMessageBox.KDMessageBoxButtons.Ok,callback:function(e){E(),i.setEnabled.call(i,!0)}};break;case KD.LoginResultType.EntryCloudUnBind:a={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),number:"",msg:n.Message,description:r,type:KDMessageBox.KDMesBoxType.Error,button:KDMessageBox.KDMessageBoxButtons.Ok,callback:function(e){i.setEnabled.call(i,!0)}};break;case KD.LoginResultType.PWError:a={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),number:"",msg:n.Message,description:r,type:KDMessageBox.KDMesBoxType.Error,button:KDMessageBox.KDMessageBoxButtons.Ok,callback:function(e){i.setEnabled.call(i,!0),i.setPassword.call(i,""),E()}};break;case KD.LoginResultType.PWInvalid_Optional:var o=e("#oldpassword").val();i.setPassword(""),n.buildsessiononly=!0,KD.buildsession(n),a={name:ResManager.LoadKDString("密码修改提示","0991733000004009"),number:"",msg:n.Message,description:r,type:KDMessageBox.KDMesBoxType.Question,button:KDMessageBox.KDMessageBoxButtons.OkCancel,callback:function(e){e==KDMessageBox.KDDialogResult.Ok?i.showModifyPwdWindow.call(i,o,n):i.ok?(n.LoginResultType=KD.LoginResultType.Success,i.ok.call(i,n)):E()}};break;case KD.LoginResultType.PWInvalid_Required:var o=e("#oldpassword").val();i.setPassword(""),a={name:ResManager.LoadKDString("密码修改提示","0991733000004009"),number:"",msg:n.Message,description:r,type:KDMessageBox.KDMesBoxType.Warning,button:KDMessageBox.KDMessageBoxButtons.Ok,callback:function(e){i.showModifyPwdWindow.call(i,o,n)}};break;case KD.LoginResultType.Activation:var o=e("#oldpassword").val();i.setPassword(""),n.buildsessiononly=!0,KD.buildsession(n),a={name:ResManager.LoadKDString("激活提示","0991733000004010"),number:"",msg:n.Message||ResManager.LoadKDString("用户需要在线激活！","0991733030034198"),description:r,type:KDMessageBox.KDMesBoxType.Warning,button:KDMessageBox.KDMessageBoxButtons.Ok,callback:function(e){i.showActivationForm.call(i,o,n)}};break;case KD.LoginResultType.Wanning:var s=KDMessageBox.KDMesBoxType.Warning,l=KDMessageBox.KDMessageBoxButtons.Ok,c="$"==(n.MessageCode||" ").substr(0,1);"$ReqMsgOption_Question"==n.MessageCode?(s=KDMessageBox.KDMesBoxType.Question,l=KDMessageBox.KDMessageBoxButtons.YesNo):"$ReqMsgOption_Error"==n.MessageCode&&(s=KDMessageBox.KDMesBoxType.Error,l=KDMessageBox.KDMessageBoxButtons.OkCancel),a={name:ResManager.LoadKDString("警告提示","0991733000004011"),number:"",msg:n.Message,description:r,type:s,button:l,callback:function(e){(e==KDMessageBox.KDDialogResult.Yes||e==KDMessageBox.KDDialogResult.Ok)&&(c?y(i,i,{isShowLoggedInMessage:!1},!0,n):(n.LoginResultType=KD.LoginResultType.Success,i.ok.call(i,n)))}};break;case KD.LoginResultType.DealWithForm:n.buildsessiononly=!0,n.modal=!0,KD.buildsession(n),i.showSpecialForm.call(i,n,n.FormId,n.FormInputObject)}a&&KD.Error.raise(a)}function w(t){var n=e("#inputDatacenter").val(),i=e("#spanDatacenter"),a=e("#datacenter"),r=0,o="";if(""==n?i.css("visibility","hidden"):i.css("visibility","visible"),t&&t.length>0)for(var s=0;s<t.length;s++){var l=t[s];l.alias==n&&(r++,o=l.value)}1==r?(a.data("kendoDropDownList").value(o),a.data("kendoDropDownList").trigger("change"),i.addClass("k-i-right").removeClass("k-i-wrong").attr("title",ResManager.LoadKDString("数据中心匹配成功","0991733030034785"))):r>1?i.addClass("k-i-wrong").removeClass("k-i-right").attr("title",KD.format("含有多个命名为{0}的数据中心",n)):i.addClass("k-i-wrong").removeClass("k-i-right").attr("title",KD.format(ResManager.LoadKDString("无法匹配为{0}的数据中心","0991733030034786"),n))}function S(t,n){if(!KD||!KD.autologin){var i=e("#datacenter"),a=t;n.currentTarget=t;var r={scope:n,callback:function(t){var r=this;try{var o=KD.parseObject(t);n.currentTarget.data=o;for(var s=[],l=null,c=0,d=0;d<o.length;d++){var l=o[d],u=l.Name;e.each(l.LocaleValueName,function(e,t){t.Key==ResManager.Language&&(u=t.Value)}),s.push([l.Id,u]),r.__LoginInfo&&l.Id==r.__LoginInfo.acc&&(c=d)}var g=KD.getEnumSource(s),p={dataSource:g,popup:{origin:"bottom right",position:"top right"},dataTextField:"alias",dataValueField:"value",height:350,autoWidth:!0,valueTemplate:'<span title="#: alias #" class="toolTip"> #: alias #</span>',noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490"),template:'<span title="#: alias #" style="display:inline-block; width:100%; height:100%;"> #: alias #</span>',change:function(e){L(a,this.value(),r)},dataBound:function(e){N()}};g&&g.length>=8&&(p.filter="contains",p.minLength=1,p.delay=0),i.kendoDropDownList(p),i.data("kendoDropDownList").select(c),i.data("kendoDropDownList").trigger("change"),KD.isManagementSite()&&(e("#datacenter").data("kendoDropDownList").enable(!1),l&&l.IsNotDefaultAdmin||e("#user").val("Administrator").attr("readonly","true").addClass("k-state-disabled"),e("#verifyType_ct").hide()),"1"==KD.IsLoginManualInputDC()?(e("#datacenter_ct").css("margin-right","10px"),e("#inputDatacenter").css("display","inline-block").off("keyup").keyup(function(e){w(g)}),e("#spanDatacenter").css("visibility","hidden"),e("#spanDatacenter").css("display","inline-block"),e("#datacenter").data("kendoDropDownList").span.closest(".k-header").css("display","none")):(e("#inputDatacenter").css("display","none"),e("#spanDatacenter").css("display","none"),e("#datacenter").data("kendoDropDownList").span.closest(".k-header").css("display","inline-block"))}catch(f){r.err({msg:ResManager.LoadKDString("初始数据中心列表失败!","0991733000004012"),description:""})}},errcallback:function(e){var t=this;t.err&&t.err({msg:ResManager.LoadKDString("初始数据中心列表失败!","0991733000004012"),description:""})}},o=new AccountClientProxy;o.getDataCenterList.call(o,r,1)}}function x(t,n){if(n=parseInt(n),!KD.isEmpty(t)&&!KD.isNaN(n)){var i,a;if(1==t&&(i=2052==n||3076==n?"kd-bgdemolictype":"kd-bgdemolictype1033"),2==t)switch(n){case 1033:i="kd-bglimitlictype1033";break;case 2052:i="kd-bglimitlictype";break;case 3076:i="kd-bglimitlictype3076";break;default:i="kd-bglimitlictype1033"}KD.isEmpty(i)||KD.IsNullOrWhiteSpace(i)||(a=e("#divTitle").find(".kd-lic-logo"),a.length>0?a.removeClass().addClass("kd-lic-logo").addClass(i):(a=e(KD.format('<div class="kd-lic-logo {0}"></div>',i)),e("#divTitle").length>0&&e("#divTitle").append(e(a))))}}function _(t){var n=[];try{var i=0;if(!t.currentTarget)return;var a=e("#datacenter").data("kendoDropDownList");dcValue=a.value();for(var r=0;r<t.currentTarget.data.length;r++){var o=t.currentTarget.data[r];o.Id==dcValue&&(i=r);var s=KD.isEmpty(o.Name)?"":o.Name;e.each(o.LocaleValueName,function(e,t){t.Key==ResManager.Language&&(s=t.Value)}),n.push([o.Id,s])}var l=t.currentTarget.data[i],c=new kendo.data.DataSource({data:KD.getEnumSource(n)});a.setDataSource(c),a.select(i),A(ResManager.Language,l)}catch(d){KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013")+KD.stringify(t.currentTarget.data[0]),description:d.stack})}}function I(e,t){try{var n=this;ResManager.setLanguage(e),x(window.LicenseType,e),KDCustomControlProxy.loadLanguageRes(e,n,function(t,n){var i=X();ResManager.setLanguage(e),KD.setLoginLang(),i&&O()})}catch(i){KD.Error.raise({msg:ResManager.LoadKDString("语言变更失败","0991733030033484"),description:i.toString()})}}function L(t,n,i){var a=e("#language"),r=(e("#verifyType"),t),o=0;try{for(var s=0;s<r.data.length;s++){var l=r.data[s];l.Id==n&&(o=s)}var c=r.data[o];ResManager.Language}catch(d){KD.Error.raise({msg:ResManager.LoadKDString("初始认证列表失败!_datacenter_kendo_changed","0991733000004014"),description:d.stack})}var u={scope:i,response_error:function(t){window.lanErrRequestStr=t;var n={scope:i,response_error:function(e){KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:e})},callback:function(e){try{var t=KD.parseObject(e);t&&t.ISCONNECTSUCCESS&&1==t.ISCONNECTSUCCESS?KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:window.lanErrRequestStr}):KD.Error.raise({msg:t.MESSAGE})}catch(n){KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:n.stack})}},errcallback:function(e){var t=this;t.err&&KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:e})}},a=e("#language").data("kendoDropDownList").value(),r=i&&i.__LoginInfo&&i.__LoginInfo.lan;a=a?a:r;var o=new AccountClientProxy;o.getDataCenterDBStatus.call(o,n,e("#datacenter").data("kendoDropDownList").value(),KD.isManagementSite(),e("#user").val(),a?a:2052)},callback:function(e){try{var t=this,n=KD.parseObject(e),i=0,r=[];if(n.length>0){var o=n[0];window.LicenseType=o&&o.LicenseType}for(var s=0;s<n.length;s++){var l=n[s],c=l.LocaleName;c&&c.replace&&c.indexOf&&c.indexOf("/中国")>0&&(c=c.replace("/中国","")),r.push([l.LocaleId,c]),t.__LoginInfo&&l.LocaleId&&l.LocaleId.toString()==t.__LoginInfo.lan.toString()&&(i=s)}var d=KD.getEnumSource(r),u=a.kendoDropDownList({dataSource:d,popup:{origin:"bottom right",position:"top right"},dataTextField:"alias",dataValueField:"value",autoWidth:!0,noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490"),valueTemplate:'<span title="#: alias #" class="toolTip"> #: alias #</span>',change:function(e){I(this.value(),t)},dataBound:function(e){N()}}).data("kendoDropDownList");X()&&O(),u.select(i),ResManager.setLanguage(r[i][0]),window.LicenseType>-1&&!KD.IsNullOrWhiteSpace(ResManager.Language)&&x(window.LicenseType,ResManager.Language),KDCustomControlProxy.loadLanguageRes(ResManager.Language,t,function(e,t){KD.setLoginLang()}),_(t)}catch(g){KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:g.stack})}},errcallback:function(e){var t=this;t.err&&KD.Error.raise({msg:ResManager.LoadKDString("初始语言列表失败!","0991733000004013"),description:e})}},g=new AccountClientProxy;g.getDataCenterLoginLanguages.call(g,u,"zh-CN",1,c.Id,c.DBType),R(c),M(),Q(c.Id),le(""),ie()}function M(){var t=KD.getEntryRoleConfig();"srm"==t?e("#grid_SRMSupplier").css("display","block"):e("#grid_SRMSupplier").css("display","none")}function T(){var n=AuthenticationType.DomainAuthentication;if(e("#verifyType")&&e("#verifyType").data("kendoDropDownList")&&e("#verifyType").data("kendoDropDownList").value&&(n=e("#verifyType").data("kendoDropDownList").value()),n.toString()==AuthenticationType.CAAuthentication.toString()){F(!1);var i=e("#CAuser").data("kendoDropDownList");KD.isEmpty(i)&&(i=e("#CAuser").kendoDropDownList({dataSource:{data:[]},dataTextField:"name",dataValueField:"id"}).data("kendoDropDownList"),i._arrow&&i._arrow.css("margin-top","-8px"));try{initCAActiveXObj()}catch(a){}var r=getCerts();if(r==t||null==r)return void KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:ResManager.LoadKDString("未找到CA插件，请安装CA插件。插件安装完成后，请重启浏览器。","0025710030033247")});if(r&&r.length<=0)return void KD.Error.raise({type:KDMessageBox.KDMesBoxType.Error,msg:ResManager.LoadKDString("未找到CA证书，请检查证书是否已安装","0025710030033248")});for(var o=[],s=0,l=0;r&&r.length&&l<r.length;l++){var c=r[l];o.push({id:c.SerialNumber,name:c.CommonName}),c.CommonName==$this.__LoginInfo.user&&(s=l)}var d=new kendo.data.DataSource({data:o});i.setDataSource(d),i.select(s)}else B()}function P(e,t,n){T(),Y(e),le(""),KD.IsNullOrWhiteSpace(e)||(H(),$(!0))}function A(t,n){for(var i=e("#verifyType"),a=n.AuthenticationMethods,r=[],o="",s=0,l=!1,c=this,d=0;d<a.length;d++)if(o=a[d].Name,a[d].AuthenticationMethodType!=AuthenticationType.CAAuthentication.toString()||KD.isIeBrowser()){for(var u=0;u<a[d].MultiLangName.length;u++)if(a[d].MultiLangName[u].Key==t){o=a[d].MultiLangName[u].Value;break}$this&&$this.__LoginInfo&&a[d].AuthenticationMethodType.toString()==$this.__LoginInfo.ver.toString()&&n.Id==$this.__LoginInfo.acc&&(s=d,1==l&&(s-=1)),r.push([a[d].AuthenticationMethodType,o])}else l=!0;var g=i.kendoDropDownList({dataSource:KD.getEnumSource(r),popup:{origin:"bottom right",position:"top right"},autoWidth:!0,valueTemplate:'<span title="#: alias #" class="toolTip"> #: alias #</span>',dataTextField:"alias",noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490"),dataValueField:"value",dataBound:function(e){N()},change:function(e){P(this.value(),this.text(),c)}}).data("kendoDropDownList");g&&g.select(s),T(),$(!1),H(),Y()}function R(t){t.IsNeedValicationCode?(e("#grid_VelidationCode").css("display","block"),e("#dbox").css("min-height","410px"),e("#loginBtnInfo").css("margin-top","20px"),E()):(e("#dbox").css("min-height","410px"),e("#grid_VelidationCode").css("display","none"),e("#loginBtnInfo").css("margin-top","48px")),_isUseKingdeeUnifiedStyle()&&e("#loginBtnInfo").css("margin-top","73px")}function E(){if("none"!=e("#grid_VelidationCode").css("display")){e("#velidationCode").val("");var t=new AccountClientProxy,n={callback:function(t){try{var n=KD.parseObject(t);n.KDSID&&KDCookieManager.setKDSessionId(n.KDSID),n.ASPNETSID&&KDCookieManager.setAspNetSessionId(n.ASPNETSID);var i="data:image/jpeg;base64,"+n.imageData;e("#img_VelidationCode").attr("src",i)}catch(a){KD.Error.raise({msg:ResManager.LoadKDString("验证码加载失败!","0991733000004015"),description:a.toString()})}},errcallback:function(e){var t=this;KD.parseObject(e);t.err&&KD.Error.raise({msg:ResManager.LoadKDString("验证码加载失败!","0991733000004015"),description:e})}};t.getValidationCodeObject.call(t,n)}}function N(){e("#loginDBInfo .toolTip[title!='']").kendoTooltip({position:"top",animation:{open:{duration:1}}})}function F(t){var n=e("#CAuser").data("kendoDropDownList"),i=e("#user").data("kendoAutoComplete");t?(e("#user").css({visibility:"visible"}),e("#CAuser").css({visibility:"hidden"}),e("#user").css({display:"inline-block"}),i&&i.wrapper&&i.wrapper.show(),n&&n.wrapper&&n.wrapper.hide()):(e("#user").css({visibility:"hidden"}),e("#CAuser").css({visibility:"visible"}),i&&i.wrapper&&i.wrapper.hide(),n&&n.wrapper&&n.wrapper.show(),KD.isEmpty(i)||KD.isEmpty(i.wrapper)?e("#user").css({display:"none"}):e("#user").css({display:"inline-block"}))}function B(){if((!ClientAppProxy.Current||!ClientAppProxy.Current.getIsNotLoginUserByHistory())&&(F(!0),KD.isEmpty(e("#user").data("kendoAutoComplete")))){var t=KD.storage.getItem("userHistory")||"{}",n=KD.parseObject(t),i=[];for(var a in n)i.push([n[a].acc,n[a].user]);var r=KD.getEnumSource(i);e("#user").kendoAutoComplete({dataSource:r,clearButton:!1,dataTextField:"alias",dataValueField:"value",animation:!1,noDataTemplate:ResManager.LoadKDString("无数据","0991733000004096"),template:'#: alias #<span class="kd_iconDelUserHistory"></span>',close:function(t){t.sender.ul.children(":hidden").each(function(){var t=e("#user").data("kendoAutoComplete").dataSource;t.filter({field:"alias",operator:"contains",value:e(this).text()});var n=t.view();t.remove(n[0]),t.sync()})},dataBound:function(t){e(".kd_iconDelUserHistory").bind("click",function(e){function t(e){for(var t=[],n=e.parentNode.parentNode.firstChild;n;n=n.nextSibling)1===n.nodeType&&n!==e&&t.push(n);return t}e.preventDefault(),e.stopPropagation(),this.parentNode.style.display="none";var n=KD.storage.getItem("userHistory")||"{}",i=KD.parseObject(n),a=this.parentNode.innerText;document.getElementById("user").value==a&&(document.getElementById("user").value=""),delete i[a],KD.storage.setItem("userHistory",JSON.stringify(i));for(var r=t(this),o=0;o<r.length&&"none"==r[o].style.display;o++);o==r.length&&(this.parentNode.parentNode.parentNode.parentNode.parentNode.style="none")})}})}}function O(){g(),e("#childframe").attr("src","");var t=e("#datacenter").data("kendoDropDownList")&&e("#datacenter").data("kendoDropDownList").value(),n=e("#language").data("kendoDropDownList")&&e("#language").data("kendoDropDownList").value(),i=KD.getUrlSubRoot()+"/Kingdee.BOS.WebApi.ServicesStub.YunZhiJiaService.GetYunZhiJiaInfobydbid.common.kdsvc";!X()||KD.IsNullOrWhiteSpace(t)||KD.IsNullOrWhiteSpace(n)||e.post({url:i,data:{dbid:t},success:function(t,n){var i=KD.parseObject(t);if(0==i.Successful)return void U(i.Message);var a=e("#datacenter").data("kendoDropDownList")&&e("#datacenter").data("kendoDropDownList").value(),r=e("#language").data("kendoDropDownList")&&e("#language").data("kendoDropDownList").value(),o=i.Result.CloudServiceHost,s=i.Result.EID;if(KD.IsNullOrWhiteSpace(s)||KD.IsNullOrWhiteSpace(o))U(),e("#childframe").attr("src","");else{var l,c=KD.base64Encode(KD.format('{"dbid":"{0}","entryrole":"XT","lcid":{1},"origintype":"XTTD","formid":"","formtype":"","pkid":""}',a,r)),d=KD.urlEncodeComponent(KD.format("{0}/html5/index.aspx?ud={1}&dbid={2}&lcid={3}&loginType=qrcode",o,c,a,r)),u="https:"==document.location.protocol?!0:!1;if(u){var g=KD.urlEncodeComponent(KD.format("{0}/html5/content/themes/kd.ui.qrlogin.css",KD.getUrlSubRoot()));l="https://www.yunzhijia.com/opencloud/openthird/qrconnet?appid=10867&redirect_uri="+d+"&csshref="+g}else l="https://www.yunzhijia.com/opencloud/openthird/qrconnet?appid=10867&redirect_uri="+d+"&csshref=https%3A%2F%2Ffile.open.kingdee.com%2Fk3cloud%2Fuploads%2Fcss%2Fqrcodeforyzj%2Fk3cloudqrcode.css";e(".qr-wrap").find(".qrcode-errreload").remove(),e("#childframe").attr("src",l)}}})}function U(t){var n=KD.format("<span class='qrcode-errreload active'><span></span><i class='linefirst'>{0}</i><i class='linesec'>{1}<i></span>",ResManager.LoadKDString("开通云之家","0991733000006701"),ResManager.LoadKDString("畅享二维码登录","0991733000006702"));n=KD.IsNullOrWhiteSpace(t)?n:KD.format("<span class='qrcode-errreload active'><span></span><i class='linefirst'>{0}</i><i class='linesec'><i></span>",t),e(".qr-wrap").find(".qrcode-reload").remove(),e(".qr-wrap").find(".qrcode-errreload").remove(),e(".qr-wrap").append(e(n))}function $(t){var n=e("#user"),i=W();t&&z();var a=i?window.cloudAccountTypeId:e("#verifyType").data("kendoDropDownList")&&e("#verifyType").data("kendoDropDownList").value(),r=ResManager.LoadKDString("用户名","0991733000004017");switch(a){case"10":r=ResManager.LoadKDString("手机号","014004030033670");break;case window.cloudAccountTypeId:r=ResManager.LoadKDString("手机号","014004030033670");break;default:r=ResManager.LoadKDString("用户名","0991733000004017")}t?n.val("").attr("placeholder",r):n.attr("placeholder",r)}function H(){var t=null,n=e("#verifyType").data("kendoDropDownList");n&&n.value&&(t=n.value()),"cloudaccount"==_getLoginType()?e("#forgetpass").show():!KD.isEmpty(KD.getQueryString("EntryRole"))||KD.isManagementSite()||1!=t&&t!=window.cloudAccountTypeId&&t!=window.SMSVerifyTypeId?e("#forgetpass").hide():e("#forgetpass").show()}function z(){E(),e("#password").val("")}function W(t){var n=!1,i=e('#loginContainer .boxtitles .boxtitle[data-type="cloudaccount"]');return i.length>0&&i.hasClass("active")&&!X()&&(n=!0),n}function j(){var t=KD.getUrlSubRoot()+"/Kingdee.BOS.WebApi.ServicesStub.YunZhiJiaService.GetYZJConnectInfo.common.kdsvc";e.post({url:t,data:{appid:10867},timeout:2e3,success:function(e){var t=KD.parseObject(e);t.Successful?(window.isConnectYZJok=!0,O(),KD.writeLog("Connect YZJ OK!")):(U(t.Message),KD.writeLog(t.Message))},error:function(e,t,n){"timeout"==t&&(U(ResManager.LoadKDString("应用服务器连不上云之家","014002030031931")),KD.writeLog("Connect YZJ TIMEOUT!"))}})}function q(t,n){var i=e(this);if("qrcode"!==i.data("type")&&G(),!i.hasClass("active"))if(i.siblings().removeClass("active"),i.addClass("active"),"account"==i.data("type")||"cloudaccount"==i.data("type")){if(e("#password").val(""),e(".boxtitles").parent().attr({logintype:i.data("type")}).removeClass("kd-login-type-qrcode"),i.parent().find('.boxtitle[data-type="qrcode"]').find("span").text(ResManager.LoadKDString("扫码登录","0991733000006693")),i.parent().find('.boxtitle[data-type="qrcode"]').attr({datarole:""}),e("#ct_").css("display","inline-block"),i.siblings().removeClass("active"),e("#qr_").hide(),"cloudaccount"==i.data("type")){"true"!=i.attr("isfirstload")&&e("#user").val(""),e("#user").attr("placeholder",ResManager.LoadKDString("手机号","014004030033670")),H();var a=KD.storage.getItem(KD.CONST.isHasLoginByCloudAccountName);KD.isEmpty(a)&&e("#forgetpass .kd-getpassword-tips").show()}else{var r=e("#verifyType");if(r.length>0){var l=r.data("kendoDropDownList");l.trigger("change")}}V(),"true"==i.attr("isfirstload")&&KD.delayInvoke(function(e){G()},1e3)}else if("qrcode"==i.data("type")){_isUseKingdeeUnifiedStyle&&_isUseKingdeeUnifiedStyle()&&i.hide();i.attr("datarole");i.attr({datarole:"qrcode"}),e("#qr_").show(),e(".boxtitles").parent().addClass("kd-login-type-qrcode"),e(".qrcode-reload").removeClass("active"),s($this,n,null),window.isUserQRCodeNew?j():(d(),clearInterval(timer),o(),c($this,n,null)),i.addClass("active")}}function V(){var t=KD.getConnectConfig()&&KD.getConnectConfig().isShowQRCodeLogin;t=!("false"==t);var n=e('.boxtitle[data-type="qrcode"]');return t?n.show():n.hide(),t}function G(){var t=e("#loginUserInfo .kd-login-input-container #user"),n=t.val();t.focus(),t.val("").val(n)}function J(){var t=function(t){var n=e('.boxtitles .boxtitle[data-type="'+t+'"]');n.hasClass("active")||n.trigger("click")},n={scope:e(document.body),callback:function(e){t(KD.equalsIgnoreCase(e,"true")?"cloudaccount":"account")},errcallback:function(e){t("account")}},i=new ClienterServiceProxy;i.IsSubscriptionRegControlPolicy(n)}function Q(t){var n={scope:e(document.body),callback:function(e){KD.writeLog("InitializeHtml5MainConsole",e,!0)},errcallback:function(e){KD.writeError("InitializeHtml5MainConsole error",e)},response_error:function(e){KD.writeError("InitializeHtml5MainConsole error",e)}},i=new ClienterServiceProxy;i.InitializeHtml5MainConsole.call(i,n,t)}function Z(t,n){var i=KD.parseObject(KD.storage.getItem("lastLoginType")||""),a=KD.getConnectConfig()&&KD.getConnectConfig().defaultLoginType,r=V(),o="";o=10==a&&r?"qrcode":20==a?"cloudaccount":"account",KD.IsNullOrWhiteSpace(i)&&KD.IsNullOrWhiteSpace(a)&&J(),KD.IsNullOrWhiteSpace(i)&&(i=o);var s=e('.boxtitles .boxtitle[data-type="'+i+'"]');0==s.length&&(s=e('.boxtitles .boxtitle[data-type="account"]')),s.attr({isfirstload:"true"}),s.trigger("click"),s.removeAttr("isfirstload")}function X(){var t=e("#qr_").is(":visible");return t}function Y(t){var n=t,i=n?null:e("#verifyType").data("kendoDropDownList");i&&i.value&&(n=i.value()),n==window.SMSVerifyTypeId?e("#SMSVerificationContainer").show():e("#SMSVerificationContainer").hide()}function ee(){if(m(window.SMSVerifyTypeId,null,W())){var t={scope:e(document.body),callback:function(e){var t=KD.parseObject(e);KD.equalsIgnoreCase(t.Successful+"","true")?(te(t.Message),ne()):(ae(!0),KDMessageBox.show({msg:t.Message,type:KDMessageBox.KDMesBoxType.Warning,callback:function(e){e==KDMessageBox.KDDialogResult.Yes?okHandler():E()}}))},errcallback:function(e){ae(!0);var t={name:ResManager.LoadKDString("金蝶提示","0991733000004008"),msg:e,description:"",type:KDMessageBox.KDMesBoxType.Warning,callback:function(e){e==KDMessageBox.KDDialogResult.Yes?okHandler():E()}};KD.Error.raise(t)}},n=new ClienterServiceProxy,i=ce(),a=re(),r=oe(),o=de(),s=new LoginInfo;e.extend(s,{EncyptType:1,PasswordIsEncrypted:!1,AcctID:"",AuthenticateType:window.SMSVerifyTypeId,ClientInfo:k()}),s.AcctID=i,s.Lcid=o,s.ValidationCode=e("#velidationCode").val(),n.GetSMSVerificationCode.call(n,t,s,a,r),ae(!1)}}function te(t){e("#SMSVerificationContainer .kd-login-sms-tips").text(t)}function ne(){if(!(window.limitGetSMSIntervalCode>=0)){var t=e("#kd-login-btn-sms"),n=waittime=120,i=function(){var e=KD.format(ResManager.LoadKDString("{0}秒后可重发","00214298000005664"),n);0>=n?(ie(),n=waittime):(n-=1,t.text(e),ae(!1))};window.limitGetSMSIntervalCode=KD.setInterval(i,1e3)}}function ie(){var t=e("#kd-login-btn-sms");window.limitGetSMSIntervalCode>=0&&(clearInterval(window.limitGetSMSIntervalCode),window.limitGetSMSIntervalCode=-1,t.text(ResManager.LoadKDString("发送验证码","00214298000005663")),ae(!0),te(""))}function ae(t){var n=e("#kd-login-btn-sms");t?n.removeAttr("disabled").removeClass("k-state-disabled").css("color","#FFF"):n.attr("disabled","disabled").addClass("k-state-disabled").css("color","#333")}function re(){var t=e("#user");if(0==t.is(":Visible")){var n=e("#CAuser");n.is(":Visible")&&(t=n)}var i=t.val();return i}function oe(){var t=e("#password").val();return t}function se(){var t=e("#kd-input-sms-verification").val();return t}function le(t){e("#kd-input-sms-verification").val(t)}function ce(){var t="",n=e("#datacenter");return dataAccObj=n.data("kendoDropDownList"),dataAccObj&&dataAccObj.value&&(t=dataAccObj.value()),t}function de(){var t="",n=e("#language");return lanObj=n.data("kendoDropDownList"),lanObj&&lanObj.value&&(t=lanObj.value()),t}function ue(n,i){var a=!1;KD.isIeBrowser&&KD.isIeBrowser()&&(i=!1),a=i!=t?i:n&&"password"==e(n.target).attr("id")?KD.checkCapsLockState.call(this,n):!1;var r=e("#capslockstate");if(r.find(".kd-text").text(ResManager.LoadKDString("大写锁定已打开","0991733000014723")),a){var o="url("+KD.getUrlRoot()+"/"+KD.getSubPath()+"/"+KD.getImageUrlByNameAndVersion("kd_icon_extend.png")+")";
r.show(),r.find(".kd-icon").css({"background-image":o})}else r.hide()}e.fn.KDLogin=function(l){var d=e.extend({},e.fn.KDControlBase.defaults,e.fn.KDLogin.defaults,l),u=window._kdlogin=e.extend(this,e.fn.KDLogin.prototype,d),p=KD.entryrolePlugins.getPlugin(u.entryrole);f(this);var m=KD.getConnectConfig().pageName.toLowerCase(),v="index.aspx"==m,D=KD.isManagementSite(),K=t;if(v)if(r()){var C=e('<div class="boxtitles"></div>');C.append('<div class="boxtitle " data-type="cloudaccount"><span>'+ResManager.LoadKDString("金蝶·云账号","0991733000005697")+"</span></div>"),C.append('<div class="boxtitle" data-type="qrcode" datarole="" style="background-image: url('+KD.getUrlRoot()+"/"+KD.getSubPath()+"/"+KD.getImageUrlByNameAndVersion("kd_icon_extend.png")+')"><span>'+ResManager.LoadKDString("扫码登录","0991733000006693")+'</span><div class="kd-tipline"></div></div>'),C.append('<div class="boxtitle" data-type="account"><span>'+ResManager.LoadKDString("金蝶云星空账号","0991733000005698")+"</span></div>"),K=e('<div id="boxcontainer"></div>');var k=KD.getConnectConfig()&&KD.getConnectConfig().startAppPlugin;window.isUserQRCodeNew=k&&("Kingdee.BOS.ServiceFacade.StartApp.MacVerify_V2,Kingdee.BOS.ServiceFacade.StartApp"==k||"Default"==k),window.isUserQRCodeNew?K.append(u.qrcodeHtmlNew):K.append(u.qrcodeHtml),K.append(u.getMetaHtml()),this.append(C).append(K)}else K=e('<div id="boxcontainer"></div>'),K.append(u.getMetaHtml()),this.append(K),e("#ct_").css("display","inline-block");else this.append('<div id="divQRCodeTitle"><div class="loginKDLogo"></div></div>').append(u.qrcodeHtml);D&&K&&(K.find("#datacenter_ct").css({position:"absolute",left:"25px"}),K.find("#language_ct #language").width(200)),e("#pBrowerVersion").length<=0&&e(".footer").append(u.footerHtml),a();var b=!0;return p&&e.isFunction(p.isUseDefaultLoginUI)&&(b=p.isUseDefaultLoginUI.call(p)),!b&&p&&e.isFunction(p.initLoginUI)?p.initLoginUI.call(p):(e("#datacenter",document).kendoDropDownList({noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490")}),e("#language",document).kendoDropDownList({noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490")}),e("#verifyType",document).kendoDropDownList({noDataTemplate:ResManager.LoadKDString("没有数据","0991733030033490")})),ClientAppProxy.Current&&ClientAppProxy.Current.getIsNotLoginUserByHistory()?e("#user").val(""):e("#user").val(u.__LoginInfo.user),e("#password").val(""),e("#velidationCode").val(""),e("#link_ChangeCode,#img_VelidationCode").click(function(e){h(e)}),e("#divImgBg").css("min-height","565px"),$this=this,this.each(function(){e.meta?e.extend({},d,$this.data()):d;$this.ready(function(){var t=e("#IsHtml5LoginForSilverlight");if(t.length>0&&(KD.IsHtml5LoginForSilverlight=!0),1==KD.IsHtml5LoginForSilverlight)return e("#btnLogin").kendoButton({enable:!0,click:function(e){return!1}}),KD.lgoinwaiting=new KD.blocking,void KD.lgoinwaiting.show({target:e("#htmllogin"),id:"dbox",text:ResManager.LoadKDString("准备登录数据...","0991733000004003")});var n=KD.entryrolePlugins.getPlugin(u.entryrole),i=!0,a=!1;n&&KD.isFunction(n.isInitDataCenterList)&&(i=n.isInitDataCenterList.call(n)),n&&KD.isFunction(n.isNeedValicationCode)&&(a=n.isNeedValicationCode.call(n),a&&R({IsNeedValicationCode:a})),!i&&n&&e.isFunction(n.loginUIReady)?n.loginUIReady.call(n):i&&(v||window.isUserQRCodeNew?S($this,u):(o(),s($this,u,null),c($this,u,null))),e("#btnLogin").kendoButton({enable:!0,click:function(e){return y($this,u,e),!1}})})}),KDKeyNavigate.initEnter2tab(e("#user"),null),e("#user").off("keydown").on("keydown",function(t){KDKeyNavigate.onKeyNavigate(e(this),null,t)}),e("#loginUserInfo").delegate("input","blur",function(t){var n=e(this);n.removeClass("kd-state-focused"),n.closest(".kd-login-input-container").removeClass("kd-state-focused")}),e("#loginUserInfo").delegate("input","focus",function(t){var n=e(this);n.addClass("kd-state-focused"),n.closest(".kd-login-input-container").addClass("kd-state-focused")}),KDKeyNavigate.initEnter2tab(e("#password"),null),e("#password").off("keydown").on("keydown",function(t){"13"!=t.keyCode||KD.isLoginByValidationCode()?KDKeyNavigate.onKeyNavigate(e(this),null,t):y($this,u,t),ue(t)}),e("#password").off("blur").on("blur",function(e){ue(e,!1)}),e("body").off("keydown").on("keydown",function(e){ue(e)}),e("#kd-input-sms-verification").off("keydown").on("keydown",function(t){"13"==t.keyCode&&e(this).is(":Visible")?y($this,u,t):KDKeyNavigate.onKeyNavigate(e(this),null,t)}),e("#kd-login-btn-sms").off("click").on("click",function(e){ee()}),KDKeyNavigate.initEnter2tab(e("#velidationCode"),null),e("#velidationCode").off("keydown").on("keydown",function(t){return"13"==t.keyCode&&"none"!=e("#grid_VelidationCode").css("display")?void y($this,u,t):void KDKeyNavigate.onKeyNavigate(e(this),null,t)}),g(),n(),e("#logintypeDiv .typescontainer .typeItem .icon").click(function(t){var n=e(this.children[0]).attr("class"),i=location.href.split("?");switch(n){case"account":window.location.href="./ACCIndex.aspx"+(i.length>1?"?"+i[1]:"");break;case"face":window.location.href="./loginface.aspx"+(i.length>1?"?"+i[1]:"");break;case"qrcode":window.location.href="./QRCodeIndex.aspx"+(i.length>1?"?"+i[1]:"")}}),e(".kd-floatmenu .icon").click(function(t){var n=e(this.children[0]).attr("class"),i=location.href.split("?");switch(n){case"account":window.location.href="./ACCIndex.aspx"+(i.length>1?"?"+i[1]:"");break;case"face":window.location.href="./loginface.aspx"+(i.length>1?"?"+i[1]:"");break;case"qrcode":window.location.href="./QRCodeIndex.aspx"+(i.length>1?"?"+i[1]:"")}}),qrcodeDivObject=u,v&&(e(".kd-floatmenu").hide(),D||(e(".boxtitles .boxtitle").click(function(e){q.call(this,e,u)}),Z.call(this,$this,u))),H(),KD.isShowAcceptCookieForm()&&KD.acceptCookieVerify(),e("#forgetpass").click(function(){var t=e("#verifyType").data("kendoDropDownList"),n=1;t&&(n=t.value());var a=W(),r=i(n,a);if(r)if(a)window.open("https://cloud.kingdee.com/passport/hi/password/forget","_blank");else{var o=encodeURIComponent(e("#datacenter option:selected").html()),s={userName:e("#user").val(),dbid:e("#datacenter").data("kendoDropDownList").value(),clientType:16,lcid:e("#language").data("kendoDropDownList").value()},l=new UserServiceProxy,c={callback:function(t){var n=KD.parseObject(t);0==n.Successful?KDMessageBox.show({msg:n.Message,type:KDMessageBox.KDMesBoxType.Warning}):e(location).attr("href",KD.getUrlRoot()+"/"+KD.getSubPath()+"/ForgetPassword.html?p0="+o+"&p1="+e("#datacenter").data("kendoDropDownList").value()+"&p2="+e("#language").data("kendoDropDownList").value()+"&p3="+encodeURIComponent(e("#user").val())+"&p4=16&p5="+encodeURIComponent(window.location))}};l.CheckAutherUser.call(l,c,s)}}),u},e.fn.KDLogin.prototype={setEnabled:function(e){},setPassword:function(t){e("#password").val(t)},refreshDataCenter:function(){_(this)},showModifyPwdWindow:function(t,n){var i=this,a=n.Context?n.Context.UserId:"",r=new FormManager,o=new ShowFormParameter("SEC_ModifyPassword","7e62583e-7d50-4546-afc6-389525b0df2c");o.ShowFormType=0,o.Height=165,o.Width=385,o.ResizeMode=0,o.activeVerifyBannerTip=!0,o.InputData=t,a&&(o.CustomParams.EditUserId=a),r.ShowClientDynamicForm.call(r,o,function(t){i.setPassword(""),e("#password").focus(),E()})},showActivationForm:function(t,n){var i=this,a=n.Context?n.Context.UserId:"",r=new FormManager,o=new ShowFormParameter("SEC_SetPwd","C288CC59-A964-4DC6-B543-6B7FB2804498");o.ShowFormType=0,o.Height=413,o.Width=710,o.ResizeMode=0,o.activeVerifyBannerTip=!0,o.InputData=t,a&&(o.CustomParams.EditUserId=a),r.ShowClientDynamicForm.call(r,o,function(t){if(t.dialogResult==KDMessageBox.KDDialogResult.Ok){var a="";t.returnValue&&t.returnValue.replace&&(a=t.returnValue.replace('"',"")),i.setPassword(a),i.ok&&(n.LoginResultType=KD.LoginResultType.Success,i.ok.call(i,n))}else i.setPassword(""),E(),e("#password").focus()})},showSpecialForm:function(e,t,n){var i=n||{},a=this,r=new FormManager,o=i&&i.PageId?i.PageId:kendo.guid(),s=i&&i.FormLayoutId?i.FormLayoutId:"",l=new ShowFormParameter(t,s);l.ShowFormType=0,l.Height=210,l.Width=385,l.ResizeMode=0,l.InputData=n,l.PageId=o,e.modal&&(l.modal=e.modal),i&&(i.FormWidth>0&&(l.Width=i.FormWidth),i.FormHeight>0&&(l.Height=i.FormHeight)),a.inputData=n,r.ShowClientDynamicForm.call(r,l,function(t){!a.ok||t.dialogResult!=KDMessageBox.KDDialogResult.Ok&&t.dialogResult!=KDMessageBox.KDDialogResult.Ignore||(e.LoginResultType=KD.LoginResultType.Success,a.ok.call(a,e))})}},e.extend(e.fn.KDLogin.prototype,e.fn.KDControlBase.prototype),e.fn.KDLogin.defaults={qrcodeHtml:'<div id="qr_" class="wrap"><div class="login-wrap"><div class="login-content"><div class="login-scan-qrcode active"><div class="login-qrcode active"><span class="qr-wrap"><img alt="" id="yzjQRCode" src="" /><span class="qrcode-reload"><span></span><i id="qrcode-loseeffect">'+ResManager.LoadKDString("二维码已失效","0991733000006695")+"<br />"+ResManager.LoadKDString("请点击刷新","0991733000006696")+'</i></span></span><b><span id="qrcode-populuarize">'+ResManager.LoadKDString("使用","0991733000006713")+'<a href="http://www.yunzhijia.com/home/?m=open&amp;a=download">'+ResManager.LoadKDString("云之家APP","0991733000006714")+"</a>"+ResManager.LoadKDString("扫描二维码","0991733000006697")+'<span></b></div><div class="scan-guid"></div></div></div></div></div>',qrcodeHtmlNew:'<div id="divqrcodedatacenterinfo" style="padding-left: 60px;padding-top: 20px;"><div style="display: inline;" id="datacenter_ct1"><select id="datacenter1" style="width: 155px;height: 31px;"></select><input id="inputDatacenter1" placeholder='+ResManager.LoadKDString("请输入数据中心名称","0991733030034782")+' class="k-textbox" style="width:122px;display:none;" type="text"/><span id="spanDatacenter1" class="k-icon" style="visibility:hidden;height:26px;"  /></div><div id="language_ct1" style="display: inline;"><select id="language1" style="width: 150px;height: 31px;"></select></div></div><div id="qr_" class="wrap"><div class="login-wrap"><div class="login-content"><div class="login-scan-qrcode active"><div class="login-qrcode active"><div class="qr-wrap"><div style="margin:auto;"><iframe style="width:270px; height:180px;margin-top:-30px" id="childframe" name="childframename" src=""></iframe></div></div><b><span id="qrcode-populuarize">'+ResManager.LoadKDString("使用","0991733000006713")+'<a href="http://www.yunzhijia.com/home/?m=open&amp;a=download">'+ResManager.LoadKDString("云之家APP","0991733000006714")+"</a>"+ResManager.LoadKDString("扫描二维码","0991733000006697")+'<span></b></div><div class="scan-guid"></div></div></div></div></div>',metaHtml:'<div id="{$this.ctId}" class="kdlogin"><div id="loginDBInfo"><div id="verifyType_ct"  style="float:right;margin-right:15px;"><select id="verifyType" style="width: 120px;height: 31px;"></select></div><div id="language_ct" style="float:right;margin-right:15px;"><select id="language" style="width: 135px;height: 31px;"></select></div><div id="datacenter_ct" style="float:right;margin-right:15px;"><select id="datacenter" style="width: 155px;height: 31px;"></select><input id="inputDatacenter" placeholder='+ResManager.LoadKDString("请输入数据中心名称","0991733030034782")+' class="k-textbox" style="width:122px;display:none;" type="text"/><span id="spanDatacenter" class="k-icon" style="visibility:hidden;height:26px;"  /></div></div><div id="loginUserInfo"><div style="height: 53px; width: 310px;" class="kd-login-input-container"><span class="k-icon kd_iconUserName"></span><input id="user" class="k-textbox kd-notborder" autocomplete="off" placeholder='+ResManager.LoadKDString("用户名","0991733000004017")+' style="height: 53px;width:287px;" type="text"/><input id="CAuser" class="k-textbox kd-notborder" autocomplete="off"  style="visibility:hidden;padding-top: 3px;width:287px;" type="text"/></div><div class="divPartingLine"></div><div class="kd-login-msgcontainer"><div id="capslockstate" class="kd-capslock-state"><span class="kd-icon">&nbsp;</span><span class="kd-text"></span></div></div><div style="height: 53px; width: 310px;" class="kd-login-input-container kd-login-psd-container"><span class="k-icon kd_iconPassword"></span><input id="oldpassword" type="hidden" /><input id="password"  class="k-textbox kd-notborder" autocomplete="new-password"  placeholder='+ResManager.LoadKDString("密码","0991733000004018")+' style="height: 53px;width:287px;" type="password"/></div><div class="divPartingLine"></div><div id="grid_VelidationCode" style="display:none"><input id="velidationCode" class="kd-login-velidationCode" style="width: 90px;height: 38px" autocomplete="off" class="k-textbox" placeholder='+ResManager.LoadKDString("验证码","0991733000004019")+' type="text"/><img id="img_VelidationCode" title='+ResManager.LoadKDString("换一张","0991733000004020")+' style="width:98px;height:38px;margin-left:18px;vertical-align:middle;cursor:pointer;"/><span id="link_ChangeCode" class="k-icon kd_iconRefresh" style="margin-left:16px;" title="'+ResManager.LoadKDString("换一张","0991733000004020")+'"></span></div><div class="divPartingLine"></div><div id="SMSVerificationContainer" class="kd-login-sms-container"><div class="kd-login-sms-tips"></div><div style="height:53px;width:180px;display:inline-block;"><div style="height:100%;" class="kd-login-input-container"><span class="k-icon kd-icon-sms-verification"></span><input id="kd-input-sms-verification" class="k-textbox kd-notborder" autocomplete="off" placeholder="'+ResManager.LoadKDString("请输入短信验证码","00214298000005662")+'" style="height:53px;max-width:155px;" type="text"/></div></div><button id="kd-login-btn-sms" type="button" >'+ResManager.LoadKDString("发送验证码","00214298000005663")+'</button></div></div><div id="loginBtnInfo"><button id="btnLogin" style="height: 100%;width:100%" type="button" class="btnlogin">'+ResManager.LoadKDString("登录","00214298000004485")+'</button><span style="float: left;margin-left: 130px;margin-top:10px;cursor: pointer;" id="forgetpass"><div class="kd-getpassword-tips"><div class="kd-getpassword-tips-line"></div><span class="kd-login-tips-text">'+ResManager.LoadKDString("首次登录请点击“忘记密码”来设置密码","002014030033727")+'</span></div><span class="kd-text">'+ResManager.LoadKDString("忘记密码","002014000004304")+'</span></span></div><div id="grid_SRMSupplier" style="display:none;float:right;margin-right:85px;margin-top:15px;"><a id="indexSRMSupplier" class="login-SRMSupplier" href="" target="_blank">'+ResManager.LoadKDString("供应商注册","0991733000007301")+'</a></div><div style="width:100%;height:0px;"></div></div>',footerHtml:'<div><div id="divServiceContactAndPrivacyPolicy"><p id="pServiceContactAndPrivacyPolicy"><a id="linkServiceContact" href="https://cloud.kingdee.com/passport/#/policy-agree/client-kd" target="_blank">'+ResManager.LoadKDString("用户协议","014003030033142")+'</a><span class="kd-login-spiltline">|</span><a id="linkPrivacyPolicy" href="https://cloud.kingdee.com/passport/#/policy-agree/privacy-policy" target="_blank">'+ResManager.LoadKDString("隐私政策","014003030033109")+'</a></p></div><div id="divICPNo"><a id="linkSiteRecordNop" target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030502004999"><span id="img_ICPIcon" style="background-image: url('+KD.getUrlRoot()+"/"+KD.getSubPath()+"/"+KD.getImageUrlByNameAndVersion("kd_icon_extend.png")+')"></span><span class="ICP_SapnLabel">粤公网安备 44030502004999号</span></a><a id="linkSiteRecordNoe" target="_blank" href="https://beian.miit.gov.cn/"><span class="ICP_SapnLabel">粤ICP备05041751号-26</span></a></div><div id="divKDIntroInfo"><p id="pBrowerVersion"><a id="indexDLChrome" target="_blank">'+ResManager.LoadKDString("建议浏览器：","0991733030033749")+'</a>Chrome<span class="kd-login-spiltline">|</span><a id="indexSuggest">'+ResManager.LoadKDString("建议分辨率：1280x1024以上像素","0991733030033750")+'</a><span class="kd-login-spiltline">|</span><a id="indexClearCache" href="#" onclick="KD.ClearLocalCahce()">'+ResManager.LoadKDString("清除本地缓存","099002000002731")+'</a><a id="indexShowHttpwatcher" href="#" style="display:none;" onclick="KD.ShowHttpWatchWindow()">'+ResManager.LoadKDString("查看http数据","099002000002730")+'</a></p><p id="pCopyRight" style="">'+KD.format(ResManager.LoadKDString("{0}1993-{1} 金蝶国际软件集团有限公司版权所有","0991733000004763"),"©","2020")+"</p></div></div>"}};__execContent(jQuery),define("kdlogin",["KDControlBase","KDKeyNavigate","KD"],function(e){return function(){var t;return t||e.kdlogin}}(this)),function(){KD.isDForm()||window.isLoadFullRes||KD.isLoginRenderByPlugins()||$(document).ready(function(){KD.getQueryString("ud","")?KD.initClientInfo(mainlogin):mainlogin()})}(),define("kdmainlogin",["kdlogin","KD"],function(e){return function(){var t;return t||e.kdmainlogin}}(this)),function(e,t){var n=window.kendo,i=n.ui,a=i.Widget,r=a.extend({options:{name:"KDLoginAD"},init:function(t,n){if(a.fn.init.call(this,t,n),this.element=e(t),e(".barItems").length<=0){var i=e('<ol class="barItems">');this.element.append(i)}this.barItems=e(".barItems")},show:function(){var t=this;e("#divImgBg").empty(),t.barItems.empty();var i=KD.getEntryRoleConfig();if(i&&i.loginADPictures&&i.loginADPictures.Items&&!(i.loginADPictures.Items.length<=0)){this.itemsData=i.loginADPictures.Items;for(var a=ResManager.Language+"",r=0;r<this.itemsData.length;r++){var o=this.itemsData[r],s="";switch(a){case"1033":s=o.Value.replace(".png","_1033.png");break;case"3076":s=o.Value.replace(".png","_3076.png");break;case"2052":s=o.Value}var l=e(n.format('<li class="barItem {1}" title="{0}" data-imgUrl="{2}" data-index="{3}"></li>',KD.IsNullOrWhiteSpace(o.Title)?"":o.Title,0==r?"barItemActive":"",s,r));this.barItems.append(l);var c="display: none;";0==r&&(c="display: block;");var d=e(n.format('<img src="{0}" class="ADItem {3}"  data-index="{1}" style="{2}" ondragstart="return false;" />',KD.getUrlRoot()+s,r,c,0==r?"ADItemActive":""));e("#divImgBg").append(d)}var u=t.setADPicState;window.LoginAdplayer&&clearInterval(window.LoginAdplayer),window.LoginAdplayer=KD.setInterval(function(){u()},5e3,"KDLoginAD.show"),e(".barItem",this.barItems).bind("click",function(n){clearInterval(window.LoginAdplayer);var i=e(n.target).attr("data-index");t.selectItem(i);var a=t.setADPicState;window.LoginAdplayer=KD.setInterval(function(){a()},5e3,"KDLoginAD.player.handler")}),window.onresize=function(){t.resize()},e(".ADItem").off("load").on("load",function(){KD.delayInvoke(function(){t.resize()},500)})}},resize:function(){var t=this,n=e("#divImgBg"),i=n.height(),a=n.children().height();return a=a?a:0,0==a||i-2>a?void KD.delayInvoke(function(){t.resize()},500):void this.barItems.css("top",.79*i+"px")},selectItem:function(t){var n=e(".barItemActive",this.barItems),i=Number(n.attr("data-index"));t!=i&&(e(".barItem",this.barItems).removeClass("barItemActive"),e(".barItem[data-index='"+t+"']",this.barItems).addClass("barItemActive"),e(".ADItem",e("#divImgBg")).hide(1).removeClass("ADItemActive"),e(".ADItem[data-index='"+t+"']",e("#divImgBg")).show(1).addClass("ADItemActive"))},setADPicState:function(){var t=e("#divBarTitle"),n=e("#divImgBg"),i=e(".barItemActive",t),a=parseInt(i.attr("data-index"));a=KD.isNaN(a)?0:a;var r=a+1,o=r;e(".ADItem[data-index='"+r+"']",n).length<=0&&(o=0),o!=a&&(e(".barItem",t).removeClass("barItemActive"),e(".barItem[data-index='"+o+"']",t).addClass("barItemActive"),e(".ADItem",n).css("display","none"),e(".ADItem[data-index='"+o+"']",n).css("display","block"))}});i.plugin(r)}(window.kendo.jQuery),define("KDLoginAD",["KD"],function(e){return function(){var t;return t||e.KDLoginAD}}(this)),KDControlFactoryProxy=function(){this.controls={},this.forms=[],this.childForms=[],this.afterControlCreate=null},KDControlFactoryProxy.types={},KDControlFactoryProxy.CustomPluginsFailTypes={},$.extend(KDControlFactoryProxy,{registerType:function(e,t){KDControlFactoryProxy.types[e]=t;var n=t.xtypes=t.xtypes||[];n.push(e);var i=KDControlFactoryProxy.callbackObjects||[],a=i[e];KD.isObject(a)&&a.loadedHandler&&(a.loadedHandler.call(a,e),delete KDControlFactoryProxy.callbackObjects[e])},registerTypeCallback:function(e,t){KDControlFactoryProxy.callbackObjects=KDControlFactoryProxy.callbackObjects||[],KDControlFactoryProxy.callbackObjects[e]=t},registerCustomPluginsFailType:function(e,t){KDControlFactoryProxy.CustomPluginsFailTypes[e]=t},exitCustomPluginsFailType:function(e){return KDControlFactoryProxy.CustomPluginsFailTypes[e]},formatFormtXType:function(e){return(e||"").replace(/\.Silverlight\./gi,".XPF.")},exitForm:function(e){return!!KDControlFactoryProxy.types[e]}}),KDControlFactoryProxy.prototype={dashboardInitExpand:{},setParentFormProxy:function(e){this.formProxy=e},getParentFormProxy:function(){return this.formProxy},createAllProxyInstance:function(e){this.dashboardInitExpand=e.dashboardInitExpand||this.dashboardInitExpand;var t=this.createProxyInstance(e);if(e.items&&t.isContainer())for(var n=e.items.length,i=0;n>i;i++)this.createAllProxyInstance(e.items[i])},getProxyInstance:function(e){var t=e.id?e.id.toUpperCase():void 0;return this.controls[t]?this.controls[t]:this.createProxyInstance(e)},isViewGrid:function(e){return e&&"kdgrid"==e.xtype&&"VIEWGRID"==e.gridtype},isCanKDVGrid:function(e){return e&&"kdgrid"==e.xtype&&("VIEWGRID"==e.gridtype||!!KD.debugKDVEditGrid)},switchAgViewGrid:function(e,t){var n=e;return this.isViewGrid(t)&&KD.debugAgGrid&&KD.equalsIgnoreCase(typeof window.agGrid&&typeof(window.agGrid||{}).Grid,"function")&&(n="kdaggrid"),n},switchKDVGrid:function(e,t){var n=e,i=KD.getLocalConfiguration().EnableListKDVGrid||KD.getConnectConfig().enableListKDVGrid,a=i&&this.isCanKDVGrid(t);if(a&&KD.isFunction($.prototype.KDVGrid)&&KD.isFunction(window.KDVGridProxy)){var r=(window.KDVGridUtils||{}).hasColEditor;KD.isFunction(r)&&!r(t)&&(n="kdvgrid")}else n=this.switchAgViewGrid(e,t);return n},createProxyInstance:function(e){var t=void 0==e.xtype?"panel":e.xtype;t="kdcombo"==t&&e.isMulti?"kdmulticombo":"kdmultiselorg"==t&&e.selmodel?"kdmultiselorgpopup":this.switchKDVGrid(t,e);var n,i=t;if(this.formProxy&&KD.isGalaxyFormTheme(this.formProxy.FormTheme)){var a=KD.getValue(e,"isIgnoreFormTheme",!1);1!=a&&(i=t+"_"+this.formProxy.FormTheme,n=KDControlFactoryProxy.types[i],e.originXtype=t)}n||(n=KDControlFactoryProxy.types[t],i=t);var r=!1;if(n||(n=KDPanelProxy,r=!0),!n)return void KD.Error.raise({sourceClass:"KDControlFactoryProxy",sourceMethod:"createControl",msg:"The '"+t+"' type has not been registered with this manager"});var o=new n,s=e.id?e.id.toUpperCase():void 0,l=this.dashboardInitExpand[s];if(0==l&&(e.visible=!1),$.extend(o,{key:s,xtype:i,controlFactoryProxy:this}),null!=s&&s.length>0&&!e.fromClient)if(void 0!=this.controls[s]){var c='From KDControlFactory <span style="color:blue"><B>control key [" + id + "] is duplicate!</B></span><br>';KD.writeLog(c)}else this.controls[s]=o;return o},removeProxyInstance:function(e){var t=this.controls[e];t&&delete this.controls[e]},createControl:function(e){var t=this.getProxyInstance(e),n=e.id?e.id.toUpperCase():void 0;t.key=n,t.dock=e.dock;var i=void 0==e.xtype?"panel":e.xtype;if("kdform"!=i){var a=this.getParentFormProxy().server;t.setServer(a);var r=null;n&&(r=n.replace("$$","")),t.setBaseId(KD.converToJqId(this.formProxy.baseId)+"-"+(n?r:(e.parent?e.parent:"")+n))}t.setControlFactoryProxy(this),t.createControl(e),this.menuBar||(this.menuBar=[]),t.isMenuBar&&this.menuBar.push(t),this.grids=this.grids||[],t.isGrid&&this.grids.push(t),n&&(this.controls[n.toUpperCase()]=t);var o=this.getParentFormProxy();return o&&$.isFunction(o.onAfterControlCreate)&&o.onAfterControlCreate.call(o,t),t},initEl:function(e,t,n,i){var a=e.getControl();a&&(a.id=e.getBaseId(),a.dock=t.dock,a.proxy=e,a.loadConfig&&a.loadConfig(t),i?(a.css({border:"solid red 1px",overflow:"hidden"}),a.text(a.attr("data-attdata"))):"panel"==n&&a.css({border:"solid yellow 0px"}))},getGrids:function(){return this.grids||[]},getMenuBars:function(){return this.menuBar||[]},getCmp:function(e){var t=e?this.controls[e]:void 0;return void 0===t&&(t=e?this.controls[e.toUpperCase()]:void 0),t},createForm:function(e,t){var n=KDControlFactoryProxy.formatFormtXType(e.xtype);Constructor=KDControlFactoryProxy.types[n],Constructor||KD.Error.raise({sourceClass:"KDControlFactoryProxy",sourceMethod:"createForm",msg:"The '"+n+"' type has not been registered with this manager"});var i=new Constructor;return i.pageId=e.pageId,KD.layout.setCtOrientation(i,e.ctOrientation),i.initiControlFactoryProxy(),i.initElementByContainerProxy(t,e),this.forms.push(i),t&&(t.childForm=i,this.childForms&&this.childForms.push(i)),i},addForm:function(e){e&&KD.isFunction(e.isFlowForm)&&this.forms&&this.forms.push&&this.forms.push(e)},getForm:function(e){var t;for(var n in this.forms)if(e==this.forms[n].pageId){t=this.forms[n];break}return t},removeForm:function(e){var t=function(e,t){var n=-1;for(var i in t)if(t[i]==e){n=i;break}n>=0&&delete t[n]};t(e,this.forms),t(e,this.childForms),e&&e.dformConfig&&ClientAppProxy.Current.removeAliveForm(e.dformConfig.pageId)},getContentFormProxy:function(e){var t,n=this.forms;for(var i in n){var a=n[i];if(a.getHostWindowProxy()==e){t=a;break}}return t},getFromCache:function(e){var t=null;for(var n in this.forms){var i=this.forms[n];if(null!=i.dformConfig&&null!=i.dformConfig.cacheId&&i.dformConfig.cacheId==e){t=i;break}}return t},doLayout:function(){for(var e in this.controls)this.controls[e.toUpperCase()].doLayout()},setActivate:function(e,t){for(var n=void 0===t,i=function(e,t){for(var n=[],i=$(".kd-kdgrid-base",e.el),a=0;a<i.length;a++){var r=(KD.parseObject($(i[a]).attr("data-attdata")||"")||{}).id||"",o=t.getCmp(r);o&&n.push(o)}return n},a=n?this.getGrids():i(t,this),r=n?this.getMenuBars():[],o=0;o<a.length;o++){var s=a[o];s&&KD.isFunction(s.setActivate)&&s.setActivate.call(s,e)}for(var o=0;o<r.length;o++){var l=r[o];l&&KD.isFunction(l.setActivate)&&l.setActivate.call(l,e)}},release:function(){for(var e in this.controls){var t=this.controls[e.toUpperCase()];try{t&&t.release&&t.release.call(t)}catch(n){KD.writeError(n)}}for(var i in this.grids){var a=this.grids[i];try{a&&a.release&&a.release.call(a)}catch(n){KD.writeError(n)}}for(var r in this.forms){var o=this.forms[r];if(o&&o.dformConfig){o.dformConfig.keepInCache=!1;try{o.doCloseWindow&&o.doCloseWindow.call(o)}catch(n){KD.writeError(n)}}}delete this.controls,delete this.grids,delete this.childForms,this.controls=[],this.grids=[],this.childForm=[]}},define("KDControlFactoryProxy",["KD"],function(e){return function(){var t;return t||e.KDControlFactoryProxy}}(this)),KDControlProxy=function(){},$.extend(KDControlProxy,{isBoxCtrl:function(e){var t=!1;return e&&e.item&&(t="kdcheckbox"==e.item.xtype||"kdradio"==e.item.xtype),t}}),KDControlProxy.prototype={InlineStyleValue:"",requestLock:!1,serverLock:!1,getType:function(){return"KDControlProxy"},getXType:function(){return(this.getConfig()||{}).xtype},getKendoCType:function(){return null},getCType:function(){return null},tabindex:0,isKendo:function(){return $.isFunction(this.getKendoCType)&&this.getKendoCType()||null},getPageId:function(){return this.pageId||(this.pageId=this.getFormProxy().dformConfig.pageId),this.pageId},getFormTheme:function(){if(this.getFormProxy){var e=this.getFormProxy();if(e&&e.FormTheme)return e.FormTheme}return""},getHeight:function(e){return this.elHeight=parseInt((e?e:21)/12*100)/100+"em",this.elHeight},getInnerHeight:function(e,t){return this.innerHeight=parseInt(100*(parseFloat(e||this.elHeight)-(t||2)/12))/100+"em",this.innerHeight},setRequestLock:function(e){this.requestLock=e},setServerLock:function(e){this.serverLock=e,e&&this.setRequestLock(!0)},setViewLocked:function(e){if(this.el&&this.requestLock&&(this.viewLocked=e,$(".kd-ui-viewlocker",this.el).remove(),e)){var t={};if(t.height=this.el.height(),"absolute"==this.el.css("position")||"fixed"==this.el.css("position")||"relative"==this.el.css("position"))$.extend(t,{top:0,left:0});else{t.width=this.el.width();var n=this.el.position();t.top=n.top,t.left=n.left}$('<div class="kd-ui-viewlocker">').css(t).appendTo(this.el)}},createControl:function(e){this.rendered=!1,this.activated=!0,this.config=e,this.isDynamicCreated=e&&e.isDynamicCreated,this.el=0!=$("#"+this.baseId).length?$("#"+this.baseId):this.createControlDom(),this.el.addClass("kd-mouseover-el");var t=this.isKendo();return this.el.attr("id",this.baseId),this.el.dock=this.config.dock,KD.setAttachmentData(this.el,e),null==t&&(this.el.proxy=this),this.attachFocusManager(),this.el},setZindex:function(e){this.el.css("z-index",e)},setX:function(e){this.el.css("left",e+"px")},setY:function(e){this.el.css("top",e+"px")},setGuide:function(e,t,n){function i(e){var t=a.menus&&a.menus.data("kendoContextMenu");if(t){if(param.openMenuNode){var n=a.menus.children("li").length;n>0&&!a.menus.is(":visible")&&a.component.click(),targetli=a.menus.find(param.openMenuNode).closest("li"),0==e?(targetli.removeClass("k-state-hover"),param.setMenuChildLiHover&&(targetli.find(param.setMenuChildLiHover).closest("li").removeClass("k-state-hover"),a.menus.closest(".k-animation-container").slideUp(1e3)),t.close(targetli[0])):(targetli.addClass("k-state-hover"),a.menus.closest(".k-animation-container").css("z-index","10010"),t.open(targetli[0]),param.setMenuChildLiHover&&targetli.find(param.setMenuChildLiHover).closest("li").addClass("k-state-hover"))}param.closeMenuNode&&(targetli=a.menus.find(param.closeMenuNode).closest("li"),targetli.removeClass("k-state-hover"),t.close(targetli[0]))}}var a=this;if(param=e[n],!KD.isEmpty(param)){var r={id:" ",content:"  ",guideText:"   ",serverClick:!1,targetKey:" ",guideLineHeiht:50,dock:"bottom",width:195,targetDomId:"",targetDomClass:"",isGuidePrompt:!1,currentPageId:"",addTop:0,addRight:0,addInputTextForNextStep:"",delayDisappear:0,arrowTop:"",addorremovemask:"",addtipsTop:0,addtipsLeft:0,addtipsWidth:0,addtipsHeight:0,addHandTop:0,addHandLeft:0,text:"",guideType:"",outNextStepBtnClass:"",finishClass:"",finishText:"",isExtClickEvent:!0};1==param.isGuidePrompt&&(r.guideLineHeiht=5),param=$.extend(r,param),1==param.toggleMenuChildNode&&i(param);var o=this.itemContainer||this.el||this.component;if(param.getDomNode&&(o=$("body")),!o)return;if(!KD.isEmpty(param.targetDomId)){var s=o.find("#"+param.targetDomId);o=s.length>0?s:o}if(!KD.isEmpty(param.targetDomClass)){var l=o.find("."+param.targetDomClass);o=l.length>0?l:o}param.showTargetParsentClass&&(o=o.closest("."+param.showTargetParsentClass));var c,d,u;if(param.isGuidePrompt&&1==param.isGuidePrompt){var g="left"==param.dock?"kd-popover-placement-left":"kd-popover-placement-right",p="",f="",h=parseInt(param.width)-37;p="<span class='kd-guidePromptTips'>"+param.content+"</span>",param.finishOrknow&&(f=kendo.format("<div><div class='kd-guidePromptHand-knowbtn {1}'><span data-key='Kindee.BOS.KDGuard.Download'>{2}</span><span data-key='Kindee.BOS.KDGuard.Know' class='kd-guidePromptHand-know-text'>{0}</span></div></div>",param.finishOrknow,param.finishClass,param.finishText)),o.addClass("kd-guidepromptintro-outer");var m=this.setGuideSketch(param,o);c=$(kendo.format("<div class='kd-popover {0}' tabindex='0' style='left: 784px; top: 752px; transform-origin: -4px 0px;display:none'><div class='kd-popover-content'><div class='kd-popover-arrow'></div><div class='kd-popover-inner' role='tooltip'><div><div class='kd-popover-inner-content'><div class='kd-popover-message'><div class='kd-sketch {5}' style= 'background-image:url("+KD.getImageUrlByNameAndVersion("kd_big_icon_extend.png")+");'></div></div><div class='kd-popover-text'><div class='kd-popover-textcontents'>{1}</div></div><div class='kd-popover-guidetext {3}'><span class='kd-popover-step {7}'>{4}</span><span class='kd-guidepromptclose'>{2}</span></div>{6}</div></div></div></div></div>",g,p,param.skipGuide,KD.isEmpty(param.skipGuide)?"kd-popover-guide-hide":"",param.index,m,f,param.languageEnglish?"kd-popover-english-step":"")),c.css({width:param.width}),c.find(".kd-guidePromptTips").css({"max-width":h}),KD.IsNullOrWhiteSpace(param.arrowTop)||c.find(".kd-popover-arrow").css({top:param.arrowTop}),param.needMaskLayer&&(d=$("<div class='k-block kd-guidepromptintro-maskLayer' tabindex='-1' id='divMaskLayer_"+param.id+"'></div>"),
u=$("<div class='k-block kd-guidepromptintro-firstmaskLayer' tabindex='-1' id='first_divMaskLayer"+param.id+"'></div>"),$("body").append(d),$("body").append(u)),KD.isEmpty(param.content)&&KD.isEmpty(param.skipGuide)&&c.css({display:"none"})}else c=$("<div class='k-block kd-guideTips' id='tip_"+param.id+"'>"+param.content+"<div class='tip-line'></div><div class='kd-TipsOperators'><a href='#'>"+param.guideText+"</a></div></div>"),c.css({width:param.width});var v=$("<div class='kd-handmasker'></div>");if(KD.isEmpty(param.position)||(c.css({position:param.position}),v.css({position:param.position})),$("body").append(c),KD.isEmpty(param.handdirection)||$("body").append(v),KD.IsNullOrWhiteSpace(param.guideType)){var y=$(".kd-TipsOperators a",c),D=$(".tip-line",c);$(".tip-line:after",c);y.click(function(i){delete a.controlGuide,c.remove()&&v.remove()&&o.removeClass("kd-guidePrompt-extrude kd-guidePrompt-containrelative"),param.serverClick&&t.fireCustomEvents.call(t,param.id,"GuideTipsClick","Click"),t.setControlsGuide.call(t,e,!0,++n),a.afterGuideClose&&a.afterGuideClose()})}else{var K=$(".kd-TipsOperators",c);K.find("a").hide();var C=$(kendo.format("<div class='kd-guide-operationtips kd-guide-confirmtips'><div>{0}</div></div>",ResManager.LoadKDString("确认","00215181000004049"))),k=$(kendo.format("<div class='kd-guide-operationtips kd-guide-cancletips'><div>{0}</div></div>",ResManager.LoadKDString("取消","002014030021133")));K.append(C),K.append(k);var D=$(".tip-line",c);$(".tip-line:after",c);C.off("click").on("click",function(){if(delete a.controlGuide,c.remove()&&v.remove()&&o.removeClass("kd-guidePrompt-extrude kd-guidePrompt-containrelative"),param.serverClick){t.fireCustomEvents.call(t,"confirm","TipsConfirm","Click");var e="Kingdee.BOS.MainConsole.HtmlConsoleMainEdit.H5SmartLayoutChangeTipsConfirm",n={};n.opkey=e,n.opname="Confirm",t.fireCustomEventsNoData.call(t,"Kingdee.BOS.PutUserBehavior","Kingdee.BOS.PutUserBehavior",KD.stringify(n))}a.afterGuideClose&&a.afterGuideClose()}),k.off("click").on("click",function(){if(delete a.controlGuide,c.remove()&&v.remove()&&o.removeClass("kd-guidePrompt-extrude kd-guidePrompt-containrelative"),param.serverClick){t.fireCustomEvents.call(t,"cancle","TipsConfirm","Click");var e="Kingdee.BOS.MainConsole.HtmlConsoleMainEdit.H5SmartLayoutChangeTipsConfirm",n={};n.opkey=e,n.opname="Cancle",t.fireCustomEventsNoData.call(t,"Kingdee.BOS.PutUserBehavior","Kingdee.BOS.PutUserBehavior",KD.stringify(n))}a.afterGuideClose&&a.afterGuideClose()})}if(a.controlGuide={container:o,domGuide:c,param:param,line:D,handPosition:v},KD.isEmpty(param.delayInvokeTimeGuidePS)?a.setGuidePosition():KD.delayInvoke(function(){a.setGuidePosition()},param.delayInvokeTimeGuidePS),1==param.isGuidePrompt){var b=this._setViewTips(o,!0);if(0==b.width()&&b.width(o.innerWidth()),0==b.height()&&b.height(o.innerHeight()),param.targetDomId.indexOf("KDINFOLINK")>-1&&(b=o),KD.equalsIgnoreCase(param.targetDomId,"__kdHelpContainer")){var w=$(".icon-expandandcollapse",this.compoment),S=w&&w.find(".kd-maintabRightDiv-expander");S&&S.addClass("kd-maintabRightDiv-expander-expand").removeClass("kd-maintabRightDiv-expander-collapse"),S&&S.css({width:"40px"}),$("#maintabRightDiv",this.compoment).css({display:"block"})}if(param.delayDisappear>0){var x={domGuide:c,eltips:b,container:o};KD.delayInvoke(function(e){e&&(e.domGuide&&e.domGuide.remove(),e.eltips&&e.eltips.remove(),v&&v.remove(),e.container&&e.container.removeClass("kd-guidepromptintro-outer kd-guidePrompt-extrude"))},param.delayDisappear,!0,x)}b.click(function(r){a.controlGuide.outNextStepBtnNode&&a.controlGuide.outNextStepBtnNode.remove(),delete a.controlGuide,o.removeClass("kd-guidepromptintro-outer kd-guidePrompt-extrude kd-guidePrompt-containrelative"),o.children("a").length>0&&KD.IsNullOrWhiteSpace(param.guideText)?param.stopClick||o.find("a").click():(o.hasClass("kd_SystemMenu")&&(ClientAppProxy.Current.delayLoadData="BOS_MainSystemMenuCard"),param.stopClick||o.click()),param.showFullSearchInput&&a.showSearchInput&&a.showSearchInput(),param.showHelpPanel&&$("body").find("#"+param.targetDomId).click(),i(param),c&&c.remove(),v&&v.remove(),b&&b.remove(),param.serverClick&&t.fireCustomEvents.call(t,param.id,"GuideTipsClick","Click"),param.showPopList&&a.afterGuideClose&&a.afterGuideClose(param),t.setControlsGuide.call(t,e,!0,++n),r.stopPropagation()});var _=$(".kd-guidepromptclose",c);_.click(function(){if(KD.CONST.isStartNewUserUtilityWizards=!0,a.controlGuide.outNextStepBtnNode&&a.controlGuide.outNextStepBtnNode.remove(),delete a.controlGuide,0==param.delayDisappear&&t.fireCustomEvents.call(t,"Kingdee.BOS.GuidePrompt.Close","ReLoadH5InfoPanel",KD.stringify({id:param.id,action:"click"})),t.fireEvent.call(t,"ButtonClick","Kingdee.BOS.GuidePrompt.Close","Kingdee.BOS.GuidePrompt.Close",null),a.closeSearchInput&&a.closeSearchInput(),c&&c.remove(),v&&v.remove(),b&&b.remove(),a.helpContainer&&a.helpContainer.hide(),o&&o.removeClass("kd-guidepromptintro-outer kd-guidePrompt-extrude kd-guidePrompt-containrelative kd-guidepromptintro-relative"),param.closeMenuNode&&a.menus&&a.menus.data("kendoContextMenu")){var e=$("body").find(param.closeMenuNode).closest("li");e.removeClass("k-state-hover"),a.menus.data("kendoContextMenu").close(e[0])}$(".kd-guidepromptintro-maskLayer").remove(),$(".kd-guidepromptintro-firstmaskLayer").remove(),param.showPopList&&a.afterGuideClose&&a.afterGuideClose(param)});var I;if(param.outNextStepBtn){var L=o.offset();I=$("<div tabindex='0' style='position:absolute' class='kd-outNextStepBtnNode'></div>"),I.css({width:o.width()+param.addtipsWidth,height:o.height()+param.addtipsHeight,top:L.top+param.addtipsTop,left:L.left,"z-index":100160}).addClass("kd-ui-viewTips"),param.outNextStepBtnClass&&I.addClass(param.outNextStepBtnClass),a.controlGuide.outNextStepBtnNode=I,o.siblings(".icondiv-masklayer").show(),o.closest("#maintabRightDiv").addClass("kd-maintabright-zindex-upgrade"),$("body").append(I),I.off("click").on("click",function(i){if(0==param.isExtClickEvent){a.controlGuide.outNextStepBtnNode&&a.controlGuide.outNextStepBtnNode.remove(),delete a.controlGuide,o.removeClass("kd-guidepromptintro-outer kd-guidePrompt-extrude kd-guidePrompt-containrelative"),o.siblings(".icondiv-masklayer").hide(),o.closest("#maintabRightDiv").removeClass("kd-maintabright-zindex-upgrade"),c&&c.remove(),v&&v.remove(),b&&b.remove(),param.serverClick&&t.fireCustomEvents.call(t,param.id,"GuideTipsClick","Click"),param.showPopList&&a.afterGuideClose&&a.afterGuideClose(param),t.setControlsGuide.call(t,e,!0,++n)}else b.click();I.remove(),i.stopPropagation()})}f&&param.finishOrknow&&c.find(".kd-guidePromptHand-knowbtn").length>0&&$(".kd-guidePromptHand-knowbtn",c).off("click").on("click",function(e){if(param.text)$(".kd-guidepromptclose",c).click();else{c.remove(),b&&b.remove(),i(!1),$(".kd-guidepromptintro-maskLayer").remove(),$(".kd-guidepromptintro-firstmaskLayer").remove();var n=$(e.target).attr("data-key")||"";o&&o.removeClass("kd-guidePrompt-extrude kd-guidepromptintro-relative"),t.fireEvent.call(t,"ButtonClick",n,n,null)}})}}},setGuidePosition:function(){if(!KD.isEmpty(this.controlGuide)){var e=$(this.controlGuide.container),t=$(this.controlGuide.domGuide),n=this.controlGuide.param||{},i=$(this.controlGuide.line);this._setViewTips(e,!0,!0);var a,r,o=e.offset();if("right"==n.dock||"left"==n.dock){if(i.addClass("tip-line-H"),i.css({left:-n.guideLineHeiht,width:n.guideLineHeiht}),a=o.left+e.width()+n.guideLineHeiht,"left"==n.dock&&(a=o.left-n.width-n.guideLineHeiht-7,i.css({left:n.width-1,width:n.guideLineHeiht}).addClass("tip-line-L")),r=o.top+(e.height()-t.outerHeight())/2,!KD.isEmpty(n.arrowTop)){var s=parseFloat(n.arrowTop);s=KD.isNaN(s)?0:s,r=n.arrowTop.indexOf("%")>0?o.top+e.height()/2-t.outerHeight()*s/100:o.top+e.height()/2-s}}else i.addClass("tip-line-V"),i.css({top:-n.guideLineHeiht,height:n.guideLineHeiht}),a=o.left+e.width()/2-t.outerWidth()/2-n.addRight,r=o.top+e.height()+n.guideLineHeiht;if(1==n.isGuidePrompt&&(a=o.left+e.innerWidth()+n.guideLineHeiht+5,"left"==n.dock&&(a=o.left-n.width-n.addRight-n.guideLineHeiht),r+=parseInt(n.addTop)),n.focusOtherTarget){var l=this.menus&&this.menus.closest(".k-animation-container");if(l){var c=l.offset(),d=c.left-t.outerWidth()-10;a=d>0?d:a,r=c.top>0?c.top:r}}a=0>=a?0:a,r=0>=r?0:r,t.css({left:a,top:r,display:"block"}),n.handdirection&&this.setHandDirection();var u=this.menus&&this.menus.data("kendoContextMenu");u&&this.menus.is(":visible")&&this.menus.closest(".k-animation-container").css("z-index","10010"),this.setoutNextStepBtnNode()}},setHandDirection:function(){if(!KD.isEmpty(this.controlGuide)){var e,t,n=$(this.controlGuide.container),i=$(this.controlGuide.handPosition),a=this.controlGuide.param||{},r=n.offset();switch(e=r.left+(n.width()-i.outerWidth())/2+7,e=e+a.addHandLeft<0?e:e+a.addHandLeft,t=r.top+n.height()+3+a.addHandTop,a.handdirection){case"top":i.css({top:t,left:e}).addClass("kd-handmasker-up");break;case"down":t=r.top-i.outerHeight()-3,i.css({top:t,left:e}).addClass("kd-handmasker-down");break;case"left":e=r.left+n.width()+3,i.css({top:r.top+a.addHandTop,left:e}).addClass("kd-handmasker-left");break;case"right":i.css({top:r.top,left:e-45}).addClass("kd-handmasker-right")}}},setGuideSketch:function(e,t){var n=e.sketchclass||"";switch(e.step){case 1:case 2:t.addClass("kd-guidePrompt-containrelative"),n="kd-userinfosketch";break;case 3:case 4:n="kd-applicationsketch",t.addClass("kd-guidePrompt-extrude");break;case 5:n="kd-helpsketch";break;case 6:n="kd-helpsketch";break;case 7:n="kd-introtocontactus";break;case 8:n="kd-introtoapprise";break;case 9:n="kd-searchsketch-Btn",this.closeSearchInput&&this.closeSearchInput();break;case 10:n="kd-searchsketch-entrance",t.addClass("kd-guidePrompt-containrelative");break;case 11:n="kd-searchsketch-function",t.removeClass("kd-guidepromptintro-outer"),t.addClass("kd-guidepromptintro-relative"),t.find(".kd-fullsearch-searchdisplayname").click()}return n},_setViewTips:function(e,t,n){var i=$('<div class="kd-ui-viewTips">');if(e&&t){var a={};if("kdfullsearch"==this.xtype||"kdicontextbutton"==this.xtype?a.height=e.outerHeight(!0):a.height=e.height(),"absolute"==e.css("position")||"fixed"==e.css("position")||"relative"==e.css("position"))$.extend(a,{top:0,left:0});else{a.width=e.width();var r=e.position();a.top=r.top,a.left=r.left}n?i=e.find(".kd-ui-viewTips").css(a):i.css(a).appendTo(e),param.tipsText&&param.tipstextColor&&param.tipsbgColor&&i.css({"line-height":a.height+"px",color:param.tipstextColor,"background-color":param.tipsbgColor}).text(param.tipsText).addClass("kd-ui-tipstext")}return i},setoutNextStepBtnNode:function(){if(!KD.isEmpty(this.controlGuide)&&this.controlGuide.outNextStepBtnNode){var e=$(this.controlGuide.container),t=this.controlGuide.param||{},n=e.offset();this.controlGuide.outNextStepBtnNode.css({top:n.top+t.addtipsTop,left:n.left})}},createControlDom:function(){return $("<div></div>")},invokeInitComponent:function(){var e=this;KD.delayInvoke(function(){e.initComponent.call(e)})},initComponent:function(){var e=(this.getConfig(),KDFlowlayoutProxy.getFlowLayoutInlineStyleOptions(this.getConfig()));this.InlineStyle=$.extend(this.InlineStyle||{},e),this.initCellComponent(),this.setVisible(KD.getValue(this.config,"visible",!0)),this.rendered=!0,this.setStylekey(KD.getValue(this.config,"Stylekey","")),this.setToolTip(this.config.tooltip||this.config.description||"")},initCellComponent:function(e){var t=this.isKendo(),n=this.getConfig(),i=KDFlowlayoutProxy.getFlowLayoutInlineStyleOptions(n);if(this.InlineStyle=$.extend(this.InlineStyle||{},i),t){var a=$.isFunction(this.getKendoOptions)&&this.getKendoOptions()||{};if(a.style=(a.style?a.style:"")+";"+KD.stringify(this.InlineStyle).replace(/{|}|"+/g,"").replace(/,/g,";"),e)this.el=e,this.component=e[t](a);else{var r=this.createInnerDom();this.el.append(r),this.component=r[t](a)}a.style&&this.component.css(a.style),a.tagClass&&this.component.addClass(a.tagClass),a.id&&this.component.attr("id",a.id),null==this.component||0==this.component.length,KDFlowlayoutProxy.getCtOrientation(n)&&this.el.css(i)}else this.setInlineStyle(),this.el.addClass(this.getStyleKey());this.setVisible(KD.getValue(this.config,"visible",!0)),this.component&&this.setDisabled(KD.getValue(this.config,"disabled",!1)),this.setEditable&&this.setEditable(KD.getValue(this.config,"editable",!0)),this.rendered=!0,this.setStylekey(KD.getValue(this.config,"Stylekey","")),this.setToolTip(this.config.tooltip||this.config.description||"")},createInnerDom:function(){return $("<span>")},getComponentByDom:function(e,t){var n=$("#"+e,this.el);if(n&&n.length||1!=t.length||(n=t),!n||!n.length)for(var i in t){var a=t[i];if(a&&a[0]){var r=$(a[0]).attr("id");if(e==r){n=a;break}}}return n},setInlineStyle:function(e){e&&"string"==typeof e&&(e=KD.parseObject(e)),this.InlineStyle=$.extend(this.InlineStyle||{},e);var t=this.isKendo();t&&this.component?this.component.css(this.InlineStyle):this.el&&this.el.css(this.InlineStyle)},addInlineClass:function(e){if(!e||"string"==typeof e){var t=this.isKendo();t&&this.component?this.component.addClass(e):this.el&&this.el.addClass(e)}},setChildFormCtStyleValue:function(e){var t;t=KD.isArray(e)?e[0]:e||"";var n=(this.isKendo(),this.InlineStyle||{}),i=t.split(";");for(var a in i)if(!KD.IsNullOrWhiteSpace(i[a])){var r=i[a].split(":");n[r[0]]=r[1]}this.hostWindowProxy&&this.hostWindowProxy.el.childFormCt&&this.hostWindowProxy.el.childFormCt.css(n)},setInlineStyleValue:function(e){KD.isArray(e)?this.InlineStyleValue=e[0]:this.InlineStyleValue=e||"";var t=this.isKendo(),n=this.InlineStyle||{},i=this.InlineStyleValue.split(";");for(var a in i)if(!KD.IsNullOrWhiteSpace(i[a])){var r=i[a].split(":");n[r[0]]=r[1]}t&&this.component&&this.component.option?this.component.option("style",n):this.el&&this.el.css(n),this.editor&&this.editor.setInlineStyleValue&&this.editor.setInlineStyleValue(n)},isContainer:function(){return!1},isItemContainer:function(){return!1},isFlowLayout:function(){return!1},getOptions:function(){return{id:this.baseId+"_c",hidden:!1,tagClass:this.getStyleKey()}},getKendoOptions:function(e){var t=this;void 0===e?t.config:e;return{id:t.baseId+"_c",tagClass:t.getStyleKey()}},getStyleKey:function(){return this.config?this.config.stylekey||"":""},setStyleKey:function(e){this.setStylekey(e)},setStylekey:function(e){var t=this.isKendo();t&&this.component?this.component.addClass(e):this.el&&this.el.addClass(e)},isRestting:function(){return this.restting},setRestting:function(e){this.restting=e},setSync:function(e){this.sync=e,this.el&&this.el.attr("data-sync",e)},getSync:function(){var e=this.sync;return this.el&&(e="true"==this.el.attr("data-sync")),e},getToolTip:function(){return this.tooltip},setToolTip:function(e){this.tooltip=e;var t=(KD.htmlUtil.encode(e)||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&");this.component?this.component.attr("title",t):this.el&&this.el.attr("title",t)},getDisabled:function(){return this.disabled},setDisabled:function(e){this.disabled=e;var t=this.isKendo();if(t&&this.component){var n=this.component.data(t);if(n&&n.enable)return n.enable(!e)}},setReadonly:function(e){this.disabled=e,this.readonly=e;var t=this.isKendo();return t&&this.component.data(t).input?this.component.data(t).input.attr("readonly",e):void 0},getStyle:function(){return this.style},getLayoutSettingIsbecommon:function(){return"0"},setStyle:function(e){this.style=e},isVisible:function(){return void 0===this.visible?!0:this.visible&&this.isParentVisible()},setVisible:function(e){var t=this,n=void 0===t.visible?t.config.visible:t.visible,n=void 0===n?!0:n;t.visible!=e&&(t.visible=e,!t.config,t.visible||void 0===t.config.height?void 0!==t.config.metaHeight&&$.extend(t.config,{height:t.config.metaHeight,width:t.config.metaWidth}):$.extend(t.config,{height:0,width:0}),t.el&&t.el.setVisible?(t.el.setVisible(e),t.onAfterVisible.call(t,{visible:e,oldVisible:n})):t.el&&(e?(t.el.show(),t.onAfterVisible.call(t,{visible:!0,oldVisible:n})):(t.el.hide(),t.onAfterVisible.call(t,{visible:!1,oldVisible:n}))))},isParentVisible:function(){return void 0===this.parentVisible?!0:this.parentVisible},setParentVisible:function(e){this.parentVisible=e,this.onAfterVisible({visible:e})},onAfterVisible:function(e){var t=this;KD.isFunction(t.visibleCallback)&&t.visibleCallback(e)},getTabIndex:function(){return this.tabindex},setTabIndex:function(e){this.tabindex=e},getX:function(){return this.x},getY:function(){return this.y},getDock:function(){return this.dock},getZIndex:function(){return this.Zindex},getControlFactoryProxy:function(){return this.controlFactoryProxy},setControlFactoryProxy:function(e){this.controlFactoryProxy=e},getFormProxy:function(){var e=this.controlFactoryProxy,t=e.getParentFormProxy.call(e);return t},getFormId:function(){if(!this.formId){var e=this.getFormProxy();this.formId=e.dformConfig.formid}return this.formId},getControl:function(){return this.el},getParentProxy:function(){var e,t=this.config?this.config.parent:"";if(t){var n=this.getFormProxy();e=n.getControlProxy.call(n,t)}return e},getKey:function(){return this.key},loadConfig:function(e){this.key=e.id,this.config=e,e.height&&(this.config.metaHeight=e.metaHeight?e.metaHeight:e.height,this.elHeight=this.getHeight(e.height),this.innerHeight=this.getInnerHeight()),e.width&&(this.config.metaWidth=e.metaWidth?e.metaWidth:e.width),this.setSync(KD.getValue(e,"sync",!1)),KD.layout.setAbsolute(this.el,e),e.InlineStyle&&"string"==typeof e.InlineStyle&&(e.InlineStyle=KD.parseObject(e.InlineStyle)),this.InlineStyle=e.InlineStyle||{},this.InlineStyleValue=e.InlineStyleValue||"",e.font&&this.setFont(e.font),e.text&&this.isDontLazy()&&this.el.text(e.text)},isDontLazy:function(){return this.rendered},doLazyAction:function(){var e=this.lazyActions;if(e){for(var t=e.length,n=0;t>n;n++){var i=e[n];if("updateState"==i.name)this.updateState(i.args);else if("invokeMethod"==i.name)this.invokeMethod(i.args[0],i.args[1]);else if("showDynamicForm"==i.name){var a=this.getFormProxy();a.showDynamicForm.call(a,i.args)}else"selectEntities"==i.name&&this.setSelectEntities&&this.setSelectEntities(i.args.selectEntities)}delete this.lazyActions}},pushLazyAction:function(e,t){this.lazyActions||(this.lazyActions=[]),this.lazyActions.push({name:e,args:t})},pushLazyMsg:function(e,t){if(this.lazyMsg||(this.lazyMsg=[],this.lazyMsgKeyMap={}),"UpdateControlStates"==e||"InvokeControlMethod"==e){var n=t[0].key;this.lazyMsgKeyMap[n]=this.lazyMsgKeyMap[n]||[],this.lazyMsgKeyMap[n].push({index:this.lazyMsg.length})}this.lazyMsg.push({actionname:e,params:t})},updateState:function(e){return this.updateStateIgnoreActive(e),this.isDontLazy()?void this.updateStateCore(e):void this.pushLazyAction("updateState",e)},updateStateIgnoreActive:function(e){},updateStateCore:function(e){var t=e?e.key:"[]",n="";for(var i in e){n=i;try{if(i in this&&"function"==typeof this[i])this[i].call(this,e[i]);else{var a=i.substr(0,1);n="set"+a.toUpperCase()+i.substr(1),this[n]?this[n].call(this,e[i]):this.editor&&this.editor[n]?this.editor[n].call(this.editor,e[i]):this[i]=e[i]}}catch(r){var o=this.getFormProxy();!KD.writeError(r)&&o&&o.showErrMsgStr.call(o,"KDControlProxy.updateState(),key:"+t+";method:"+n,r.message+"<p>"+r.description+"<p>"+r.stack)}}},invokeMethod:function(e,t){if(!this.isDontLazy())return void this.pushLazyAction("invokeMethod",[e,t]);var n,i,a=e.substr(0,1),r=a.toLowerCase()+e.substr(1);return r in this&&"function"==typeof this[r]?t&&0!=t.length?1==t.length?n=this[r].call(this,t[0]):2==t.length?this[r].call(this,t[0],t[1]):3==t.length?this[r].call(this,t[0],t[1],t[2]):4==t.length?this[r].call(this,t[0],t[1],t[2],t[3]):5==t.length?this[r].call(this,t[0],t[1],t[2],t[3],t[4]):6==t.length&&this[r].call(this,t[0],t[1],t[2],t[3],t[4],t[5]):this[r].call(this):this.isItemContainer()&&this.editor&&(n=this.editor.invokeMethod.call(this.editor,e,t)),0==(e+"").toLowerCase().indexOf("get")&&(i=n),i},setServer:function(e){this.server=e},getConfig:function(){return this.config},getServer:function(){return this.server},setBaseId:function(e){this.baseId=e},getBaseId:function(){return this.baseId},focus:function(e){},doLayout:function(){this.el&&this.el.doLayout&&this.el.doLayout(),this.setGuidePosition()},doParentLayout:function(){var e=this.getParentProxy();e&&e.doLayout&&e.doLayout.call(e)},setItemContainer:function(e){this.itemContainer=e},updateDisplayText:function(){return this.el.setValue(this.getValue())},release:function(){var e=this.isKendo();if(this.isChilderInited=!1,this.el&&e){var t=this.el.data(e);t&&t.destroy(),this.component&&this.component.remove()}this.detachFocusManager(),this.el&&this.el.release&&this.el.release()},setHeight:function(e){this.config&&(this.config.customHeight=e),this.el&&this.el.css("height",e+"px"),this.editor&&this.editor.setHeight&&this.editor.setHeight.call(this.editor,e)},setWidth:function(e){this.config&&(this.config.customWidth=e),this.el&&this.el.css("width",e+"px"),this.editor&&this.editor.setWidth&&this.editor.setWidth.call(this.editor,e)},setFont:function(e){if(e){var t=KD.parseObject(e),n=new Object;for(var i in t)"fontName"==i?n["font-family"]=this.getCssFontName(t[i]):"fontStyle"==i?(this.el.css("font-style","normal"),this.IsFontBold(t[i])&&(n["font-weight"]="bold"),this.IsItalic(t[i])&&(n["font-style"]="italic"),this.IsStrikeout(t[i])&&(n["text-decoration"]="line-through"),this.IsUnderline(t[i])&&(n["text-decoration"]="underline")):"fontSize"==i?n["font-size"]=t[i]+"px":this.el.css(i,t[i]);this.el.css(n)}},setForecolor:function(e){this.setForeColor(e)},setForeColor:function(e){if(!KD.IsNullOrWhiteSpace(e)){var t=-1!=e.indexOf("#")||-1!=e.toUpperCase().indexOf("RGB")?KD.interceptColorStr(e):"rgb("+e+")";this.el.css("color",t),this.editor&&this.editor.setForeColor(t)}},setTitleForceColor:function(e){if(!KD.IsNullOrWhiteSpace(e)){var t=-1!=e.indexOf("#")||-1!=e.toUpperCase().indexOf("RGB")?KD.interceptColorStr(e):"rgb("+e+")";this.el.find(".kdItemContainer_label span").css("color",t)}},setBackcolor:function(e){this.setBackColor(e)},setBackColor:function(e){if(!(KD.IsNullOrWhiteSpace(e)||this.editor&&this.editor.disabled)){var t=-1!=e.indexOf("#")||-1!=e.toUpperCase().indexOf("RGB")?KD.interceptColorStr(e):"rgb("+e+")";this.editor&&this.editor.setBackColor&&this.editor.setBackColor(t)}},getCssFontName:function(e){return"宋体"==e?"Simsun":"楷体"==e?"KaiTi":"黑体"==e?"SimHei":"仿宋"==e?"FangSong":"微软正黑体"==e?"Microsoft JhengHei":"细明体"==e?"MingLiu":"微软雅黑"==e?"Microsoft YaHei":"隶书"==e?"LiSu":"华文彩云"==e?"STCaiyun":"华文琥珀"==e?"STHupo":"华文隶书"==e?"STLiti":"华文新魏"==e?"STXinwei":"华文行楷"==e?"STXingkai":"幼圆"==e?"YouYuan":"SimSun"},IsFontBold:function(e){return 1==(1&e)},IsStrikeout:function(e){return 8==(8&e)},IsUnderline:function(e){return 4==(4&e)},IsItalic:function(e){return 2==(2&e)},IsNormal:function(e){return 0==(0&e)},getBlocking:function(e){var t=this,n=t.blocking;return n||(t.blocking=n=new KD.blocking,n.init.call(n,$.extend({target:t.getControl(),text:""},e))),n},showBlocking:function(e){var t=this.getBlocking();t.show.call(t,e)},hideBlocking:function(e){var t=this.getBlocking();t.hide.call(t,e)},attachFocusManager:function(){FormFocusedManager.registeCtrlProxy(this)},detachFocusManager:function(){FormFocusedManager.unregisteCtrlProxy(this)},getLineTipsDefConfig:function(e){var t={id:e,xtype:"kdtooltip"};return t}},define("KDControlProxy",["ResManager","KDControlFactoryProxy","KD"],function(e){return function(){var t;return t||e.KDControlProxy}}(this)),KDWebSocketProxy=KD.extend(KDControlProxy,{createControl:function(e){var t=KDWebSocketProxy.superclass.createControl.call(this,e);return t},loadConfig:function(e){KDWebSocketProxy.superclass.loadConfig.call(this,e)},initComponent:function(){this.rendered=!0,this.open()},onOpen:function(e){var t=this,n=t.getFormProxy();n&&e.data&&n.fireCustomEvents.call(n,t.getKey(),"websocket_open","")},onMessage:function(e){var t=this,n=t.getFormProxy();n&&e.data&&n.fireCustomEvents.call(n,t.getKey(),"websocket_message",e.data)},onError:function(e){this.el.text(e.data).attr("title",e.data)},onClose:function(e){this.close()},open:function(e){var t=this,e=e||t.config;try{var n=window.WebSocket||window.MozWebSocket,i=this.socket=new n(KD.getEncodeUrl(e.url||""),KD.getValue(e,"protocal","ws"));i.onopen=function(e){t.onOpen.call(t,e)},i.onClose=function(e){t.onOpen.call(t,e)},i.onmessage=function(e){t.onMessage.call(t,e)},i.onerror=function(e){t.onError.call(t,e)}}catch(a){delete this.socket,this.el.text(a.message).attr("title",a.message)}},send:function(e){var t=this.socket;t&&t.send&&t.send(e)},close:function(){var e=this.socket;e&&e.close&&(e.close(),delete this.socket)},release:function(){this.close(),KDWebSocketProxy.superclass.release.call(this)}}),KDControlFactoryProxy.registerType("kdwebsocket",KDWebSocketProxy),define("KDWebSocketProxy",["KDControlProxy","KD"],function(e){return function(){var t;return t||e.KDWebSocketProxy}}(this)),KDCustomControlProxy=KD.extend(KDControlProxy,{loadConfig:function(e,t){KDCustomControlProxy.superclass.loadConfig.call(this,e);var n=KDCustomControlProxy.getPluginOptions({ver:e.VersionInfo,assembly:e.Assembly});KDCustomControlProxy.createPluginNode(this.getKey(),n.jsUrl,n.cssUrl,this)},createCustomControl:function(e){var t=this,n=window[e.ClassName];n?(t.innerControl=new n,t.innerControl.setOwner.call(t.innerControl,t)):t.el.text(e.ClassName+" no exist!"),t.innerControl&&$.isFunction(t.innerControl.initControl)&&t.innerControl.initControl.call(t.innerControl,t.el)},doLayout:function(){this.innerControl&&this.innerControl.doLayout.call(this.innerControl)},onNodeCreated:function(e){var t=this;t.createCustomControl(e.scope.config)},onNodeCreating:function(){},doCustomMethod:function(e,t){if(this.innerControl)try{var n=e.substr(0,1).toLowerCase()+e.substr(1),i=this.innerControl[n]||this.innerControl[e];if($.isFunction(i))i.apply(this.innerControl,t);else{var a="method:"+e+"(arguments:"+t.length+"),no exist！";KD.writeLog(a)}}catch(r){this.onError(r)}},fireCustomEvents:function(e,t){var n=this.getFormProxy();if(n){var i="";i="string"==typeof t?t:KD.stringify(t),n.fireCustomEvents.call(n,this.getKey(),e,i)}},onError:function(e){var t=this.getFormProxy();t?t.showErrMsgStr&&t.showErrMsgStr(e.message,e.stack):KD.writeLog(e.message+";"+e.stack)},release:function(){this.innerControl&&this.innerControl.release.call(this.innerControl)}}),KDControlFactoryProxy.registerType("kdcustomcontroldef",KDCustomControlProxy),$.extend(KDCustomControlProxy,{baseJsPath:KD.getUrlRoot()+"/"+KD.getSubPath()+"/script/kd/plugins/",baseCssPath:KD.getUrlRoot()+"/"+KD.getSubPath()+"/content/themes/kd/plugins/",getResourceOptions:function(e){var t=e.ver?"?ver="+e.ver.replace(/[\s\-\:]/g,""):"",n=e.assembly||"",i=e.hasJs?n+".js"+t:"",a=e.hasCss?n+".css"+t:"";return{jsUrl:i,cssUrl:a,key:e.key}},createResourceNodeBatch:function(e){var t=e.items.length,n="";for(var i in e.items){var a=e.items[i],r=a.pageTypes||"",o=KD.getConnectConfig().pageType||"";(!r||r.indexOf(KD.format(",{0},",o))>=0)&&KDCustomControlProxy.createResourceNode(a.key,a.jsUrl,a.cssUrl,{onNodeCreated:function(i){t--,n+=i.message||"",0==t&&$.isFunction(e.onComplete)&&e.onComplete.call(e.scope,{message:n,isSuccess:!0,scope:e.scope})},onError:function(i){t--,n+=i.message||"",0==t&&$.isFunction(e.onError)&&e.onError.call(e.scope,{message:n,isSuccess:!1,scope:e.scope,eventoption:i})}},100)}},createResourceNode:function(e,t,n,i,a){i&&i.onNodeCreating&&i.onNodeCreating.call(i,{scope:i,moduleName:e,jsUrl:t,cssUrl:n});var r=function(){i&&i.onNodeCreated&&i.onNodeCreated.call(i,{scope:i,moduleName:e,jsUrl:t,cssUrl:n})},o=document.getElementsByTagName("head")[0];if(n&&0==$('link[href="'+n+'"]').length){var s=document.createElement("link");$.extend(s,{rel:"stylesheet",charset:"utf-8",href:n,async:!0,moduleName:e}),o.appendChild(s)}if(t&&0==$('script[src="'+t+'"]').length){var l=document.createElement("script");$.extend(l,{type:"text/javascript",charset:"utf-8",src:t,async:!0,moduleName:e}),$(l).attr("data-requirecontext","kd"),!l.attachEvent||l.attachEvent.toString&&l.attachEvent.toString().indexOf("[native code")<0||isOpera?(l.addEventListener("load",i.onScriptLoad||i.onNodeCreated,!1),l.addEventListener("error",i.onScriptError||i.onError,!1)):l.attachEvent("onreadystatechange",i.onScriptLoad),o.appendChild(l)}else r();return{cssNode:s,scriptNode:l}},getPluginOptions:function(e){var t=/^http(s){0,}:\/\//,n=e.ver?"?ver="+e.ver.replace(/[\s\-\:]/g,""):"",i=e.assembly||"";if(t.test(i||"")){var a=document.location.protocol;i=i.replace(t,a+"//")}var r=KD.isUrl(i)?i:KDCustomControlProxy.baseJsPath+i+".js"+n,o=KD.isUrl(i)?i:KDCustomControlProxy.baseCssPath+i+".css"+n;return{jsUrl:r,cssUrl:o,key:e.key,pageTypes:e.pageTypes}},createPluginNode:function(e,t,n,i,a){KDCustomControlProxy.createResourceNode(e,t,n,i,a)},createPluginNodeBatch:function(e){KDCustomControlProxy.createResourceNodeBatch(e)},loadLanguageRes:function(e,t,n){var i=ResManager.hasLanguageRes(e);if(i)n&&n(t,{result:!0});else{var a="html5"==KD.getSubPath().toLowerCase(),r=KD.isDebug()&&!a,o=KD.getVersion()?"?ver="+KD.getVersion().replace(/[\s\-\:]/g,""):"",s=r?"":".min",l=KDCustomControlProxy.getLocalNameById(e),c=r?"kendo.src":"kendo",d=KD.format("{0}/{1}/script/thirdpart/{2}/cultures/kendo.culture.{3}{4}",KD.getUrlRoot(),KD.getSubPath(),c,l,s),u=KD.format("{0}/{1}/script/thirdpart/{2}/messages/kendo.messages.{3}{4}",KD.getUrlRoot(),KD.getSubPath(),c,l,s),g=KD.format("{0}/{1}/script/LangRes/MlResource_{2}{3}",KD.getUrlRoot(),KD.getSubPath(),e,"");KDCustomControlProxy.createResourceNodeBatch({items:[{key:d,ver:KD.getVersion(),jsUrl:KD.format("{0}{1}{2}",d,".js",o)},{key:u,ver:KD.getVersion(),jsUrl:KD.format("{0}{1}{2}",u,".js",o)},{key:g,ver:KD.getVersion(),jsUrl:KD.format("{0}{1}{2}",g,".js",o)}],scope:this,onComplete:function(e){KD.delayInvoke(function(){n&&n(t,{result:!0})},1e3)},onError:function(e){KD.writeLog(e.message||"error",e.stack||KD.stringify(e)),n&&n(t,{result:!0,exception:e})}})}},getLocalNameById:function(e){var t=KD.getLocalIdToNameMaps();return t[e]||t[2052]}}),KDCustomControlBase=function(){},KDCustomControlBase.prototype={setOwner:function(e){this.owner=e,this.formOwner=e.getFormProxy.call(e)},fireEvent:function(e,t){this.owner&&this.owner.fireCustomEvents.call(this.owner,e,t)},initControl:function(e){return $("<div>KDCustomControlBase</div>").appendTo(e)},doLayout:function(){},release:function(){delete this.owner,delete this.formOwner}},$.extend(KD,{pluginsReadyHandlers:[],pluginReady:function(e){KD.pluginsReadyHandlers.push(e)},triggerPluginsReady:function(){for(var e in KD.pluginsReadyHandlers){var t=KD.pluginsReadyHandlers[e];t&&t()}}}),function(){$(document).ready(function(){var e=KD.getEntryRoleConfig();if(e&&e.jsPlugins){var t=[],n="EntryRole_Plugins",i=e||{},a=i.jsPlugins||{},r=i.cssPlugins||{},o=a.Version||KD.getVersion(),s=a.Items||[],l=r.Items||[];if(l)for(var c in l){var d=l[c],u=KDCustomControlProxy.getPluginOptions({key:n,ver:d.Version||o,assembly:d.Value,pageTypes:d.PageTypes||""});delete u.jsUrl,t.push(u)}if(s)for(var c in s){var d=s[c];u=KDCustomControlProxy.getPluginOptions({key:n,ver:o||d.Version,assembly:d.Value,pageTypes:d.PageTypes||""}),delete u.cssUrl,t.push(u)}return t.length>0?(KDCustomControlProxy.createPluginNodeBatch({items:t,scope:this,onComplete:function(e){KD.triggerPluginsReady()},onError:function(e){KD.writeLog(e.message||"error",e.stack||KD.stringify(e))}}),!0):void 0}})}(),define("KDCustomControlProxy",["KDControlProxy","KD"],function(e){return function(){var t;return t||e.KDCustomControlProxy}}(this)),function(e){KDLocalServices=function(e){},$.extend(KDLocalServices,{connectionAddr_http:"ws://127.0.0.1:9268",connectionAddr_https:"wss://127.0.0.1:9269",getConnectStr:function(){var t=e.getConnectConfig().localServiceUrl||(KDLocalServices.isIeHttps()?KDLocalServices.connectionAddr_https:KDLocalServices.connectionAddr_http);return t},isIeHttps:function(){return e.isIeHttps()},getSocket:function(){
var e=window.WebSocket||window.Websocket||window.webSocket||window.websocket||window.MozWebSocket;return e},hasSocket:function(){return!(void 0===KDLocalServices.getSocket())},startLocalServer:function(t,n){var i=t.callback||n;e.isFunction(i)&&i({sucess:!0})},createServicesChannel:function(t,n){var i=KDLocalServices;if(i.isIeHttps()){delete i.ws;var a=t.error||n;e.isFunction(a)&&a({message:"nonsupport websocket!",returnValue:!1,type:"iehttps"})}else if(i.ws&&1==i.ws.readyState)e.isFunction(n)&&n({message:"success!",returnValue:!0,type:"open"});else{delete i.ws;var r=KDLocalServices.getSocket(),o=null;try{if(r)o=i.ws=i.ws||new r(KDLocalServices.getConnectStr()),o.onopen=function(a){i.ws=o;var r=t.open||n;e.isFunction(r)&&r(a)},o.onmessage=function(i){var a=t.message||n;e.isFunction(a)&&a(i)},o.onclose=function(a){var r=t.close||n;a.normalClose=i.normalClose,delete i.normalClose,e.isFunction(r)&&r(a),delete i.ws},o.onerror=function(a){var r=t.error||n;e.isFunction(r)&&r(a),delete i.ws};else{delete i.ws;var a=t.error||n;e.isFunction(a)&&a({message:"nonsupport websocket!",returnValue:!1,type:"open"})}}catch(s){e.writeError(s),i.ws=void 0}}},sendData:function(t){var n=KDLocalServices;if(void 0!==n.ws&&1==n.ws.readyState){var i=e.isString(t)?t:e.stringify(t);n.ws.send(i)}},close:function(){},alertToStartService:function(){if(!($("span.k3cloudapp-configure-localservice-flag").length>0)&&e.isWinOS()){var t=ResManager.LoadKDString("系统检测到您本机未启用或已停用金蝶云星空本地服务，启用后可提供以下功能","0025710000008621")+"<br/>"+ResManager.LoadKDString("1、浏览器直接打印；","0025710000008373")+"<br/>"+ResManager.LoadKDString("2、获取IP地址和机器MAC地址。","0025710000008475")+'<span class="k3cloudapp-configure-localservice-flag"/><br/>&nbsp',n=(e.getUrlRoot()||"").replace(/http[s]{0,}\:\/\//,"k3cloud://")+"/Clientbin/K3cloudclient/KDK3CloudLocalTray.manifest?LoginUrl="+(e.getUrlRoot()||"")+"/",i=t,a=ResManager.LoadKDString("金蝶云星空本地服务安装引导","0025710000008622"),r=ResManager.LoadKDString("打开金蝶云星空本地服务","0025710000008623");e.writeLog("KDLocalServices::","alertToStartService!",!0);var o=!0;e.openK3CloudApp(n,a,r,i,o)}},closeAlert:function(){var t=$("span.k3cloudapp-configure-localservice-flag").closest(".k-window-content").data("kendoWindow");t&&e.isFunction(t.close)&&t.close()},alertNoSupportIeHttps:function(){var e=ResManager.LoadKDString("由于IE浏览器安全机制限制，当前运行在https协议上，暂时还不支持本地服务的调用！请采用其他浏览器，例如：谷歌（chrome）、火狐（firefox）。","0025710000008569");KDMessageBox.show({type:KDMessageBox.KDMesBoxType.Warning,sourceClass:"",sourceMethod:"",msg:e})}})}(KD),define("KDLocalServices",["KD"],function(e){return function(){var t;return t||e.KDLocalServices}}(this)),function(e){KDLocalServiceClient=function(e){},$.extend(KDLocalServiceClient,{acts:{},closeAlert:function(){KDLocalServices.closeAlert()},getClientInfo:function(t,n,i){if(!KDLocalServices.hasSocket())return void(t&&t(n,{ReturnPacks:""}));var a=KDLocalServiceClient,r=a.getActionPack("GetClientInfo",n);r.ignoreMessage=!(1==parseInt((e.getConnectConfig()||{}).autoCheckLocalServiceTray||"0"));var o=function(e,n){i||KDLocalServices.close(),r.ignoreMessage||n.IsSuccessful||a.hasAlert||(a.hasAlert=!0,"iehttps"==n.type?KDLocalServices.alertNoSupportIeHttps():KDLocalServices.alertToStartService()),t(e,n)};a.sendData([r],o,n)},checkOrUpdateVersion:function(e,t){var n=KDLocalServiceClient;n.getClientInfo(function(t,n){var i=n.ReturnPacks||[],a=i.length>0?i[0]:{};"1.0.0.0"==a.Version,KDLocalServices.close(),e(t,n)},t,!0)},invokeLocalAction:function(t,n,i,a,r,o){var s=KDLocalServiceClient;if(!KDLocalServices.hasSocket())return void(t&&t(n,{ReturnPacks:"",isSupportSocket:!1}));var l=s.getDynActionPack(i,"",a,r);l.ignoreMessage=!(1==parseInt((e.getConnectConfig()||{}).autoCheckLocalServiceTray||"0"));var c=function(e,n){o||KDLocalServices.close(),l.ignoreMessage||n.IsSuccessful||s.hasAlert||(s.hasAlert=!0,"iehttps"==n.type?KDLocalServices.alertNoSupportIeHttps():KDLocalServices.alertToStartService()),t(e,n)};s.sendData([l],c,n)},invokeLocalActionExt:function(t,n,i,a,r,o,s){var l=KDLocalServiceClient;if(!KDLocalServices.hasSocket())return void(t&&t(n,{ReturnPacks:"",isSupportSocket:!1}));var c=l.getDynActionPack(i,a,r,o),d=(o[0]||{}).ignoreMessage,u=!(1==parseInt((e.getConnectConfig()||{}).autoCheckLocalServiceTray||"0"));c.ignoreMessage=void 0!==d?d:u;var g=function(e,n){s||KDLocalServices.close(),c.ignoreMessage||n.IsSuccessful||("iehttps"==n.type?KDLocalServices.alertNoSupportIeHttps():KDLocalServices.alertToStartService()),t(e,n)};l.sendData([c],g,n)},exit:function(e,t){if(!KDLocalServices.hasSocket())return void(e&&e(t,{ReturnPacks:""}));var n=KDLocalServiceClient,i=n.getActionPack("Exit",t),a=function(t,n){KDLocalServices.close(),e(t,n)};n.sendData([i],a,t)},initChannel:function(t,n,i){var a=KDLocalServiceClient,r=t.actId||"";KDLocalServices.createServicesChannel({open:function(t){KDLocalServiceClient.closeAlert(),e.isFunction(i)&&i(n,t)},message:function(t){a.sendDataCallBack(n,t),e.writeLog("KDLocalServiceClient::",((t||{}).data||"").substr(0,900),!0)},close:function(t){a.setBusy(!1,n);var i=a.getErrData(t,r,"close");t.data=e.stringify(i),a.sendDataCallBack(n,t),e.writeLog("KDLocalServiceClient::",i.Message,!0)},error:function(t){a.setBusy(!1,n);var i=a.getErrData(t,r,"error");t.data=e.stringify(i),a.sendDataCallBack(n,t),e.writeLog("KDLocalServiceClient::",i.Message,!0)}},function(t){e.isFunction(i)&&i(n,t)})},sendData:function(e,t,n){var i=KDLocalServiceClient,a=e[0]||{};i.acts[a.actId]={callback:t,args:e,scope:n},i.initChannel(a,n,function(t,n){KDLocalServices.sendData(e)})},sendDataCallBack:function(t,n){var i=KDLocalServiceClient,a=e.parseObject(n.data),r=(a.ActionPacks?a.ActionPacks[0]:{})||{},o=(r?r.actId:"")||"",s=i.acts[o];a.type=n.type,delete i.acts[o],s&&e.isFunction(s.callback)&&s.callback(s.scope,a),i.setBusy(!1,t)},setBusy:function(e,t){var n=t.owner;n&&n.setBusy.call(n,e)},getActionPack:function(t,n,i,a){for(var r=(KDLocalServiceClient,{success:!0,actionKey:"ClientActions",methodName:t,params:[null],pageId:"",jobId:"",message:"",isoId:"",actId:e.Guid.NewGuid().ToString()}),o=[],s=2;s<arguments.length;s++){var l=arguments[s];o.push(l)}return 0==o.length&&o.push(null),r.params=o,r},getDynActionPack:function(t,n,i,a){var r=(KDLocalServiceClient,{success:!0,actionKey:n||"ClientActions",clsAsmStr:i||"Kingdee.BOS.LocalActions.Actions.ClientActionHandler,Kingdee.BOS.LocalActions",targetMethod:t,methodName:"DoTargetMethodProxy",params:[null],pageId:"",jobId:"",message:"",isoId:"",actId:e.Guid.NewGuid().ToString()});return r.params=a,r},getErrData:function(e,t,n){var i={actId:t},a={},r={IsSuccessful:!1,Message:(e||{}).data||n,ActionPacks:[i],ReturnPacks:[a]};return r}})}(KD),define("KDLocalServiceClient",["KD","KDLocalServices"],function(e){return function(){var t;return t||e.KDLocalServiceClient}}(this));var pJS=function(e,t){var n=document.querySelector("#"+e+" > .particles-js-canvas-el");this.pJS={canvas:{el:n,w:n.offsetWidth,h:n.offsetHeight},particles:{number:{value:400,density:{enable:!0,value_area:800}},color:{value:"#fff"},shape:{type:"circle",stroke:{width:0,color:"#ff0000"},polygon:{nb_sides:5},image:{src:"",width:100,height:100}},opacity:{value:1,random:!1,anim:{enable:!1,speed:2,opacity_min:0,sync:!1}},size:{value:20,random:!1,anim:{enable:!1,speed:20,size_min:0,sync:!1}},line_linked:{enable:!0,distance:100,color:"#fff",opacity:1,width:1},move:{enable:!0,speed:2,direction:"none",random:!1,straight:!1,out_mode:"out",bounce:!1,attract:{enable:!1,rotateX:3e3,rotateY:3e3}},array:[]},interactivity:{detect_on:"canvas",events:{onhover:{enable:!0,mode:"grab"},onclick:{enable:!0,mode:"push"},resize:!0},modes:{grab:{distance:100,line_linked:{opacity:1}},bubble:{distance:200,size:80,duration:.4},repulse:{distance:200,duration:.4},push:{particles_nb:4},remove:{particles_nb:2}},mouse:{}},retina_detect:!1,fn:{interact:{},modes:{},vendors:{}},tmp:{}};var i=this.pJS;t&&Object.deepExtend(i,t),i.tmp.obj={size_value:i.particles.size.value,size_anim_speed:i.particles.size.anim.speed,move_speed:i.particles.move.speed,line_linked_distance:i.particles.line_linked.distance,line_linked_width:i.particles.line_linked.width,mode_grab_distance:i.interactivity.modes.grab.distance,mode_bubble_distance:i.interactivity.modes.bubble.distance,mode_bubble_size:i.interactivity.modes.bubble.size,mode_repulse_distance:i.interactivity.modes.repulse.distance},i.fn.retinaInit=function(){i.retina_detect&&window.devicePixelRatio>1?(i.canvas.pxratio=window.devicePixelRatio,i.tmp.retina=!0):(i.canvas.pxratio=1,i.tmp.retina=!1),i.canvas.w=i.canvas.el.offsetWidth*i.canvas.pxratio,i.canvas.h=i.canvas.el.offsetHeight*i.canvas.pxratio,i.particles.size.value=i.tmp.obj.size_value*i.canvas.pxratio,i.particles.size.anim.speed=i.tmp.obj.size_anim_speed*i.canvas.pxratio,i.particles.move.speed=i.tmp.obj.move_speed*i.canvas.pxratio,i.particles.line_linked.distance=i.tmp.obj.line_linked_distance*i.canvas.pxratio,i.interactivity.modes.grab.distance=i.tmp.obj.mode_grab_distance*i.canvas.pxratio,i.interactivity.modes.bubble.distance=i.tmp.obj.mode_bubble_distance*i.canvas.pxratio,i.particles.line_linked.width=i.tmp.obj.line_linked_width*i.canvas.pxratio,i.interactivity.modes.bubble.size=i.tmp.obj.mode_bubble_size*i.canvas.pxratio,i.interactivity.modes.repulse.distance=i.tmp.obj.mode_repulse_distance*i.canvas.pxratio},i.fn.canvasInit=function(){i.canvas.ctx=i.canvas.el.getContext("2d")},i.fn.canvasSize=function(){i.canvas.el.width=i.canvas.w,i.canvas.el.height=i.canvas.h,i&&i.interactivity.events.resize&&window.addEventListener("resize",function(){i.canvas.w=i.canvas.el.offsetWidth,i.canvas.h=i.canvas.el.offsetHeight,i.tmp.retina&&(i.canvas.w*=i.canvas.pxratio,i.canvas.h*=i.canvas.pxratio),i.canvas.el.width=i.canvas.w,i.canvas.el.height=i.canvas.h,i.particles.move.enable||(i.fn.particlesEmpty(),i.fn.particlesCreate(),i.fn.particlesDraw(),i.fn.vendors.densityAutoParticles()),i.fn.vendors.densityAutoParticles()})},i.fn.canvasPaint=function(){i.canvas.ctx.fillRect(0,0,i.canvas.w,i.canvas.h)},i.fn.canvasClear=function(){i.canvas.ctx.clearRect(0,0,i.canvas.w,i.canvas.h)},i.fn.particle=function(e,t,n){if(this.radius=(i.particles.size.random?Math.random():1)*i.particles.size.value,i.particles.size.anim.enable&&(this.size_status=!1,this.vs=i.particles.size.anim.speed/100,i.particles.size.anim.sync||(this.vs=this.vs*Math.random())),this.x=n?n.x:Math.random()*i.canvas.w,this.y=n?n.y:Math.random()*i.canvas.h,this.x>i.canvas.w-2*this.radius?this.x=this.x-this.radius:this.x<2*this.radius&&(this.x=this.x+this.radius),this.y>i.canvas.h-2*this.radius?this.y=this.y-this.radius:this.y<2*this.radius&&(this.y=this.y+this.radius),i.particles.move.bounce&&i.fn.vendors.checkOverlap(this,n),this.color={},"object"==typeof e.value)if(e.value instanceof Array){var a=e.value[Math.floor(Math.random()*i.particles.color.value.length)];this.color.rgb=hexToRgb(a)}else void 0!=e.value.r&&void 0!=e.value.g&&void 0!=e.value.b&&(this.color.rgb={r:e.value.r,g:e.value.g,b:e.value.b}),void 0!=e.value.h&&void 0!=e.value.s&&void 0!=e.value.l&&(this.color.hsl={h:e.value.h,s:e.value.s,l:e.value.l});else"random"==e.value?this.color.rgb={r:Math.floor(256*Math.random())+0,g:Math.floor(256*Math.random())+0,b:Math.floor(256*Math.random())+0}:"string"==typeof e.value&&(this.color=e,this.color.rgb=hexToRgb(this.color.value));this.opacity=(i.particles.opacity.random?Math.random():1)*i.particles.opacity.value,i.particles.opacity.anim.enable&&(this.opacity_status=!1,this.vo=i.particles.opacity.anim.speed/100,i.particles.opacity.anim.sync||(this.vo=this.vo*Math.random()));var r={};switch(i.particles.move.direction){case"top":r={x:0,y:-1};break;case"top-right":r={x:.5,y:-.5};break;case"right":r={x:1,y:-0};break;case"bottom-right":r={x:.5,y:.5};break;case"bottom":r={x:0,y:1};break;case"bottom-left":r={x:-.5,y:1};break;case"left":r={x:-1,y:0};break;case"top-left":r={x:-.5,y:-.5};break;default:r={x:0,y:0}}i.particles.move.straight?(this.vx=r.x,this.vy=r.y,i.particles.move.random&&(this.vx=this.vx*Math.random(),this.vy=this.vy*Math.random())):(this.vx=r.x+Math.random()-.5,this.vy=r.y+Math.random()-.5),this.vx_i=this.vx,this.vy_i=this.vy;var o=i.particles.shape.type;if("object"==typeof o){if(o instanceof Array){var s=o[Math.floor(Math.random()*o.length)];this.shape=s}}else this.shape=o;if("image"==this.shape){var l=i.particles.shape;this.img={src:l.image.src,ratio:l.image.width/l.image.height},this.img.ratio||(this.img.ratio=1),"svg"==i.tmp.img_type&&void 0!=i.tmp.source_svg&&(i.fn.vendors.createSvgImg(this),i.tmp.pushing&&(this.img.loaded=!1))}},i.fn.particle.prototype.draw=function(){function e(){i.canvas.ctx.drawImage(o,t.x-n,t.y-n,2*n,2*n/t.img.ratio)}var t=this;if(void 0!=t.radius_bubble)var n=t.radius_bubble;else var n=t.radius;if(void 0!=t.opacity_bubble)var a=t.opacity_bubble;else var a=t.opacity;if(t.color.rgb)var r="rgba("+t.color.rgb.r+","+t.color.rgb.g+","+t.color.rgb.b+","+a+")";else var r="hsla("+t.color.hsl.h+","+t.color.hsl.s+"%,"+t.color.hsl.l+"%,"+a+")";switch(i.canvas.ctx.fillStyle=r,i.canvas.ctx.beginPath(),t.shape){case"circle":i.canvas.ctx.arc(t.x,t.y,n,0,2*Math.PI,!1);break;case"edge":i.canvas.ctx.rect(t.x-n,t.y-n,2*n,2*n);break;case"triangle":i.fn.vendors.drawShape(i.canvas.ctx,t.x-n,t.y+n/1.66,2*n,3,2);break;case"polygon":i.fn.vendors.drawShape(i.canvas.ctx,t.x-n/(i.particles.shape.polygon.nb_sides/3.5),t.y-n/.76,2.66*n/(i.particles.shape.polygon.nb_sides/3),i.particles.shape.polygon.nb_sides,1);break;case"star":i.fn.vendors.drawShape(i.canvas.ctx,t.x-2*n/(i.particles.shape.polygon.nb_sides/4),t.y-n/1.52,2*n*2.66/(i.particles.shape.polygon.nb_sides/3),i.particles.shape.polygon.nb_sides,2);break;case"image":if("svg"==i.tmp.img_type)var o=t.img.obj;else var o=i.tmp.img_obj;o&&e()}i.canvas.ctx.closePath(),i.particles.shape.stroke.width>0&&(i.canvas.ctx.strokeStyle=i.particles.shape.stroke.color,i.canvas.ctx.lineWidth=i.particles.shape.stroke.width,i.canvas.ctx.stroke()),i.canvas.ctx.fill()},i.fn.particlesCreate=function(){for(var e=0;e<i.particles.number.value;e++)i.particles.array.push(new i.fn.particle(i.particles.color,i.particles.opacity.value))},i.fn.particlesUpdate=function(){for(var e=0;e<i.particles.array.length;e++){var t=i.particles.array[e];if(i.particles.move.enable){var n=i.particles.move.speed/2;t.x+=t.vx*n,t.y+=t.vy*n}if(i.particles.opacity.anim.enable&&(1==t.opacity_status?(t.opacity>=i.particles.opacity.value&&(t.opacity_status=!1),t.opacity+=t.vo):(t.opacity<=i.particles.opacity.anim.opacity_min&&(t.opacity_status=!0),t.opacity-=t.vo),t.opacity<0&&(t.opacity=0)),i.particles.size.anim.enable&&(1==t.size_status?(t.radius>=i.particles.size.value&&(t.size_status=!1),t.radius+=t.vs):(t.radius<=i.particles.size.anim.size_min&&(t.size_status=!0),t.radius-=t.vs),t.radius<0&&(t.radius=0)),"bounce"==i.particles.move.out_mode)var a={x_left:t.radius,x_right:i.canvas.w,y_top:t.radius,y_bottom:i.canvas.h};else var a={x_left:-t.radius,x_right:i.canvas.w+t.radius,y_top:-t.radius,y_bottom:i.canvas.h+t.radius};switch(t.x-t.radius>i.canvas.w?(t.x=a.x_left,t.y=Math.random()*i.canvas.h):t.x+t.radius<0&&(t.x=a.x_right,t.y=Math.random()*i.canvas.h),t.y-t.radius>i.canvas.h?(t.y=a.y_top,t.x=Math.random()*i.canvas.w):t.y+t.radius<0&&(t.y=a.y_bottom,t.x=Math.random()*i.canvas.w),i.particles.move.out_mode){case"bounce":t.x+t.radius>i.canvas.w?t.vx=-t.vx:t.x-t.radius<0&&(t.vx=-t.vx),t.y+t.radius>i.canvas.h?t.vy=-t.vy:t.y-t.radius<0&&(t.vy=-t.vy)}if(isInArray("grab",i.interactivity.events.onhover.mode)&&i.fn.modes.grabParticle(t),(isInArray("bubble",i.interactivity.events.onhover.mode)||isInArray("bubble",i.interactivity.events.onclick.mode))&&i.fn.modes.bubbleParticle(t),(isInArray("repulse",i.interactivity.events.onhover.mode)||isInArray("repulse",i.interactivity.events.onclick.mode))&&i.fn.modes.repulseParticle(t),i.particles.line_linked.enable||i.particles.move.attract.enable)for(var r=e+1;r<i.particles.array.length;r++){var o=i.particles.array[r];i.particles.line_linked.enable&&i.fn.interact.linkParticles(t,o),i.particles.move.attract.enable&&i.fn.interact.attractParticles(t,o),i.particles.move.bounce&&i.fn.interact.bounceParticles(t,o)}}},i.fn.particlesDraw=function(){i.canvas.ctx.clearRect(0,0,i.canvas.w,i.canvas.h),i.fn.particlesUpdate();for(var e=0;e<i.particles.array.length;e++){var t=i.particles.array[e];t.draw()}},i.fn.particlesEmpty=function(){i.particles.array=[]},i.fn.particlesRefresh=function(){cancelRequestAnimFrame(i.fn.checkAnimFrame),cancelRequestAnimFrame(i.fn.drawAnimFrame),i.tmp.source_svg=void 0,i.tmp.img_obj=void 0,i.tmp.count_svg=0,i.fn.particlesEmpty(),i.fn.canvasClear(),i.fn.vendors.start()},i.fn.interact.linkParticles=function(e,t){var n=e.x-t.x,a=e.y-t.y,r=Math.sqrt(n*n+a*a);if(r<=i.particles.line_linked.distance){var o=i.particles.line_linked.opacity-r/(1/i.particles.line_linked.opacity)/i.particles.line_linked.distance;if(o>0){var s=i.particles.line_linked.color_rgb_line;i.canvas.ctx.strokeStyle="rgba("+s.r+","+s.g+","+s.b+","+o+")",i.canvas.ctx.lineWidth=i.particles.line_linked.width,i.canvas.ctx.beginPath(),i.canvas.ctx.moveTo(e.x,e.y),i.canvas.ctx.lineTo(t.x,t.y),i.canvas.ctx.stroke(),i.canvas.ctx.closePath()}}},i.fn.interact.attractParticles=function(e,t){var n=e.x-t.x,a=e.y-t.y,r=Math.sqrt(n*n+a*a);if(r<=i.particles.line_linked.distance){var o=n/(1e3*i.particles.move.attract.rotateX),s=a/(1e3*i.particles.move.attract.rotateY);e.vx-=o,e.vy-=s,t.vx+=o,t.vy+=s}},i.fn.interact.bounceParticles=function(e,t){var n=e.x-t.x,i=e.y-t.y,a=Math.sqrt(n*n+i*i),r=e.radius+t.radius;r>=a&&(e.vx=-e.vx,e.vy=-e.vy,t.vx=-t.vx,t.vy=-t.vy)},i.fn.modes.pushParticles=function(e,t){i.tmp.pushing=!0;for(var n=0;e>n;n++)i.particles.array.push(new i.fn.particle(i.particles.color,i.particles.opacity.value,{x:t?t.pos_x:Math.random()*i.canvas.w,y:t?t.pos_y:Math.random()*i.canvas.h})),n==e-1&&(i.particles.move.enable||i.fn.particlesDraw(),i.tmp.pushing=!1)},i.fn.modes.removeParticles=function(e){i.particles.array.splice(0,e),i.particles.move.enable||i.fn.particlesDraw()},i.fn.modes.bubbleParticle=function(e){function t(){e.opacity_bubble=e.opacity,e.radius_bubble=e.radius}function n(t,n,a,r,s){if(t!=n)if(i.tmp.bubble_duration_end){if(void 0!=a){var l=r-u*(r-t)/i.interactivity.modes.bubble.duration,c=t-l;g=t+c,"size"==s&&(e.radius_bubble=g),"opacity"==s&&(e.opacity_bubble=g)}}else if(o<=i.interactivity.modes.bubble.distance){if(void 0!=a)var d=a;else var d=r;if(d!=t){var g=r-u*(r-t)/i.interactivity.modes.bubble.duration;"size"==s&&(e.radius_bubble=g),"opacity"==s&&(e.opacity_bubble=g)}}else"size"==s&&(e.radius_bubble=void 0),"opacity"==s&&(e.opacity_bubble=void 0)}if(i.interactivity.events.onhover.enable&&isInArray("bubble",i.interactivity.events.onhover.mode)){var a=e.x-i.interactivity.mouse.pos_x,r=e.y-i.interactivity.mouse.pos_y,o=Math.sqrt(a*a+r*r),s=1-o/i.interactivity.modes.bubble.distance;if(o<=i.interactivity.modes.bubble.distance){if(s>=0&&"mousemove"==i.interactivity.status){if(i.interactivity.modes.bubble.size!=i.particles.size.value)if(i.interactivity.modes.bubble.size>i.particles.size.value){var l=e.radius+i.interactivity.modes.bubble.size*s;l>=0&&(e.radius_bubble=l)}else{var c=e.radius-i.interactivity.modes.bubble.size,l=e.radius-c*s;l>0?e.radius_bubble=l:e.radius_bubble=0}if(i.interactivity.modes.bubble.opacity!=i.particles.opacity.value)if(i.interactivity.modes.bubble.opacity>i.particles.opacity.value){var d=i.interactivity.modes.bubble.opacity*s;d>e.opacity&&d<=i.interactivity.modes.bubble.opacity&&(e.opacity_bubble=d)}else{var d=e.opacity-(i.particles.opacity.value-i.interactivity.modes.bubble.opacity)*s;d<e.opacity&&d>=i.interactivity.modes.bubble.opacity&&(e.opacity_bubble=d)}}}else t();"mouseleave"==i.interactivity.status&&t()}else if(i.interactivity.events.onclick.enable&&isInArray("bubble",i.interactivity.events.onclick.mode)){if(i.tmp.bubble_clicking){var a=e.x-i.interactivity.mouse.click_pos_x,r=e.y-i.interactivity.mouse.click_pos_y,o=Math.sqrt(a*a+r*r),u=((new Date).getTime()-i.interactivity.mouse.click_time)/1e3;u>i.interactivity.modes.bubble.duration&&(i.tmp.bubble_duration_end=!0),u>2*i.interactivity.modes.bubble.duration&&(i.tmp.bubble_clicking=!1,i.tmp.bubble_duration_end=!1)}i.tmp.bubble_clicking&&(n(i.interactivity.modes.bubble.size,i.particles.size.value,e.radius_bubble,e.radius,"size"),n(i.interactivity.modes.bubble.opacity,i.particles.opacity.value,e.opacity_bubble,e.opacity,"opacity"))}},i.fn.modes.repulseParticle=function(e){function t(){var t=Math.atan2(g,u);if(e.vx=f*Math.cos(t),e.vy=f*Math.sin(t),"bounce"==i.particles.move.out_mode){var n={x:e.x+e.vx,y:e.y+e.vy};n.x+e.radius>i.canvas.w?e.vx=-e.vx:n.x-e.radius<0&&(e.vx=-e.vx),n.y+e.radius>i.canvas.h?e.vy=-e.vy:n.y-e.radius<0&&(e.vy=-e.vy)}}if(i.interactivity.events.onhover.enable&&isInArray("repulse",i.interactivity.events.onhover.mode)&&"mousemove"==i.interactivity.status){var n=e.x-i.interactivity.mouse.pos_x,a=e.y-i.interactivity.mouse.pos_y,r=Math.sqrt(n*n+a*a),o={x:n/r,y:a/r},s=i.interactivity.modes.repulse.distance,l=100,c=clamp(1/s*(-1*Math.pow(r/s,2)+1)*s*l,0,50),d={x:e.x+o.x*c,y:e.y+o.y*c};"bounce"==i.particles.move.out_mode?(d.x-e.radius>0&&d.x+e.radius<i.canvas.w&&(e.x=d.x),d.y-e.radius>0&&d.y+e.radius<i.canvas.h&&(e.y=d.y)):(e.x=d.x,e.y=d.y)}else if(i.interactivity.events.onclick.enable&&isInArray("repulse",i.interactivity.events.onclick.mode))if(i.tmp.repulse_finish||(i.tmp.repulse_count++,i.tmp.repulse_count==i.particles.array.length&&(i.tmp.repulse_finish=!0)),i.tmp.repulse_clicking){var s=Math.pow(i.interactivity.modes.repulse.distance/6,3),u=i.interactivity.mouse.click_pos_x-e.x,g=i.interactivity.mouse.click_pos_y-e.y,p=u*u+g*g,f=-s/p*1;s>=p&&t()}else 0==i.tmp.repulse_clicking&&(e.vx=e.vx_i,e.vy=e.vy_i)},i.fn.modes.grabParticle=function(e){if(i.interactivity.events.onhover.enable&&"mousemove"==i.interactivity.status){var t=e.x-i.interactivity.mouse.pos_x,n=e.y-i.interactivity.mouse.pos_y,a=Math.sqrt(t*t+n*n);if(a<=i.interactivity.modes.grab.distance){var r=i.interactivity.modes.grab.line_linked.opacity-a/(1/i.interactivity.modes.grab.line_linked.opacity)/i.interactivity.modes.grab.distance;if(r>0){var o=i.particles.line_linked.color_rgb_line;i.canvas.ctx.strokeStyle="rgba("+o.r+","+o.g+","+o.b+","+r+")",i.canvas.ctx.lineWidth=i.particles.line_linked.width,i.canvas.ctx.beginPath(),i.canvas.ctx.moveTo(e.x,e.y),i.canvas.ctx.lineTo(i.interactivity.mouse.pos_x,i.interactivity.mouse.pos_y),i.canvas.ctx.stroke(),i.canvas.ctx.closePath()}}}},i.fn.vendors.eventsListeners=function(){"window"==i.interactivity.detect_on?i.interactivity.el=window:i.interactivity.el=i.canvas.el,(i.interactivity.events.onhover.enable||i.interactivity.events.onclick.enable)&&(i.interactivity.el.addEventListener("mousemove",function(e){if(i.interactivity.el==window)var t=e.clientX,n=e.clientY;else var t=e.offsetX||e.clientX,n=e.offsetY||e.clientY;i.interactivity.mouse.pos_x=t,i.interactivity.mouse.pos_y=n,i.tmp.retina&&(i.interactivity.mouse.pos_x*=i.canvas.pxratio,i.interactivity.mouse.pos_y*=i.canvas.pxratio),i.interactivity.status="mousemove"}),i.interactivity.el.addEventListener("mouseleave",function(e){i.interactivity.mouse.pos_x=null,i.interactivity.mouse.pos_y=null,i.interactivity.status="mouseleave"})),i.interactivity.events.onclick.enable&&i.interactivity.el.addEventListener("click",function(){if(i.interactivity.mouse.click_pos_x=i.interactivity.mouse.pos_x,i.interactivity.mouse.click_pos_y=i.interactivity.mouse.pos_y,i.interactivity.mouse.click_time=(new Date).getTime(),i.interactivity.events.onclick.enable)switch(i.interactivity.events.onclick.mode){case"push":i.particles.move.enable?i.fn.modes.pushParticles(i.interactivity.modes.push.particles_nb,i.interactivity.mouse):1==i.interactivity.modes.push.particles_nb?i.fn.modes.pushParticles(i.interactivity.modes.push.particles_nb,i.interactivity.mouse):i.interactivity.modes.push.particles_nb>1&&i.fn.modes.pushParticles(i.interactivity.modes.push.particles_nb);break;case"remove":i.fn.modes.removeParticles(i.interactivity.modes.remove.particles_nb);break;case"bubble":i.tmp.bubble_clicking=!0;break;case"repulse":i.tmp.repulse_clicking=!0,i.tmp.repulse_count=0,i.tmp.repulse_finish=!1,setTimeout(function(){i.tmp.repulse_clicking=!1},1e3*i.interactivity.modes.repulse.duration)}})},i.fn.vendors.densityAutoParticles=function(){if(i.particles.number.density.enable){var e=i.canvas.el.width*i.canvas.el.height/1e3;i.tmp.retina&&(e/=2*i.canvas.pxratio);var t=e*i.particles.number.value/i.particles.number.density.value_area,n=i.particles.array.length-t;0>n?i.fn.modes.pushParticles(Math.abs(n)):i.fn.modes.removeParticles(n)}},i.fn.vendors.checkOverlap=function(e,t){for(var n=0;n<i.particles.array.length;n++){var a=i.particles.array[n],r=e.x-a.x,o=e.y-a.y,s=Math.sqrt(r*r+o*o);s<=e.radius+a.radius&&(e.x=t?t.x:Math.random()*i.canvas.w,e.y=t?t.y:Math.random()*i.canvas.h,i.fn.vendors.checkOverlap(e))}},i.fn.vendors.createSvgImg=function(e){var t=i.tmp.source_svg,n=/#([0-9A-F]{3,6})/gi,a=t.replace(n,function(t,n,i,a){if(e.color.rgb)var r="rgba("+e.color.rgb.r+","+e.color.rgb.g+","+e.color.rgb.b+","+e.opacity+")";else var r="hsla("+e.color.hsl.h+","+e.color.hsl.s+"%,"+e.color.hsl.l+"%,"+e.opacity+")";return r}),r=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),o=window.URL||window.webkitURL||window,s=o.createObjectURL(r),l=new Image;l.addEventListener("load",function(){e.img.obj=l,e.img.loaded=!0,o.revokeObjectURL(s),i.tmp.count_svg++}),l.src=s},i.fn.vendors.destroypJS=function(){cancelAnimationFrame(i.fn.drawAnimFrame),n.remove(),pJSDom=null},i.fn.vendors.drawShape=function(e,t,n,i,a,r){var o=a*r,s=a/r,l=180*(s-2)/s,c=Math.PI-Math.PI*l/180;e.save(),e.beginPath(),e.translate(t,n),e.moveTo(0,0);for(var d=0;o>d;d++)e.lineTo(i,0),e.translate(i,0),e.rotate(c);e.fill(),e.restore()},i.fn.vendors.exportImg=function(){window.open(i.canvas.el.toDataURL("image/png"),"_blank")},i.fn.vendors.loadImg=function(e){if(i.tmp.img_error=void 0,""!=i.particles.shape.image.src)if("svg"==e){var t=new XMLHttpRequest;t.open("GET",i.particles.shape.image.src),t.onreadystatechange=function(e){4==t.readyState&&(200==t.status?(i.tmp.source_svg=e.currentTarget.response,i.fn.vendors.checkBeforeDraw()):(console.log("Error pJS - Image not found"),i.tmp.img_error=!0))},t.send()}else{var n=new Image;n.addEventListener("load",function(){i.tmp.img_obj=n,i.fn.vendors.checkBeforeDraw()}),n.src=i.particles.shape.image.src}else console.log("Error pJS - No image.src"),i.tmp.img_error=!0},i.fn.vendors.draw=function(){"image"==i.particles.shape.type?"svg"==i.tmp.img_type?i.tmp.count_svg>=i.particles.number.value?(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame)):i.tmp.img_error||(i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw)):void 0!=i.tmp.img_obj?(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame)):i.tmp.img_error||(i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw)):(i.fn.particlesDraw(),i.particles.move.enable?i.fn.drawAnimFrame=requestAnimFrame(i.fn.vendors.draw):cancelRequestAnimFrame(i.fn.drawAnimFrame))},i.fn.vendors.checkBeforeDraw=function(){"image"==i.particles.shape.type?"svg"==i.tmp.img_type&&void 0==i.tmp.source_svg?i.tmp.checkAnimFrame=requestAnimFrame(check):(cancelRequestAnimFrame(i.tmp.checkAnimFrame),i.tmp.img_error||(i.fn.vendors.init(),i.fn.vendors.draw())):(i.fn.vendors.init(),i.fn.vendors.draw())},i.fn.vendors.init=function(){i.fn.retinaInit(),i.fn.canvasInit(),i.fn.canvasSize(),i.fn.canvasPaint(),i.fn.particlesCreate(),i.fn.vendors.densityAutoParticles(),i.particles.line_linked.color_rgb_line=hexToRgb(i.particles.line_linked.color)},i.fn.vendors.start=function(){isInArray("image",i.particles.shape.type)?(i.tmp.img_type=i.particles.shape.image.src.substr(i.particles.shape.image.src.length-3),i.fn.vendors.loadImg(i.tmp.img_type)):i.fn.vendors.checkBeforeDraw()},i.fn.vendors.eventsListeners(),i.fn.vendors.start()};Object.deepExtend=function(e,t){for(var n in t)t[n]&&t[n].constructor&&t[n].constructor===Object?(e[n]=e[n]||{},arguments.callee(e[n],t[n])):e[n]=t[n];return e},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),window.pJSDom=[],window.particlesJS=function(e,t){"string"!=typeof e&&(t=e,e="particles-js"),e||(e="particles-js");var n=document.getElementById(e),i="particles-js-canvas-el",a=n.getElementsByClassName(i);if(a.length)for(;a.length>0;)n.removeChild(a[0]);var r=document.createElement("canvas");r.className=i,r.style.width="100%",r.style.height="100%";var o=document.getElementById(e).appendChild(r);null!=o&&pJSDom.push(new pJS(e,t))},window.particlesJS.load=function(e,t,n){var i=new XMLHttpRequest;i.open("GET",t),i.onreadystatechange=function(t){if(4==i.readyState)if(200==i.status){var a=JSON.parse(t.currentTarget.response);window.particlesJS(e,a),n&&n()}else console.log("Error pJS - XMLHttpRequest status: "+i.status),console.log("Error pJS - File config not found")},i.send()},define("particles",["KD"],function(e){return function(){var t;return t||e.particles}}(this));
//# sourceMappingURL=k3cloud.slogin.min.js.map